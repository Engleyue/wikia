<?php

/**
 * Adds ShareThis functionality to the wiki
 *
 * @author Lucas Garczewski <tor@wikia-inc.com>
 */

$wgHooks['SkinAfterBottomScripts'][] = 'efAddShareThisCode';
$wgHooks['MonacoAfterArticleLinks'][] = 'efAddShareThisButton';

function efAddShareThisCode( $skin, $text ) {
	global $wgTitle;

	// only available under Monaco
	if ( $skin->getSkinname() !== 'monaco' && $wgTitle->exists() && $wgTitle->getNamespace() !== NS_SPECIAL ) {
		return true;
	}

	// add code generated by SharThis customizing tool
	$text .= '<script type="text/javascript" src="http://w.sharethis.com/button/sharethis.js#publisher=0b185d61-3eda-4b4b-a234-9a95e0913e09&amp;type=website&amp;buttonText=Sharethis%20article&amp;style=rotate&amp;send_services=email&amp;post_services=facebook%2Cstumbleupon%2Ctwitter%2Cdigg%2Creddit%2Ctechnorati%2Cblogger%2Cslashdot%2Cn4g%2Cdelicious%2Cybuzz%2Cwordpress%2Cfurl%2Cmyspace%2Cmixx%2Ctypepad%2Cgoogle_bmarks%2Cwindows_live%2Cfark%2Cbus_exchange%2Cpropeller%2Cnewsvine%2Clinkedin"></script>';

	// hook must return a value
	return true;
}

function efAddShareThisButton( ) {
	echo '<li id="control_share"><span id="sharethis_0"></span></li>';

	return true;
}
