/*
Copyright (c) 2003-2011, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license

DO NOT modify this file by hand! Use minify.sh maintenance script to regenerate this file!
*/
if(!window.CKEDITOR)window.CKEDITOR=function(){var a={timestamp:"",version:"3.5.2",revision:"r36542 build 20110430",_:{},status:"unloaded",basePath:function(){var e=window.CKEDITOR_BASEPATH||"";if(!e)for(var g=document.getElementsByTagName("script"),h=0;h<g.length;h++){var j=g[h].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(j){e=j[1];break}}if(e.indexOf(":/")==-1)e=e.indexOf("/")===0?location.href.match(/^.*?:\/\/[^\/]*/)[0]+e:location.href.match(/^[^\?]*\/(?:)/)[0]+e;if(!e)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';
return e}(),getUrl:function(e){if(e.indexOf(":/")==-1&&e.indexOf("/")!==0)e=this.basePath+e;if(this.timestamp&&e.charAt(e.length-1)!="/"&&!/[&?]t=/.test(e))e+=(e.indexOf("?")>=0?"&":"?")+"t="+this.timestamp;return e}},b=window.CKEDITOR_GETURL;if(b){var c=a.getUrl;a.getUrl=function(e){return b.call(a,e)||c.call(a,e)}}return a}();
if(!CKEDITOR.event){CKEDITOR.event=function(){};CKEDITOR.event.implementOn=function(a){var b=CKEDITOR.event.prototype,c;for(c in b)if(a[c]==undefined)a[c]=b[c]};CKEDITOR.event.prototype=function(){var a=function(c){c=c.getPrivate&&c.getPrivate()||c._||(c._={});return c.events||(c.events={})},b=function(c){this.name=c;this.listeners=[]};b.prototype={getListenerIndex:function(c){for(var e=0,g=this.listeners;e<g.length;e++)if(g[e].fn==c)return e;return-1}};return{on:function(c,e,g,h,j){var f=a(this);
f=f[c]||(f[c]=new b(c));if(f.getListenerIndex(e)<0){f=f.listeners;g||(g=this);if(isNaN(j))j=10;var d=this,k=function(m,p,r,t){m={name:c,sender:this,editor:m,data:p,listenerData:h,stop:r,cancel:t,removeListener:function(){d.removeListener(c,e)}};e.call(g,m);return m.data};k.fn=e;k.priority=j;for(var l=f.length-1;l>=0;l--)if(f[l].priority<=j){f.splice(l+1,0,k);return}f.unshift(k)}},fire:function(){var c=false,e=function(){c=true},g=false,h=function(){g=true};return function(j,f,d){var k=a(this)[j];
j=c;var l=g;c=g=false;if(k){k=k.listeners;if(k.length){k=k.slice(0);for(var m=0;m<k.length;m++){var p=k[m].call(this,d,f,e,h);if(typeof p!="undefined")f=p;if(c||g)break}}}f=g||(typeof f=="undefined"?false:f);c=j;g=l;return f}}(),fireOnce:function(c,e,g){e=this.fire(c,e,g);delete a(this)[c];return e},removeListener:function(c,e){var g=a(this)[c];if(g){var h=g.getListenerIndex(e);h>=0&&g.listeners.splice(h,1)}},hasListeners:function(c){return(c=a(this)[c])&&c.listeners.length>0}}}()}
if(!CKEDITOR.editor){CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.editor=function(a,b,c,e){this._={instanceConfig:a,element:b,data:e};this.elementMode=c||CKEDITOR.ELEMENT_MODE_NONE;CKEDITOR.event.call(this);this._init()};CKEDITOR.editor.replace=function(a,b){var c=a;if(typeof c!="object"){if((c=document.getElementById(a))&&c.tagName.toLowerCase()in{style:1,script:1,base:1,link:1,meta:1,title:1})c=null;if(!c)for(var e=0,g=document.getElementsByName(a);(c=
g[e++])&&c.tagName.toLowerCase()!="textarea";);if(!c)throw'[CKEDITOR.editor.replace] The element with id or name "'+a+'" was not found.';}c.style.visibility="hidden";return new CKEDITOR.editor(b,c,CKEDITOR.ELEMENT_MODE_REPLACE)};CKEDITOR.editor.appendTo=function(a,b,c){var e=a;if(typeof e!="object"){e=document.getElementById(a);if(!e)throw'[CKEDITOR.editor.appendTo] The element with id "'+a+'" was not found.';}return new CKEDITOR.editor(b,e,CKEDITOR.ELEMENT_MODE_APPENDTO,c)};CKEDITOR.editor.prototype=
{_init:function(){(CKEDITOR.editor._pending||(CKEDITOR.editor._pending=[])).push(this)},fire:function(a,b){return CKEDITOR.event.prototype.fire.call(this,a,b,this)},fireOnce:function(a,b){return CKEDITOR.event.prototype.fireOnce.call(this,a,b,this)}};CKEDITOR.event.implementOn(CKEDITOR.editor.prototype,true)}
if(!CKEDITOR.env)CKEDITOR.env=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:eval("/*@cc_on!@*/false"),opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,air:a.indexOf(" adobeair/")>-1,mac:a.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat",mobile:a.indexOf("mobile")>-1,isCustomDomain:function(){if(!this.ie)return false;var h=document.domain,j=window.location.hostname;return h!=j&&h!="["+j+"]"}};c.gecko=navigator.product=="Gecko"&&!c.webkit&&!c.opera;
c.ie||eval("env.ie  = /*@cc_on!@*/false;");var e=0;if(c.ie){e=parseFloat(a.match(/msie (\d+)/)[1]);c.ie8=!!document.documentMode;c.ie8Compat=document.documentMode==8;c.ie7Compat=e==7&&!document.documentMode||document.documentMode==7;c.ie6Compat=e<7||c.quirks}if(c.gecko){var g=a.match(/rv:([\d\.]+)/);if(g){c.geckoRelease=g[1];g=g[1].split(".");e=g[0]*1E4+(g[1]||0)*100+(g[2]||0)*1}}if(c.opera)e=parseFloat(b.version());if(c.air)e=parseFloat(a.match(/ adobeair\/(\d+)/)[1]);if(c.webkit)e=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]);
c.version=e;c.isCompatible=!c.mobile&&(c.ie&&e>=6||c.gecko&&e>=10801||c.opera&&e>=9.5||c.air&&e>=1||c.webkit&&e>=522||false);c.cssClass="cke_browser_"+(c.ie?"ie":c.gecko?"gecko":c.opera?"opera":c.webkit?"webkit":"unknown");if(c.quirks)c.cssClass+=" cke_browser_quirks";if(c.ie){c.cssClass+=" cke_browser_ie"+(c.version<7?"6":c.version>=8?document.documentMode:"7");if(c.quirks)c.cssClass+=" cke_browser_iequirks"}if(c.gecko&&e<10900)c.cssClass+=" cke_browser_gecko18";if(c.air)c.cssClass+=" cke_browser_air";
return c}();
CKEDITOR.status=="unloaded"&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if(CKEDITOR.status!="basic_ready")CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var b=document.createElement("script");b.type="text/javascript";b.src=CKEDITOR.basePath+"ckeditor.js";b.src=CKEDITOR.basePath+"ckeditor_source.js";document.getElementsByTagName("head")[0].appendChild(b)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.replaceClass="ckeditor";CKEDITOR.replaceByClassEnabled=1;
var a=function(b,c,e,g){if(CKEDITOR.env.isCompatible){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore();b=e(b,c,g);CKEDITOR.add(b);return b}return null};CKEDITOR.replace=function(b,c){return a(b,c,CKEDITOR.editor.replace)};CKEDITOR.appendTo=function(b,c,e){return a(b,c,CKEDITOR.editor.appendTo,e)};CKEDITOR.add=function(b){(this._.pending||(this._.pending=[])).push(b)};CKEDITOR.replaceAll=function(){for(var b=document.getElementsByTagName("textarea"),c=0;c<b.length;c++){var e=null,g=b[c];if(g.name||g.id){if(typeof arguments[0]==
"string"){if(!RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(g.className))continue}else if(typeof arguments[0]=="function"){e={};if(arguments[0](g,e)===false)continue}this.replace(g,e)}}};(function(){var b=function(){var c=CKEDITOR.loadFullCore,e=CKEDITOR.loadFullCoreTimeout;CKEDITOR.replaceByClassEnabled&&CKEDITOR.replaceAll(CKEDITOR.replaceClass);CKEDITOR.status="basic_ready";if(c&&c._load)c();else e&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},e*1E3)};if(window.addEventListener)window.addEventListener("load",
b,false);else window.attachEvent&&window.attachEvent("onload",b)})();CKEDITOR.status="basic_loaded"}();CKEDITOR.dom={};
(function(){var a=[];CKEDITOR.on("reset",function(){a=[]});CKEDITOR.tools={arrayCompare:function(b,c){if(!b&&!c)return true;if(!b||!c||b.length!=c.length)return false;for(var e=0;e<b.length;e++)if(b[e]!=c[e])return false;return true},clone:function(b){var c;if(b&&b instanceof Array){c=[];for(var e=0;e<b.length;e++)c[e]=this.clone(b[e]);return c}if(b===null||typeof b!="object"||b instanceof String||b instanceof Number||b instanceof Boolean||b instanceof Date||b instanceof RegExp)return b;c=new b.constructor;
for(e in b)c[e]=this.clone(b[e]);return c},capitalize:function(b){return b.charAt(0).toUpperCase()+b.substring(1).toLowerCase()},extend:function(b){var c=arguments.length,e,g;if(typeof(e=arguments[c-1])=="boolean")c--;else if(typeof(e=arguments[c-2])=="boolean"){g=arguments[c-1];c-=2}for(var h=1;h<c;h++){var j=arguments[h],f;for(f in j)if(e===true||b[f]==undefined)if(!g||f in g)b[f]=j[f]}return b},prototypedCopy:function(b){var c=function(){};c.prototype=b;return new c},isArray:function(b){return!!b&&
b instanceof Array},isEmpty:function(b){for(var c in b)if(b.hasOwnProperty(c))return false;return true},cssStyleToDomStyle:function(){var b=document.createElement("div").style,c=typeof b.cssFloat!="undefined"?"cssFloat":typeof b.styleFloat!="undefined"?"styleFloat":"float";return function(e){return e=="float"?c:e.replace(/-./g,function(g){return g.substr(1).toUpperCase()})}}(),buildStyleHtml:function(b){b=[].concat(b);for(var c,e=[],g=0;g<b.length;g++){c=b[g];/@import|[{}]/.test(c)?e.push("<style>"+
c+"</style>"):e.push('<link type="text/css" rel=stylesheet href="'+c+'">')}return e.join("")},htmlEncode:function(b){var c=function(h){var j=new CKEDITOR.dom.element("span");j.setText(h);return j.getHtml()},e=c("\n").toLowerCase()=="<br>"?function(h){return c(h).replace(/<br>/gi,"\n")}:c,g=c(">")==">"?function(h){return e(h).replace(/>/g,"&gt;")}:e;this.htmlEncode=c("  ")=="&nbsp; "?function(h){return g(h).replace(/&nbsp;/g," ")}:g;return this.htmlEncode(b)},htmlEncodeAttr:function(b){return b.replace(/"/g,
"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},getNextNumber:function(){var b=0;return function(){return++b}}(),getNextId:function(){return"cke_"+this.getNextNumber()},override:function(b,c){return c(b)},setTimeout:function(b,c,e,g,h){h||(h=window);e||(e=h);return h.setTimeout(function(){g?b.apply(e,[].concat(g)):b.apply(e)},c||0)},trim:function(){var b=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(c){return c.replace(b,"")}}(),ltrim:function(){var b=/^[ \t\n\r]+/g;return function(c){return c.replace(b,
"")}}(),rtrim:function(){var b=/[ \t\n\r]+$/g;return function(c){return c.replace(b,"")}}(),indexOf:Array.prototype.indexOf?function(b,c){return b.indexOf(c)}:function(b,c){for(var e=0,g=b.length;e<g;e++)if(b[e]===c)return e;return-1},bind:function(b,c){return function(){return b.apply(c,arguments)}},createClass:function(b){var c=b.$,e=b.base,g=b.privates||b._,h=b.proto;b=b.statics;if(g){var j=c;c=function(){var f=this._||(this._={}),d;for(d in g){var k=g[d];f[d]=typeof k=="function"?CKEDITOR.tools.bind(k,
this):k}j.apply(this,arguments)}}if(e){c.prototype=this.prototypedCopy(e.prototype);c.prototype.constructor=c;c.prototype.base=function(){this.base=e.prototype.base;e.apply(this,arguments);this.base=arguments.callee}}h&&this.extend(c.prototype,h,true);b&&this.extend(c,b,true);return c},addFunction:function(b,c){return a.push(function(){return b.apply(c||this,arguments)})-1},removeFunction:function(b){a[b]=null},callFunction:function(b){var c=a[b];return c&&c.apply(window,Array.prototype.slice.call(arguments,
1))},cssLength:function(){var b=/^\d+(?:\.\d+)?$/;return function(c){return c+(b.test(c)?"px":"")}}(),repeat:function(b,c){return Array(c+1).join(b)},tryThese:function(){for(var b,c=0,e=arguments.length;c<e;c++){var g=arguments[c];try{b=g();break}catch(h){}}return b},genKey:function(){return Array.prototype.slice.call(arguments).join("-")}}})();
CKEDITOR.dtd=function(){var a=CKEDITOR.tools.extend,b={isindex:1,fieldset:1},c={input:1,button:1,select:1,textarea:1,label:1},e=a({a:1},c),g=a({iframe:1},e),h={hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1},j={ins:1,del:1,script:1,style:1},f=a({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1},j),d=a({sub:1,img:1,object:1,sup:1,
basefont:1,map:1,applet:1,font:1,big:1,small:1},f),k=a({p:1},d);c=a({iframe:1},d,c);d={img:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,
address:1,q:1,pre:1,p:1,em:1,dfn:1};var l=a({a:1},c),m={tr:1},p={"#":1},r=a({param:1},d),t=a({form:1},b,g,h,k),n={li:1},s={base:1,link:1,meta:1,title:1},q=a(s,{style:1,script:1}),v={head:1,body:1},x={address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1};return{$nonBodyContent:a({html:1},v,s),$block:x,$blockLimit:{body:1,div:1,td:1,th:1,caption:1,form:1},$inline:l,$body:a({script:1,style:1},x),
$cdata:{script:1,style:1},$empty:{area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1},$listItem:{dd:1,dt:1,li:1},$list:{ul:1,ol:1,dl:1},$nonEditable:{applet:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,script:1,textarea:1,param:1},$removeEmpty:{abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,
textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},html:v,head:q,style:p,script:p,body:t,base:{},link:{},meta:{},title:p,col:{},tr:{td:1,th:1},img:{},colgroup:{col:1},noscript:t,td:t,br:{},th:t,center:t,kbd:l,button:a(k,h),basefont:{},h5:l,h4:l,samp:l,h6:l,ol:n,h1:l,h3:l,option:p,h2:l,form:a(b,g,h,k),select:{optgroup:1,option:1},font:l,ins:l,menu:n,abbr:l,label:l,table:{thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1},code:l,script:p,tfoot:m,cite:l,
li:t,input:{},iframe:t,strong:l,textarea:p,noframes:t,big:l,small:l,span:l,hr:{},dt:l,sub:l,optgroup:{option:1},param:{},bdo:l,"var":l,div:t,object:r,sup:l,dd:t,strike:l,area:{},dir:n,map:a({area:1,form:1,p:1},b,j,h),applet:r,dl:{dt:1,dd:1},del:l,isindex:{},fieldset:a({legend:1},d),thead:m,ul:n,acronym:l,b:l,a:c,blockquote:t,caption:l,i:l,u:l,tbody:m,s:l,address:a(g,k),tt:l,legend:l,q:l,pre:a(f,e),p:l,em:l,dfn:l}}();CKEDITOR.dom.event=function(a){this.$=a};
CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var a=this.getKey();if(this.$.ctrlKey||this.$.metaKey)a+=CKEDITOR.CTRL;if(this.$.shiftKey)a+=CKEDITOR.SHIFT;if(this.$.altKey)a+=CKEDITOR.ALT;return a},preventDefault:function(a){var b=this.$;if(b.preventDefault)b.preventDefault();else b.returnValue=false;a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true},getTarget:function(){var a=
this.$.target||this.$.srcElement;return a?new CKEDITOR.dom.node(a):null}};CKEDITOR.CTRL=1E3;CKEDITOR.SHIFT=2E3;CKEDITOR.ALT=4E3;CKEDITOR.dom.domObject=function(a){if(a)this.$=a};
CKEDITOR.dom.domObject.prototype=function(){var a=function(b,c){return function(e){typeof CKEDITOR!="undefined"&&b.fire(c,new CKEDITOR.dom.event(e))}};return{getPrivate:function(){var b;if(!(b=this.getCustomData("_")))this.setCustomData("_",b={});return b},on:function(b){var c=this.getCustomData("_cke_nativeListeners");if(!c){c={};this.setCustomData("_cke_nativeListeners",c)}if(!c[b]){c=c[b]=a(this,b);if(this.$.attachEvent)this.$.attachEvent("on"+b,c);else this.$.addEventListener&&this.$.addEventListener(b,
c,!!CKEDITOR.event.useCapture)}return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(b){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(b)){var c=this.getCustomData("_cke_nativeListeners"),e=c&&c[b];if(e){if(this.$.detachEvent)this.$.detachEvent("on"+b,e);else this.$.removeEventListener&&this.$.removeEventListener(b,e,false);delete c[b]}}},removeAllListeners:function(){var b=this.getCustomData("_cke_nativeListeners"),c;for(c in b){var e=
b[c];if(this.$.detachEvent)this.$.detachEvent("on"+c,e);else this.$.removeEventListener&&this.$.removeEventListener(c,e,false);delete b[c]}}}}();
(function(a){var b={};CKEDITOR.on("reset",function(){b={}});a.equals=function(c){return c&&c.$===this.$};a.setCustomData=function(c,e){var g=this.getUniqueId();(b[g]||(b[g]={}))[c]=e;return this};a.getCustomData=function(c){var e=this.$["data-cke-expando"];return(e=e&&b[e])&&e[c]};a.removeCustomData=function(c){var e=this.$["data-cke-expando"];var g=(e=e&&b[e])&&e[c];typeof g!="undefined"&&delete e[c];return g||null};a.clearCustomData=function(){this.removeAllListeners();var c=this.$["data-cke-expando"];
c&&delete b[c]};a.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(a)})(CKEDITOR.dom.domObject.prototype);CKEDITOR.dom.window=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject;
CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){CKEDITOR.env.webkit&&this.$.parent&&this.$.parent.focus();this.$.focus()},getViewPaneSize:function(){var a=this.$.document,b=a.compatMode=="CSS1Compat";return{width:(b?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(b?a.documentElement.clientHeight:a.body.clientHeight)||0}},getScrollPosition:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};else{a=a.document;return{x:a.documentElement.scrollLeft||
a.body.scrollLeft||0,y:a.documentElement.scrollTop||a.body.scrollTop||0}}}});CKEDITOR.dom.document=function(a){CKEDITOR.dom.domObject.call(this,a)};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject;
CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var b=new CKEDITOR.dom.element("link");b.setAttributes({rel:"stylesheet",type:"text/css",href:a});this.getHead().append(b)}},appendStyleText:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet("").cssText=a;else{var b=new CKEDITOR.dom.element("style",this);b.append(new CKEDITOR.dom.text(a,this));this.getHead().append(b)}},createElement:function(a,
b){var c=new CKEDITOR.dom.element(a,this);if(b){b.attributes&&c.setAttributes(b.attributes);b.styles&&c.setStyles(b.styles)}return c},createText:function(a){return new CKEDITOR.dom.text(a,this)},focus:function(){this.getWindow().focus()},getById:function(a){return(a=this.$.getElementById(a))?new CKEDITOR.dom.element(a):null},getByAddress:function(a,b){for(var c=this.$.documentElement,e=0;c&&e<a.length;e++){var g=a[e];if(b)for(var h=-1,j=0;j<c.childNodes.length;j++){var f=c.childNodes[j];if(!(b===
true&&f.nodeType==3&&f.previousSibling&&f.previousSibling.nodeType==3)){h++;if(h==g){c=f;break}}}else c=c.childNodes[g]}return c?new CKEDITOR.dom.node(c):null},getElementsByTag:function(a,b){if(!(CKEDITOR.env.ie&&!(document.documentMode>8))&&b)a=b+":"+a;return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(a))},getHead:function(){var a=this.$.getElementsByTagName("head")[0];a=a?new CKEDITOR.dom.element(a):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),true);return(this.getHead=
function(){return a})()},getBody:function(){var a=new CKEDITOR.dom.element(this.$.body);return(this.getBody=function(){return a})()},getDocumentElement:function(){var a=new CKEDITOR.dom.element(this.$.documentElement);return(this.getDocumentElement=function(){return a})()},getWindow:function(){var a=new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return a})()},write:function(a){this.$.open("text/html","replace");CKEDITOR.env.isCustomDomain()&&(this.$.domain=
document.domain);this.$.write(a);this.$.close()}});CKEDITOR.dom.node=function(a){if(a){switch(a.nodeType){case CKEDITOR.NODE_DOCUMENT:return new CKEDITOR.dom.document(a);case CKEDITOR.NODE_ELEMENT:return new CKEDITOR.dom.element(a);case CKEDITOR.NODE_TEXT:return new CKEDITOR.dom.text(a)}CKEDITOR.dom.domObject.call(this,a)}return this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject;CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;
CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;
CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(a,b){a.append(this,b);return a},clone:function(a,b){var c=this.$.cloneNode(a),e=function(g){if(g.nodeType==CKEDITOR.NODE_ELEMENT){b||g.removeAttribute("id",false);g.removeAttribute("data-cke-expando",false);if(a){g=g.childNodes;for(var h=0;h<g.length;h++)e(g[h])}}};e(c);return new CKEDITOR.dom.node(c)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(a){a.$.parentNode.insertBefore(this.$,
a.$.nextSibling);return a},insertBefore:function(a){a.$.parentNode.insertBefore(this.$,a.$);return a},insertBeforeMe:function(a){this.$.parentNode.insertBefore(a.$,this.$);return a},getAddress:function(a){for(var b=[],c=this.getDocument().$.documentElement,e=this.$;e&&e!=c;){var g=e.parentNode,h=-1;if(g){for(var j=0;j<g.childNodes.length;j++){var f=g.childNodes[j];if(!(a&&f.nodeType==3&&f.previousSibling&&f.previousSibling.nodeType==3)){h++;if(f==e)break}}b.unshift(h)}e=g}return b},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||
this.$.parentNode.ownerDocument)},getIndex:function(){for(var a=this.$,b=a.parentNode&&a.parentNode.firstChild,c=-1;b;){c++;if(b==a)return c;b=b.nextSibling}return-1},getNextSourceNode:function(a,b,c){if(c&&!c.call){var e=c;c=function(h){return!h.equals(e)}}a=!a&&this.getFirst&&this.getFirst();var g;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&c(this,true)===false)return null;a=this.getNext()}for(;!a&&(g=(g||this).getParent());){if(c&&c(g,true)===false)return null;a=g.getNext()}if(!a)return null;
if(c&&c(a)===false)return null;if(b&&b!=a.type)return a.getNextSourceNode(false,b,c);return a},getPreviousSourceNode:function(a,b,c){if(c&&!c.call){var e=c;c=function(h){return!h.equals(e)}}a=!a&&this.getLast&&this.getLast();var g;if(!a){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&c(this,true)===false)return null;a=this.getPrevious()}for(;!a&&(g=(g||this).getParent());){if(c&&c(g,true)===false)return null;a=g.getPrevious()}if(!a)return null;if(c&&c(a)===false)return null;if(b&&a.type!=b)return a.getPreviousSourceNode(false,
b,c);return a},getPrevious:function(a){var b=this.$,c;do c=(b=b.previousSibling)&&new CKEDITOR.dom.node(b);while(c&&a&&!a(c));return c},getNext:function(a){var b=this.$,c;do c=(b=b.nextSibling)&&new CKEDITOR.dom.node(b);while(c&&a&&!a(c));return c},getParent:function(){var a=this.$.parentNode;return a&&a.nodeType==1?new CKEDITOR.dom.node(a):null},getParents:function(a){var b=this,c=[];do c[a?"push":"unshift"](b);while(b=b.getParent());return c},getCommonAncestor:function(a){if(a.equals(this))return this;
if(a.contains&&a.contains(this))return a;var b=this.contains?this:this.getParent();do if(b.contains(a))return b;while(b=b.getParent());return null},getPosition:function(a){var b=this.$,c=a.$;if(b.compareDocumentPosition)return b.compareDocumentPosition(c);if(b==c)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&a.type==CKEDITOR.NODE_ELEMENT){if(b.contains){if(b.contains(c))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(c.contains(b))return CKEDITOR.POSITION_IS_CONTAINED+
CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in b)return b.sourceIndex<0||c.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:b.sourceIndex<c.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}b=this.getAddress();a=a.getAddress();c=Math.min(b.length,a.length);for(var e=0;e<=c-1;e++)if(b[e]!=a[e]){if(e<c)return b[e]<a[e]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;break}return b.length<a.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+
CKEDITOR.POSITION_FOLLOWING},getAscendant:function(a,b){var c=this.$;if(!b)c=c.parentNode;for(;c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return new CKEDITOR.dom.node(c);c=c.parentNode}return null},hasAscendant:function(a,b){var c=this.$;if(!b)c=c.parentNode;for(;c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return true;c=c.parentNode}return false},move:function(a,b){a.append(this.remove(),b)},remove:function(a){var b=this.$,c=b.parentNode;if(c){if(a)for(;a=b.firstChild;)c.insertBefore(b.removeChild(a),
b);c.removeChild(b)}return this},replace:function(a){this.insertBefore(a);a.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var a;this.getFirst&&(a=this.getFirst());){if(a.type==CKEDITOR.NODE_TEXT){var b=CKEDITOR.tools.ltrim(a.getText()),c=a.getLength();if(b){if(b.length<c){a.split(c-b.length);this.$.removeChild(this.$.firstChild)}}else{a.remove();continue}}break}},rtrim:function(){for(var a;this.getLast&&(a=this.getLast());){if(a.type==CKEDITOR.NODE_TEXT){var b=CKEDITOR.tools.rtrim(a.getText()),
c=a.getLength();if(b){if(b.length<c){a.split(b.length);this.$.lastChild.parentNode.removeChild(this.$.lastChild)}}else{a.remove();continue}}break}if(!CKEDITOR.env.ie&&!CKEDITOR.env.opera)(a=this.$.lastChild)&&a.type==1&&a.nodeName.toLowerCase()=="br"&&a.parentNode.removeChild(a)},findFormattableAncestor:function(){for(var a=this;a;){if(a.type==CKEDITOR.NODE_ELEMENT){if(a.is("body")||a.getCustomData("_cke_notReadOnly"))break;if(a.getAttribute("contentEditable")=="false"){if(a.getAttribute("formatEditable")==
"true")return a}else if(a.getAttribute("contentEditable")=="true")break}a=a.getParent()}return false},isReadOnlyNotFormattable:function(){for(var a=this;a;){if(a.type==CKEDITOR.NODE_ELEMENT){if(a.is("body")||a.getCustomData("_cke_notReadOnly"))break;if(a.getAttribute("contentEditable")=="false"){if(a.getAttribute("formatEditable")!="true")return a}else if(a.getAttribute("contentEditable")=="true")break}a=a.getParent()}return false},isReadOnly:function(){for(var a=this;a;){if(a.type==CKEDITOR.NODE_ELEMENT){if(a.is("body")||
a.data("cke-editable"))break;if(a.getAttribute("contentEditable")=="false")return a;else if(a.getAttribute("contentEditable")=="true")break}a=a.getParent()}return false}});CKEDITOR.dom.nodeList=function(a){this.$=a};CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(a){return(a=this.$[a])?new CKEDITOR.dom.node(a):null}};CKEDITOR.dom.element=function(a,b){if(typeof a=="string")a=(b?b.$:document).createElement(a);CKEDITOR.dom.domObject.call(this,a)};
CKEDITOR.dom.element.get=function(a){return a&&(a.$?a:new CKEDITOR.dom.element(a))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;CKEDITOR.dom.element.createFromHtml=function(a,b){var c=new CKEDITOR.dom.element("div",b);c.setHtml(a);return c.getFirst().remove()};
CKEDITOR.dom.element.setMarker=function(a,b,c,e){var g=b.getCustomData("list_marker_id")||b.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),h=b.getCustomData("list_marker_names")||b.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");a[g]=b;h[c]=1;return b.setCustomData(c,e)};CKEDITOR.dom.element.clearAllMarkers=function(a){for(var b in a)CKEDITOR.dom.element.clearMarkers(a,a[b],1)};
CKEDITOR.dom.element.clearMarkers=function(a,b,c){var e=b.getCustomData("list_marker_names"),g=b.getCustomData("list_marker_id"),h;for(h in e)b.removeCustomData(h);b.removeCustomData("list_marker_names");if(c){b.removeCustomData("list_marker_id");delete a[g]}};
CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(a){var b=this.$.className;if(b)RegExp("(?:^|\\s)"+a+"(?:\\s|$)","").test(b)||(b+=" "+a);this.$.className=b||a},removeClass:function(a){var b=this.getAttribute("class");if(b){a=RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i");if(a.test(b))(b=b.replace(a,"").replace(/^\s+/,""))?this.setAttribute("class",b):this.removeAttribute("class")}},hasClass:function(a){return RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","").test(this.getAttribute("class"))},
append:function(a,b){if(typeof a=="string")a=this.getDocument().createElement(a);b?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$);return a},appendHtml:function(a){if(this.$.childNodes.length){var b=new CKEDITOR.dom.element("div",this.getDocument());b.setHtml(a);b.moveChildren(this)}else this.setHtml(a)},appendText:function(a){if(this.$.text!=undefined)this.$.text+=a;else this.append(new CKEDITOR.dom.text(a))},appendBogus:function(){for(var a=this.getLast();a&&a.type==CKEDITOR.NODE_TEXT&&
!CKEDITOR.tools.rtrim(a.getText());)a=a.getPrevious();if(!a||!a.is||!a.is("br")){a=CKEDITOR.env.opera?this.getDocument().createText(""):this.getDocument().createElement("br");CKEDITOR.env.gecko&&a.setAttribute("type","_moz");this.append(a)}},breakParent:function(a){var b=new CKEDITOR.dom.range(this.getDocument());b.setStartAfter(this);b.setEndAfter(a);a=b.extractContents();b.insertNode(this.remove());a.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(a){var b=this.$;return a.type!=
CKEDITOR.NODE_ELEMENT?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)}:function(a){return!!(this.$.compareDocumentPosition(a.$)&16)},focus:function(){function a(){try{this.$.focus()}catch(b){}}return function(b){b?CKEDITOR.tools.setTimeout(a,100,this):a.call(this)}}(),getHtml:function(){var a=this.$.innerHTML;return CKEDITOR.env.ie?a.replace(/<\?[^>]*>/g,""):a},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var a=this.$.ownerDocument.createElement("div");
a.appendChild(this.$.cloneNode(true));return a.innerHTML},setHtml:function(a){return this.$.innerHTML=a},setText:function(a){CKEDITOR.dom.element.prototype.setText=this.$.innerText!=undefined?function(b){return this.$.innerText=b}:function(b){return this.$.textContent=b};return this.setText(a)},getAttribute:function(){var a;return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(b){switch(b){case "class":b="className";break;case "tabindex":b=this.$.getAttribute(b,2);if(b!==
0&&this.$.tabIndex===0)b=null;return b;case "checked":b=this.$.attributes.getNamedItem(b);return(b.specified?b.nodeValue:this.$.checked)?"checked":null;case "hspace":case "value":return this.$[b];case "style":return this.$.style.cssText}return this.$.getAttribute(b,2)}:function(b){return this.$.getAttribute(b,2)}}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(a){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(a)]}:
function(a){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(a)},getDtd:function(){var a=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return a};return a},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var a=this.$.tabIndex;if(a===0&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&parseInt(this.getAttribute("tabindex"),10)!==0)a=-1;return a}:CKEDITOR.env.webkit?function(){var a=this.$.tabIndex;if(a==undefined){a=parseInt(this.getAttribute("tabindex"),
10);if(isNaN(a))a=-1}return a}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&!(document.documentMode>8)){var b=this.$.scopeName;if(typeof b!="undefined"&&b!="HTML")a=b.toLowerCase()+":"+a}return(this.getName=function(){return a})()},
getValue:function(){return this.$.value},getFirst:function(a){var b=this.$.firstChild;if((b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b))b=b.getNext(a);return b},getLast:function(a){var b=this.$.lastChild;if((b=b&&new CKEDITOR.dom.node(b))&&a&&!a(b))b=b.getPrevious(a);return b},getStyle:function(a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]},is:function(){for(var a=this.getName(),b=0;b<arguments.length;b++)if(arguments[b]==a)return true;return false},isEditable:function(){var a=this.getName();
return(a=!CKEDITOR.dtd.$nonEditable[a]&&(CKEDITOR.dtd[a]||CKEDITOR.dtd.span))&&a["#"]},isIdentical:function(a){if(this.getName()!=a.getName())return false;for(var b=this.$.attributes,c=a.$.attributes,e=b.length,g=c.length,h=0;h<e;h++){var j=b[h];if(j.nodeName!="_moz_dirty")if((!CKEDITOR.env.ie||j.specified&&j.nodeName!="data-cke-expando")&&j.nodeValue!=a.getAttribute(j.nodeName))return false}if(CKEDITOR.env.ie)for(h=0;h<g;h++){j=c[h];if(j.specified&&j.nodeName!="data-cke-expando"&&j.nodeValue!=this.getAttribute(j.nodeName))return false}return true},
isVisible:function(){var a=!!this.$.offsetHeight&&this.getComputedStyle("visibility")!="hidden",b,c;if(a&&(CKEDITOR.env.webkit||CKEDITOR.env.opera)){b=this.getWindow();if(!b.equals(CKEDITOR.document.getWindow())&&(c=b.$.frameElement))a=(new CKEDITOR.dom.element(c)).isVisible()}return a},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return false;for(var a=this.getChildren(),b=0,c=a.count();b<c;b++){var e=a.getItem(b);if(!(e.type==CKEDITOR.NODE_ELEMENT&&e.data("cke-bookmark")))if(e.type==
CKEDITOR.NODE_ELEMENT&&!e.isEmptyInlineRemoveable()||e.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(e.getText()))return false}return true},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=a[b];switch(c.nodeName){case "class":if(this.getAttribute("class"))return true;case "data-cke-expando":continue;default:if(c.specified)return true}}return false}:function(){var a=this.$.attributes,b=a.length,c={"data-cke-expando":1,
_moz_dirty:1};return b>0&&(b>2||!c[a[0].nodeName]||b==2&&!c[a[1].nodeName])},hasAttribute:function(a){a=this.$.attributes.getNamedItem(a);return!!(a&&a.specified)},hide:function(){this.setStyle("display","none")},moveChildren:function(a,b){var c=this.$;a=a.$;if(c!=a){var e;if(b)for(;e=c.lastChild;)a.insertBefore(c.removeChild(e),a.firstChild);else for(;e=c.firstChild;)a.appendChild(c.removeChild(e))}},mergeSiblings:function(){function a(b,c,e){if(c&&c.type==CKEDITOR.NODE_ELEMENT){for(var g=[];c.data("cke-bookmark")||
c.isEmptyInlineRemoveable();){g.push(c);c=e?c.getNext():c.getPrevious();if(!c||c.type!=CKEDITOR.NODE_ELEMENT)return}if(b.isIdentical(c)){for(var h=e?b.getLast():b.getFirst();g.length;)g.shift().move(b,!e);c.moveChildren(b,!e);c.remove();h&&h.type==CKEDITOR.NODE_ELEMENT&&h.mergeSiblings()}}}return function(b){if(b===false||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a")){a(this,this.getNext(),true);a(this,this.getPrevious())}}}(),show:function(){this.setStyles({display:"",visibility:""})},
setAttribute:function(){var a=function(b,c){this.$.setAttribute(b,c);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(b,c){if(b=="class")this.$.className=c;else if(b=="style")this.$.style.cssText=c;else if(b=="tabindex")this.$.tabIndex=c;else if(b=="checked")this.$.checked=c;else a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},setValue:function(a){this.$.value=a;return this},removeAttribute:function(){var a;
return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(b){if(b=="class")b="className";else if(b=="tabindex")b="tabIndex";this.$.removeAttribute(b)}:function(b){this.$.removeAttribute(b)}}(),removeAttributes:function(a){if(CKEDITOR.tools.isArray(a))for(var b=0;b<a.length;b++)this.removeAttribute(a[b]);else for(b in a)a.hasOwnProperty(b)&&this.removeAttribute(b)},removeStyle:function(a){this.setStyle(a,"");this.$.style.removeAttribute&&this.$.style.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(a));
this.$.style.cssText||this.removeAttribute("style")},setStyle:function(a,b){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(a)]=b;return this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){if(CKEDITOR.env.ie){a=Math.round(a*100);this.setStyle("filter",a>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")}else this.setStyle("opacity",a)},unselectable:CKEDITOR.env.gecko?function(){this.$.style.MozUserSelect="none";this.on("dragstart",function(a){a.data.preventDefault()})}:
CKEDITOR.env.webkit?function(){this.$.style.KhtmlUserSelect="none";this.on("dragstart",function(a){a.data.preventDefault()})}:function(){if(CKEDITOR.env.ie||CKEDITOR.env.opera){var a=this.$,b,c=0;for(a.unselectable="on";b=a.all[c++];)switch(b.tagName.toLowerCase()){case "iframe":case "textarea":case "input":case "select":break;default:b.unselectable="on"}}},getPositionedAncestor:function(){for(var a=this;a.getName()!="html";){if(a.getComputedStyle("position")!="static")return a;a=a.getParent()}return null},
getDocumentPosition:function(a){var b=0,c=0,e=this.getDocument().getBody(),g=this.getDocument().$.compatMode=="BackCompat",h=this.getDocument();if(document.documentElement.getBoundingClientRect){var j=this.$.getBoundingClientRect(),f=h.$.documentElement,d=f.clientTop||e.$.clientTop||0,k=f.clientLeft||e.$.clientLeft||0,l=true;if(CKEDITOR.env.ie){l=h.getDocumentElement().contains(this);h=h.getBody().contains(this);l=g&&h||!g&&l}if(l){b=j.left+(!g&&f.scrollLeft||e.$.scrollLeft);b-=k;c=j.top+(!g&&f.scrollTop||
e.$.scrollTop);c-=d}}else{e=this;for(h=null;e&&!(e.getName()=="body"||e.getName()=="html");){b+=e.$.offsetLeft-e.$.scrollLeft;c+=e.$.offsetTop-e.$.scrollTop;if(!e.equals(this)){b+=e.$.clientLeft||0;c+=e.$.clientTop||0}for(;h&&!h.equals(e);){b-=h.$.scrollLeft;c-=h.$.scrollTop;h=h.getParent()}h=e;e=(j=e.$.offsetParent)?new CKEDITOR.dom.element(j):null}}if(a){e=this.getWindow();h=a.getWindow();if(!e.equals(h)&&e.$.frameElement){a=(new CKEDITOR.dom.element(e.$.frameElement)).getDocumentPosition(a);b+=
a.x;c+=a.y}}if(!document.documentElement.getBoundingClientRect)if(CKEDITOR.env.gecko&&!g){b+=this.$.clientLeft?1:0;c+=this.$.clientTop?1:0}return{x:b,y:c}},scrollIntoView:function(a){var b=this.getWindow(),c=b.getViewPaneSize().height,e=c*-1;if(a)e+=c;else{e+=this.$.offsetHeight||0;e+=parseInt(this.getComputedStyle("marginBottom")||0,10)||0}a=this.getDocumentPosition();e+=a.y;e=e<0?0:e;a=b.getScrollPosition().y;if(e>a||e<a-c)b.$.scrollTo(0,e)},setState:function(a){switch(a){case CKEDITOR.TRISTATE_ON:this.addClass("cke_on");
this.removeClass("cke_off");this.removeClass("cke_disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass("cke_disabled");this.removeClass("cke_off");this.removeClass("cke_on");break;default:this.addClass("cke_off");this.removeClass("cke_on");this.removeClass("cke_disabled")}},getFrameDocument:function(){var a=this.$;return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,b){var c=this.$.attributes;b=b||{};for(var e=0;e<c.length;e++){var g=c[e],h=g.nodeName.toLowerCase(),
j;if(!(h in b))if(h=="checked"&&(j=this.getAttribute(h)))a.setAttribute(h,j);else if(g.specified||CKEDITOR.env.ie&&g.nodeValue&&h=="value"){j=this.getAttribute(h);if(j===null)j=g.nodeValue;a.setAttribute(h,j)}}if(this.$.style.cssText!=="")a.$.style.cssText=this.$.style.cssText},renameNode:function(a){if(this.getName()!=a){var b=this.getDocument();a=new CKEDITOR.dom.element(a,b);this.copyAttributes(a);this.moveChildren(a);this.getParent()&&this.$.parentNode.replaceChild(a.$,this.$);a.$["data-cke-expando"]=
this.$["data-cke-expando"];this.$=a.$}},getChild:function(a){var b=this.$;if(a.slice)for(;a.length>0&&b;)b=b.childNodes[a.shift()];else b=b.childNodes[a];return b?new CKEDITOR.dom.node(b):null},getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(a){a.data.getTarget().hasClass("cke_enable_context_menu")||a.data.preventDefault()})},getDirection:function(a){return a?this.getComputedStyle("direction"):this.getStyle("direction")||this.getAttribute("dir")},
data:function(a,b){a="data-"+a;if(b===undefined)return this.getAttribute(a);else b===false?this.removeAttribute(a):this.setAttribute(a,b);return null}});
(function(){function a(c){for(var e=0,g=0,h=b[c].length;g<h;g++)e+=parseInt(this.getComputedStyle(b[c][g])||0,10)||0;return e}var b={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(c,e,g){if(typeof e=="number"){if(g&&!(CKEDITOR.env.ie&&CKEDITOR.env.quirks))e-=a.call(this,c);this.setStyle(c,e+"px")}};CKEDITOR.dom.element.prototype.getSize=
function(c,e){var g=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(c)],this.$["client"+CKEDITOR.tools.capitalize(c)])||0;if(e)g-=a.call(this,c);return g}})();CKEDITOR.command=function(a,b){this.uiItems=[];this.exec=function(c){if(this.state==CKEDITOR.TRISTATE_DISABLED)return false;if(!RTE.loaded)return false;this.editorFocus&&a.focus();return b.exec.call(this,a,c)!==false};CKEDITOR.tools.extend(this,b,{modes:{wysiwyg:1},editorFocus:1,state:CKEDITOR.TRISTATE_OFF});CKEDITOR.event.call(this)};
CKEDITOR.command.prototype={enable:function(){if(this.state==CKEDITOR.TRISTATE_DISABLED)this.setState(!this.preserveState||typeof this.previousState=="undefined"?CKEDITOR.TRISTATE_OFF:this.previousState)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(a){if(this.state==a)return false;this.previousState=this.state;this.state=a;this.fire("state");return true},toggleState:function(){if(this.state==CKEDITOR.TRISTATE_OFF)this.setState(CKEDITOR.TRISTATE_ON);else this.state==
CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype,true);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;
CKEDITOR.config={customConfig:"config.js",autoUpdateElement:true,baseHref:"",contentsCss:CKEDITOR.basePath+"contents.css",contentsLangDirection:"ui",contentsLanguage:"",language:"",defaultLanguage:"en",enterMode:CKEDITOR.ENTER_P,forceEnterMode:false,shiftEnterMode:CKEDITOR.ENTER_BR,corePlugins:"",docType:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',bodyId:"",bodyClass:"",fullPage:false,height:200,plugins:"about,a11yhelp,basicstyles,bidi,blockquote,button,clipboard,colorbutton,colordialog,contextmenu,dialogadvtab,div,elementspath,enterkey,entities,filebrowser,find,flash,font,format,forms,horizontalrule,htmldataprocessor,iframe,image,indent,justify,keystrokes,link,list,liststyle,maximize,newpage,pagebreak,pastefromword,pastetext,popup,preview,print,removeformat,resize,save,scayt,smiley,showblocks,showborders,sourcearea,stylescombo,table,tabletools,specialchar,tab,templates,toolbar,undo,wysiwygarea,wsc",
extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,theme:"default",skin:"kama",width:"",baseFloatZIndex:1E4};CKEDITOR.focusManager=function(a){if(a.focusManager)return a.focusManager;this.hasFocus=false;this._={editor:a};return this};
CKEDITOR.focusManager.prototype={focus:function(){this._.timer&&clearTimeout(this._.timer);if(!this.hasFocus){CKEDITOR.currentInstance&&CKEDITOR.currentInstance.focusManager.forceBlur();var a=this._.editor,b=a.container.getChild(1);b&&b.addClass("cke_focus");this.hasFocus=true;a.fire("focus")}},blur:function(){var a=this;a._.timer&&clearTimeout(a._.timer);a._.timer=setTimeout(function(){delete a._.timer;a.forceBlur()},100)},forceBlur:function(){if(this.hasFocus){var a=this._.editor,b=a.container.getChild(1);
b&&b.removeClass("cke_focus");this.hasFocus=false;a.fire("blur")}}};
(function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,is:1,it:1,ja:1,km:1,ko:1,lt:1,lv:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sk:1,sl:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,zh:1},load:function(a,b,c){if(!a||!CKEDITOR.lang.languages[a])a=this.detect(b,a);this[a]?c(a,this[a]):CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+
a+".js"),function(){c(a,this[a])},this)},detect:function(a,b){var c=this.languages;b=b||navigator.userLanguage||navigator.language;var e=b.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),g=e[1];e=e[2];if(c[g+"-"+e])g=g+"-"+e;else c[g]||(g=null);CKEDITOR.lang.detect=g?function(){return g}:function(h){return h};return g||a}}})();
CKEDITOR.scriptLoader=function(){var a={},b={};return{load:function(c,e,g,h){var j=typeof c=="string";if(j)c=[c];g||(g=CKEDITOR);var f=c.length,d=[],k=[],l=function(n){if(e)j?e.call(g,n):e.call(g,d,k)};if(f===0)l(true);else{var m=function(n,s){(s?d:k).push(n);if(--f<=0){h&&CKEDITOR.document.getDocumentElement().removeStyle("cursor");l(s)}},p=function(n,s){a[n]=1;var q=b[n];delete b[n];for(var v=0;v<q.length;v++)q[v](n,s)},r=function(n){if(a[n])m(n,true);else{var s=b[n]||(b[n]=[]);s.push(m);if(!(s.length>
1)){var q=new CKEDITOR.dom.element("script");q.setAttributes({type:"text/javascript",src:n});if(e)if(CKEDITOR.env.ie)q.$.onreadystatechange=function(){if(q.$.readyState=="loaded"||q.$.readyState=="complete"){q.$.onreadystatechange=null;p(n,true)}};else{q.$.onload=function(){setTimeout(function(){p(n,true)},0)};q.$.onerror=function(){p(n,false)}}q.appendTo(CKEDITOR.document.getHead())}}};h&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var t=0;t<f;t++)r(c[t])}}}}();
CKEDITOR.resourceManager=function(a,b){this.basePath=a;this.fileName=b;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}};
CKEDITOR.resourceManager.prototype={add:function(a,b){if(this.registered[a])throw'[CKEDITOR.resourceManager.add] The resource name "'+a+'" is already registered.';CKEDITOR.fire(a+CKEDITOR.tools.capitalize(this.fileName)+"Ready",this.registered[a]=b||{})},get:function(a){return this.registered[a]||null},getPath:function(a){var b=this.externals[a];return CKEDITOR.getUrl(b&&b.dir||this.basePath+a+"/")},getFilePath:function(a){var b=this.externals[a];return CKEDITOR.getUrl(this.getPath(a)+(b&&typeof b.file==
"string"?b.file:this.fileName+".js"))},addExternal:function(a,b,c){a=a.split(",");for(var e=0;e<a.length;e++)this.externals[a[e]]={dir:b,file:c}},load:function(a,b,c){CKEDITOR.tools.isArray(a)||(a=a?[a]:[]);for(var e=this.loaded,g=this.registered,h=[],j={},f={},d=0;d<a.length;d++){var k=a[d];if(k)if(!e[k]&&!g[k]){var l=this.getFilePath(k);h.push(l);l in j||(j[l]=[]);j[l].push(k)}else f[k]=this.get(k)}CKEDITOR.scriptLoader.load(h,function(m,p){if(p.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+
j[p[0]].join(",")+'" was not found at "'+p[0]+'".';for(var r=0;r<m.length;r++)for(var t=j[m[r]],n=0;n<t.length;n++){var s=t[n];f[s]=this.get(s);e[s]=1}b.call(c,f)},this)}};CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin");
CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(a){return function(b,c,e){var g={},h=function(j){a.call(this,j,function(f){CKEDITOR.tools.extend(g,f);var d=[],k;for(k in f){var l=f[k];if(l=l&&l.requires)for(var m=0;m<l.length;m++)g[l[m]]||d.push(l[m])}if(d.length)h.call(this,d);else{for(k in g){l=g[k];if(l.onLoad&&!l.onLoad._called){l.onLoad();l.onLoad._called=1}}if(c)c.call(e||window,g)}},this)};h.call(this,b)}});
CKEDITOR.plugins.setLang=function(a,b,c){a=this.get(a);(a.langEntries||(a.langEntries={}))[b]=c};
CKEDITOR.skins=function(){var a={},b={},c=function(e,g,h,j){function f(r,t){return r.replace(/url\s*\(([\s'"]*)(.*?)([\s"']*)\)/g,function(n,s,q,v){return/^\/|^\w?:/.test(q)?n:"url("+t+s+q+v+")"})}var d=a[g];if(!e.skin){e.skin=d;d.init&&d.init(e)}e=function(r){for(var t=0;t<r.length;t++)r[t]=CKEDITOR.getUrl(b[g]+r[t])};h=d[h];if(!h||h._isLoaded)j&&j();else{var k=h._pending||(h._pending=[]);k.push(j);if(!(k.length>1)){var l=!h.css||!h.css.length,m=!h.js||!h.js.length,p=function(){if(l&&m){h._isLoaded=
1;for(var r=0;r<k.length;r++)if(k[r])k[r]()}};if(!l){j=h.css;if(CKEDITOR.tools.isArray(j)){e(j);for(d=0;d<j.length;d++)CKEDITOR.document.appendStyleSheet(j[d])}else{j=f(j,CKEDITOR.getUrl(b[g]));CKEDITOR.document.appendStyleText(j)}h.css=j;l=1}if(!m){e(h.js);CKEDITOR.scriptLoader.load(h.js,function(){m=1;p()})}p()}}};return{add:function(e,g){a[e]=g;g.skinPath=b[e]||(b[e]=CKEDITOR.getUrl("_source/skins/"+e+"/"))},load:function(e,g,h){var j=e.skinName,f=e.skinPath;if(a[j])c(e,j,g,h);else{b[j]=f;CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(f+
"skin.js"),function(){c(e,j,g,h)})}}}}();CKEDITOR.themes=new CKEDITOR.resourceManager("themes/","theme");CKEDITOR.ui=function(a){if(a.ui)return a.ui;this._={handlers:{},items:{},editor:a};return this};
CKEDITOR.ui.prototype={add:function(a,b,c){this._.items[a]={type:b,command:c.command||null,args:Array.prototype.slice.call(arguments,2)}},create:function(a){var b=this._.items[a],c=b&&this._.handlers[b.type];a=b&&b.command&&this._.editor.getCommand(b.command);b=c&&c.create.apply(this,b.args);a&&a.uiItems.push(b);return b},addHandler:function(a,b){this._.handlers[a]=b}};CKEDITOR.event.implementOn(CKEDITOR.ui);
(function(){function a(){var m,p=this._.commands,r=this.mode,t;for(t in p){m=p[t];m[m.startDisabled?"disable":m.modes[r]?"enable":"disable"]()}}var b=0,c=function(){var m="editor"+ ++b;return CKEDITOR.instances&&CKEDITOR.instances[m]?c():m},e={},g=function(m){var p=m.config.customConfig;if(!p)return false;p=CKEDITOR.getUrl(p);var r=e[p]||(e[p]={});if(r.fn){r.fn.call(m,m.config);if(CKEDITOR.getUrl(m.config.customConfig)==p||!g(m))m.fireOnce("customConfigLoaded")}else CKEDITOR.scriptLoader.load(p,function(){r.fn=
CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};g(m)});return true},h=function(m,p){m.on("customConfigLoaded",function(){if(p){if(p.on)for(var r in p.on)m.on(r,p.on[r]);CKEDITOR.tools.extend(m.config,p,true);delete m.config.on}var t=m.config.skin.split(",");r=t[0];t=CKEDITOR.getUrl(t[1]||"skins/"+r+"/");m.skinName=r;m.skinPath=t;m.skinClass="cke_skin_"+r;m.tabIndex=m.config.tabIndex||m.element.getAttribute("tabindex")||0;m.fireOnce("configLoaded");d(m)});if(p&&p.customConfig!=undefined)m.config.customConfig=
p.customConfig;g(m)||m.fireOnce("customConfigLoaded")},j=function(m){CKEDITOR.lang.load(m.config.language,m.config.defaultLanguage,function(p,r){m.langCode=p;m.lang=CKEDITOR.tools.prototypedCopy(r);if(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&m.lang.dir=="rtl")m.lang.dir="ltr";var t=m.config;t.contentsLangDirection=="ui"&&(t.contentsLangDirection=m.lang.dir);f(m)})},f=function(m){var p=m.config,r=p.plugins,t=p.extraPlugins;p=p.removePlugins;if(t){var n=RegExp("(?:^|,)(?:"+t.replace(/\s*,\s*/g,
"|")+")(?=,|$)","g");r=r.replace(n,"");r+=","+t}if(p){n=RegExp("(?:^|,)(?:"+p.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");r=r.replace(n,"")}CKEDITOR.env.air&&(r+=",adobeair");CKEDITOR.plugins.load(r.split(","),function(s){var q=[],v=[],x=[];m.plugins=s;for(var G in s){var C=s[G],A=C.lang,F=CKEDITOR.plugins.getPath(G),H=null;C.path=F;if(A){H=CKEDITOR.tools.indexOf(A,m.langCode)>=0?m.langCode:A[0];if(!C.langEntries||!C.langEntries[H])x.push(CKEDITOR.getUrl(F+"lang/"+H+".js"));else{CKEDITOR.tools.extend(m.lang,
C.langEntries[H]);H=null}}v.push(H);q.push(C)}CKEDITOR.scriptLoader.load(x,function(){for(var J=["beforeInit","init","afterInit"],K=0;K<J.length;K++)for(var o=0;o<q.length;o++){var y=q[o];K===0&&v[o]&&y.lang&&CKEDITOR.tools.extend(m.lang,y.langEntries[v[o]]);if(y[J[K]])y[J[K]](m)}m.fire("pluginsLoaded");k(m)})})},d=function(m){CKEDITOR.skins.load(m,"editor",function(){j(m)})},k=function(m){var p=m.config.theme;CKEDITOR.themes.load(p,function(){var r=m.theme=CKEDITOR.themes.get(p);r.path=CKEDITOR.themes.getPath(p);
r.build(m);m.config.autoUpdateElement&&l(m)})},l=function(m){var p=m.element;if(m.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&p.is("textarea")){var r=p.$.form&&new CKEDITOR.dom.element(p.$.form);if(r){var t=function(){m.updateElement()};r.on("submit",t);if(!r.$.submit.nodeName&&!r.$.submit.length)r.$.submit=CKEDITOR.tools.override(r.$.submit,function(n){return function(){m.updateElement();n.apply?n.apply(this,arguments):n()}});m.on("destroy",function(){r.removeListener("submit",t)})}}};CKEDITOR.editor.prototype._init=
function(){var m=CKEDITOR.dom.element.get(this._.element),p=this._.instanceConfig;delete this._.element;delete this._.instanceConfig;this._.commands={};this._.styles=[];this.name=(this.element=m)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(m.getId()||m.getNameAtt())||c();if(this.name in CKEDITOR.instances)throw'[CKEDITOR.editor] The instance "'+this.name+'" already exists.';this.id=CKEDITOR.tools.getNextId();this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);
this.focusManager=new CKEDITOR.focusManager(this);CKEDITOR.fire("instanceCreated",null,this);this.on("mode",a,null,null,1);h(this,p)}})();
CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(a,b){return this._.commands[a]=new CKEDITOR.command(this,b)},addCss:function(a){this._.styles.push(a)},destroy:function(a){a||this.updateElement();this.fire("destroy");this.theme&&this.theme.destroy(this);CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},execCommand:function(a,b){var c=this.getCommand(a),e={name:a,commandData:b,command:c};if(c&&c.state!=CKEDITOR.TRISTATE_DISABLED)if(this.fire("beforeCommandExec",
e)!==true){e.returnValue=c.exec(e.commandData);if(!c.async&&this.fire("afterCommandExec",e)!==true)return e.returnValue}return false},getCommand:function(a){return this._.commands[a]},getData:function(){this.fire("beforeGetData");var a=this._.data;if(typeof a!="string")a=(a=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?a.is("textarea")?a.getValue():a.getHtml():"";a={dataValue:a};this.fire("getData",a);return a.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");if(typeof a!=
"string"){var b=this.element;if(b&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE)a=b.is("textarea")?b.getValue():b.getHtml()}return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){if(b)this.on("dataReady",function(e){e.removeListener();b.call(e.editor)});a={dataValue:a};!c&&this.fire("setData",a);this._.data=a.dataValue;!c&&this.fire("afterSetData",a)},insertHtml:function(a){this.fire("insertHtml",a)},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",
a)},checkDirty:function(){return this.mayBeDirty&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){if(this.mayBeDirty)this._.previousValue=this.getSnapshot()},updateElement:function(){var a=this.element;if(a&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE){var b=this.getData();if(this.config.htmlEncodeOutput)b=CKEDITOR.tools.htmlEncode(b);a.is("textarea")?a.setValue(b):a.setHtml(b)}}});
CKEDITOR.on("loaded",function(){var a=CKEDITOR.editor._pending;if(a){delete CKEDITOR.editor._pending;for(var b=0;b<a.length;b++)a[b]._init()}});CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)--\>)|(?:([^\\s>]+)\\s*((?:(?:[^\"'>]+)|(?:\"[^\"]*\")|(?:'[^']*'))*)\\/?>))","g")}};
(function(){var a=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,b={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(c){for(var e,g,h=0,j;e=this._.htmlPartsRegex.exec(c);){g=e.index;if(g>h){h=c.substring(h,g);if(j)j.push(h);else this.onText(h)}h=
this._.htmlPartsRegex.lastIndex;if(g=e[1]){g=g.toLowerCase();if(j&&CKEDITOR.dtd.$cdata[g]){this.onCDATA(j.join(""));j=null}if(!j){this.onTagClose(g);continue}}if(j)j.push(e[0]);else if(g=e[3]){g=g.toLowerCase();if(!/="/.test(g)){var f={},d;e=e[4];var k=!!(e&&e.charAt(e.length-1)=="/");if(e)for(;d=a.exec(e);){var l=d[1].toLowerCase();d=d[2]||d[3]||d[4]||"";f[l]=!d&&b[l]?l:d}this.onTagOpen(g,f,k);if(!j&&CKEDITOR.dtd.$cdata[g])j=[]}}else if(g=e[2])this.onComment(g)}if(c.length>h)this.onText(c.substring(h,
c.length))}}})();CKEDITOR.htmlParser.comment=function(a){this.value=a;this._={isBlockLike:false}};CKEDITOR.htmlParser.comment.prototype={type:CKEDITOR.NODE_COMMENT,writeHtml:function(a,b){var c=this.value;if(b){if(!(c=b.onComment(c,this)))return;if(typeof c!="string"){c.parent=this.parent;c.writeHtml(a,b);return}}a.comment(c)}};
(function(){CKEDITOR.htmlParser.text=function(a){this.value=a;this._={isBlockLike:false}};CKEDITOR.htmlParser.text.prototype={type:CKEDITOR.NODE_TEXT,writeHtml:function(a,b){var c=this.value;b&&!(c=b.onText(c,this))||a.text(c)}}})();(function(){CKEDITOR.htmlParser.cdata=function(a){this.value=a};CKEDITOR.htmlParser.cdata.prototype={type:CKEDITOR.NODE_TEXT,writeHtml:function(a){a.write(this.value)}}})();
CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:true,hasInlineStarted:false}};
(function(){var a={colgroup:1,dd:1,dt:1,li:1,option:1,p:1,td:1,tfoot:1,th:1,thead:1,tr:1},b=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),c=CKEDITOR.dtd.$list,e=CKEDITOR.dtd.$listItem;CKEDITOR.htmlParser.fragment.fromHtml=function(g,h){function j(v){var x;if(m.length>0)for(var G=0;G<m.length;G++){var C=m[G],A=C.name,F=CKEDITOR.dtd[A],H=r.name&&CKEDITOR.dtd[r.name];if((!H||H[A])&&(!v||!F||F[v]||!CKEDITOR.dtd[v])){if(!x){f();x=1}C=
C.clone();C.parent=r;r=C;m.splice(G,1);G--}}}function f(v){for(;p.length-(v||0)>0;)r.add(p.shift())}function d(v,x,G){x=x||r||l;if(h&&!x.type){var C,A;if((C=v.attributes&&(A=v.attributes["data-cke-real-element-type"])?A:v.name)&&!(C in CKEDITOR.dtd.$body)&&!(C in CKEDITOR.dtd.$nonBodyContent)){C=r;r=x;k.onTagOpen(h,{});x=r;if(G)r=C}}if(v._.isBlockLike&&v.name!="pre"){G=v.children.length;if((C=v.children[G-1])&&C.type==CKEDITOR.NODE_TEXT)if(A=CKEDITOR.tools.rtrim(C.value))C.value=A;else v.children.length=
G-1}x.add(v);if(v.returnPoint){r=v.returnPoint;delete v.returnPoint}}var k=new CKEDITOR.htmlParser,l=new CKEDITOR.htmlParser.fragment,m=[],p=[],r=l,t=false,n;k.onTagOpen=function(v,x,G){var C=new CKEDITOR.htmlParser.element(v,x);if(C.isUnknown&&G)C.isEmpty=true;if(CKEDITOR.dtd.$removeEmpty[v])m.push(C);else{if(v=="pre")t=true;else if(v=="br"&&t){r.add(new CKEDITOR.htmlParser.text("\n"));return}var A=r.name,F=A&&(CKEDITOR.dtd[A]||(r._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span));if(F&&!C.isUnknown&&
!r.isUnknown&&!F[v]){F=false;var H;if(v in c&&A in c){A=r.children;(A=A[A.length-1])&&A.name in e||d(A=new CKEDITOR.htmlParser.element("li"),r);n=r;H=A}else if(v==A)d(r,r.parent);else{if(v in CKEDITOR.dtd.$listItem){k.onTagOpen("ul",{});H=r}else if(b[A])n||(n=r);else{d(r,r.parent,true);a[A]||m.unshift(r)}F=true}r=H?H:r.returnPoint||r.parent;if(F){k.onTagOpen.apply(this,arguments);return}}j(v);f();C.parent=r;C.returnPoint=n;n=0;if(C.isEmpty)d(C);else r=C}};k.onTagClose=function(v){for(var x=m.length-
1;x>=0;x--)if(v==m[x].name){m.splice(x,1);return}for(var G=[],C=[],A=r;A.type&&A.name!=v;){A._.isBlockLike||C.unshift(A);G.push(A);A=A.parent}if(A.type){for(x=0;x<G.length;x++){var F=G[x];d(F,F.parent)}r=A;if(r.name=="pre")t=false;A._.isBlockLike&&f();d(A,A.parent);if(A==r)r=r.parent;m=m.concat(C)}if(v=="body")h=false};k.onText=function(v){if(!r._.hasInlineStarted&&!t){v=CKEDITOR.tools.ltrim(v);if(v.length===0)return}f();j();if(h&&(!r.type||r.name=="body")&&CKEDITOR.tools.trim(v))this.onTagOpen(h,
{});t||(v=v.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));r.add(new CKEDITOR.htmlParser.text(v))};k.onCDATA=function(v){r.add(new CKEDITOR.htmlParser.cdata(v))};k.onComment=function(v){f();j();r.add(new CKEDITOR.htmlParser.comment(v))};k.parse(g);for(f(!CKEDITOR.env.ie&&1);r.type;){var s=r.parent,q=r;if(h&&(!s.type||s.name=="body")&&!CKEDITOR.dtd.$body[q.name]){r=s;k.onTagOpen(h,{});s=r}s.add(q);r=s}return l};CKEDITOR.htmlParser.fragment.prototype={add:function(g){var h=this.children.length;if(h=h>0&&this.children[h-
1]||null){if(g._.isBlockLike&&h.type==CKEDITOR.NODE_TEXT){h.value=CKEDITOR.tools.rtrim(h.value);if(h.value.length===0){this.children.pop();this.add(g);return}}h.next=g}g.previous=h;g.parent=this;this.children.push(g);this._.hasInlineStarted=g.type==CKEDITOR.NODE_TEXT||g.type==CKEDITOR.NODE_ELEMENT&&!g._.isBlockLike},writeHtml:function(g,h){var j;this.filterChildren=function(){var f=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml.call(this,f,h,true);f=f.getHtml();this.children=(new CKEDITOR.htmlParser.fragment.fromHtml(f)).children;
j=1};!this.name&&h&&h.onFragment(this);this.writeChildrenHtml(g,j?null:h)},writeChildrenHtml:function(g,h){for(var j=0;j<this.children.length;j++)this.children[j].writeHtml(g,h)}}})();
CKEDITOR.htmlParser.element=function(a,b){this.name=a;this.attributes=b||(b={});this.children=[];var c=b["data-cke-real-element-type"]||a||"",e=c.match(/^cke:(.*)/);e&&(c=e[1]);e=CKEDITOR.dtd;c=!!(e.$nonBodyContent[c]||e.$block[c]||e.$listItem[c]||e.$tableContent[c]||e.$nonEditable[c]||c=="br");var g=!!e.$empty[a];this.isEmpty=g;this.isUnknown=!e[a];this._={isBlockLike:c,hasInlineStarted:g||!c}};
(function(){var a=function(b,c){b=b[0];c=c[0];return b<c?-1:b>c?1:0};CKEDITOR.htmlParser.element.prototype={type:CKEDITOR.NODE_ELEMENT,add:CKEDITOR.htmlParser.fragment.prototype.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},writeHtml:function(b,c){var e=this.attributes,g=this,h=g.name,j,f,d,k;g.filterChildren=function(){if(!k){var p=new CKEDITOR.htmlParser.basicWriter;CKEDITOR.htmlParser.fragment.prototype.writeChildrenHtml.call(g,p,c);g.children=(new CKEDITOR.htmlParser.fragment.fromHtml(p.getHtml())).children;
k=1}};if(c){for(;;){if(!(h=c.onElementName(h)))return;g.name=h;if(!(g=c.onElement(g)))return;g.parent=this.parent;if(g.name==h)break;if(g.type!=CKEDITOR.NODE_ELEMENT){g.writeHtml(b,c);return}h=g.name;if(!h){this.writeChildrenHtml.call(g,b,k?null:c);return}}e=g.attributes}b.openTag(h,e);for(var l=[],m=0;m<2;m++)for(j in e){f=j;d=e[j];if(m==1)l.push([j,d]);else if(c){for(;;)if(f=c.onAttributeName(j))if(f!=j){delete e[j];j=f}else break;else{delete e[j];break}if(f)if((d=c.onAttribute(g,f,d))===false)delete e[f];
else e[f]=d}}b.sortAttributes&&l.sort(a);e=l.length;for(m=0;m<e;m++){j=l[m];b.attribute(j[0],j[1])}b.openTagClose(h,g.isEmpty);if(!g.isEmpty){this.writeChildrenHtml.call(g,b,k?null:c);b.closeTag(h)}},writeChildrenHtml:function(){CKEDITOR.htmlParser.fragment.prototype.writeChildrenHtml.apply(this,arguments)}}})();
(function(){function a(h,j){for(var f=0;h&&f<j.length;f++){var d=j[f];h=h.replace(d[0],d[1])}return h}function b(h,j,f){if(typeof j=="function")j=[j];var d,k;k=h.length;var l=j&&j.length;if(l){for(d=0;d<k&&h[d].pri<f;d++);for(k=l-1;k>=0;k--)if(l=j[k]){l.pri=f;h.splice(d,0,l)}}}function c(h,j,f){if(j)for(var d in j){var k=h[d];h[d]=e(k,j[d],f);k||h.$length++}}function e(h,j,f){if(j){j.pri=f;if(h){if(h.splice)b(h,j,f);else{h=h.pri>f?[j,h]:[h,j];h.filter=g}return h}else return j.filter=j}}function g(h){for(var j=
h.type||h instanceof CKEDITOR.htmlParser.fragment,f=0;f<this.length;f++){if(j)var d=h.type,k=h.name;var l=this[f].apply(window,arguments);if(l===false)return l;if(j){if(l&&(l.name!=k||l.type!=d))return l}else if(typeof l!="string")return l;l!=undefined&&(h=l)}return h}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(h){this._={elementNames:[],attributeNames:[],elements:{$length:0},attributes:{$length:0}};h&&this.addRules(h,10)},proto:{addRules:function(h,j){if(typeof j!="number")j=
10;b(this._.elementNames,h.elementNames,j);b(this._.attributeNames,h.attributeNames,j);c(this._.elements,h.elements,j);c(this._.attributes,h.attributes,j);this._.text=e(this._.text,h.text,j)||this._.text;this._.comment=e(this._.comment,h.comment,j)||this._.comment;this._.root=e(this._.root,h.root,j)||this._.root},onElementName:function(h){return a(h,this._.elementNames)},onAttributeName:function(h){return a(h,this._.attributeNames)},onText:function(h){var j=this._.text;return j?j.filter(h):h},onComment:function(h,
j){var f=this._.comment;return f?f.filter(h,j):h},onFragment:function(h){var j=this._.root;return j?j.filter(h):h},onElement:function(h){for(var j=[this._.elements["^"],this._.elements[h.name],this._.elements.$],f,d=0;d<3;d++)if(f=j[d]){f=f.filter(h,this);if(f===false)return null;if(f&&f!=h)return this.onNode(f);if(h.parent&&!h.name)break}return h},onNode:function(h){var j=h.type;return j==CKEDITOR.NODE_ELEMENT?this.onElement(h):j==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(h.value)):
j==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(h.value)):null},onAttribute:function(h,j,f){if(j=this._.attributes[j]){h=j.filter(f,h,this);if(h===false)return false;if(typeof h!="undefined")return h}return f}}})})();
CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(a){this._.output.push("<",a)},openTagClose:function(a,b){b?this._.output.push(" />"):this._.output.push(">")},attribute:function(a,b){if(typeof b=="string")b=CKEDITOR.tools.htmlEncodeAttr(b);this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){this._.output.push("</",a,">")},text:function(a){this._.output.push(a)},comment:function(a){this._.output.push("<\!--",a,"--\>")},write:function(a){this._.output.push(a)},
reset:function(){this._.output=[];this._.indent=false},getHtml:function(a){var b=this._.output.join("");a&&this.reset();return b}}});delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);CKEDITOR.add=function(a){CKEDITOR.instances[a.name]=a;a.on("focus",function(){if(CKEDITOR.currentInstance!=a){CKEDITOR.currentInstance=a;CKEDITOR.fire("currentInstance")}});a.on("blur",function(){if(CKEDITOR.currentInstance==a){CKEDITOR.currentInstance=null;CKEDITOR.fire("currentInstance")}})};
CKEDITOR.remove=function(a){delete CKEDITOR.instances[a.name]};CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;CKEDITOR.TRISTATE_DISABLED=0;CKEDITOR.dom.comment=CKEDITOR.tools.createClass({base:CKEDITOR.dom.node,$:function(a,b){if(typeof a=="string")a=(b?b.$:document).createComment(a);this.base(a)},proto:{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<\!--"+this.$.nodeValue+"--\>"}}});
(function(){var a={address:1,blockquote:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,dd:1,legend:1},b={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1,fieldset:1};CKEDITOR.dom.elementPath=function(c){for(var e=null,g=null,h=[];c;){if(c.type==CKEDITOR.NODE_ELEMENT){if(!this.lastElement)this.lastElement=c;var j=c.getName();if(CKEDITOR.env.ie&&c.$.scopeName!="HTML")j=c.$.scopeName.toLowerCase()+":"+j;if(!g){if(!e&&a[j])e=c;if(b[j]){var f;if(f=!e)if(f=j=="div"){a:{f=c.getChildren();
for(var d=0,k=f.count();d<k;d++){var l=f.getItem(d);if(l.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[l.getName()]){f=true;break a}}f=false}f=!f}if(f)e=c;else g=c}}h.push(c);if(j=="body")break}c=c.getParent()}this.block=e;this.blockLimit=g;this.elements=h}})();
CKEDITOR.dom.elementPath.prototype={compare:function(a){var b=this.elements;a=a&&a.elements;if(!a||b.length!=a.length)return false;for(var c=0;c<b.length;c++)if(!b[c].equals(a[c]))return false;return true},contains:function(a){for(var b=this.elements,c=0;c<b.length;c++)if(b[c].getName()in a)return b[c];return null},isContentEditable:function(){for(var a=this.elements,b="true",c=a.length-1;c>=0;c--)if(a[c].$.contentEditable!="inherit")b=a[c].$.contentEditable;return b=="true"}};
CKEDITOR.dom.text=function(a,b){if(typeof a=="string")a=(b?b.$:document).createTextNode(a);this.$=a};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node;
CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},split:function(a){if(CKEDITOR.env.ie&&a==this.getLength()){var b=this.getDocument().createText("");b.insertAfter(this);return b}b=this.getDocument();a=new CKEDITOR.dom.text(this.$.splitText(a),b);if(CKEDITOR.env.ie8){b=new CKEDITOR.dom.text("",b);b.insertAfter(a);b.remove()}return a},substring:function(a,b){return typeof b!="number"?
this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,b)}});CKEDITOR.dom.documentFragment=function(a){a=a||CKEDITOR.document;this.$=a.$.createDocumentFragment()};
CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(a){a=a.$;a.parentNode.insertBefore(this.$,a.nextSibling)}},true,{append:1,appendBogus:1,getFirst:1,getLast:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});
(function(){function a(j,f){if(this._.end)return null;var d,k=this.range,l,m=this.guard,p=this.type,r=j?"getPreviousSourceNode":"getNextSourceNode";if(!this._.start){this._.start=1;k.trim();if(k.collapsed){this.end();return null}}if(!j&&!this._.guardLTR){var t=k.endContainer,n=t.getChild(k.endOffset);this._.guardLTR=function(x,G){return(!G||!t.equals(x))&&(!n||!x.equals(n))&&(x.type!=CKEDITOR.NODE_ELEMENT||!G||x.getName()!="body")}}if(j&&!this._.guardRTL){var s=k.startContainer,q=k.startOffset>0&&
s.getChild(k.startOffset-1);this._.guardRTL=function(x,G){return(!G||!s.equals(x))&&(!q||!x.equals(q))&&(x.type!=CKEDITOR.NODE_ELEMENT||!G||x.getName()!="body")}}var v=j?this._.guardRTL:this._.guardLTR;l=m?function(x,G){if(v(x,G)===false)return false;return m(x,G)}:v;if(this.current)d=this.current[r](false,p,l);else if(j){d=k.endContainer;if(k.endOffset>0&&d.getChild){d=d.getChild(k.endOffset-1);if(l(d)===false)d=null}else d=l(d,true)===false?null:d.getPreviousSourceNode(true,p,l)}else{d=k.startContainer;
if(d.getChild)d=d.getChild(k.startOffset);if(d){if(l(d)===false)d=null}else d=l(k.startContainer,true)===false?null:k.startContainer.getNextSourceNode(true,p,l)}for(;d&&!this._.end;){this.current=d;if(!this.evaluator||this.evaluator(d)!==false){if(!f)return d}else if(f&&this.evaluator)return false;d=d[r](false,p,l)}this.end();return this.current=null}function b(j){for(var f,d=null;f=a.call(this,j);)d=f;return d}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(j){this.range=j;this._={}},
proto:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,1)},checkForward:function(){return a.call(this,0,1)!==false},checkBackward:function(){return a.call(this,1,1)!==false},lastForward:function(){return b.call(this)},lastBackward:function(){return b.call(this,1)},reset:function(){delete this.current;this._={}}}});var c={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,
"table-column":1,"table-cell":1,"table-caption":1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(j){j=CKEDITOR.tools.extend({},CKEDITOR.dtd.$block,j||{});return this.getComputedStyle("float")=="none"&&c[this.getComputedStyle("display")]||j[this.getName()]};CKEDITOR.dom.walker.blockBoundary=function(j){return function(f){return!(f.type==CKEDITOR.NODE_ELEMENT&&f.isBlockBoundary(j))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};CKEDITOR.dom.walker.bookmark=
function(j,f){function d(k){return k&&k.getName&&k.getName()=="span"&&k.data("cke-bookmark")}return function(k){var l,m;l=k&&!k.getName&&(m=k.getParent())&&d(m);l=j?l:l||d(k);return!!(f^l)}};CKEDITOR.dom.walker.whitespaces=function(j){return function(f){f=f&&f.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(f.getText());return!!(j^f)}};CKEDITOR.dom.walker.invisible=function(j){var f=CKEDITOR.dom.walker.whitespaces();return function(d){d=f(d)||d.is&&!d.$.offsetHeight;return!!(j^d)}};CKEDITOR.dom.walker.nodeType=
function(j,f){return function(d){return!!(f^d.type==j)}};var e=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,g=CKEDITOR.dom.walker.whitespaces(),h=CKEDITOR.dom.walker.bookmark();CKEDITOR.dom.element.prototype.getBogus=function(){var j=this;do j=j.getPreviousSourceNode();while(h(j)||g(j)||j.type==CKEDITOR.NODE_ELEMENT&&j.getName()in CKEDITOR.dtd.$inline&&!(j.getName()in CKEDITOR.dtd.$empty));if(j&&(!CKEDITOR.env.ie?j.is&&j.is("br"):j.getText&&e.test(j.getText())))return j;return false}})();
CKEDITOR.dom.range=function(a){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=true;this.document=a};
(function(){function a(d){var k=false,l=CKEDITOR.dom.walker.bookmark(true);return function(m){if(l(m))return true;if(m.type==CKEDITOR.NODE_TEXT){if(CKEDITOR.tools.trim(m.getText()).length)return false}else if(m.type==CKEDITOR.NODE_ELEMENT){if(m.$.nodeType==CKEDITOR.NODE_COMMENT)return false;if(!h[m.getName()])if(!d&&!CKEDITOR.env.ie&&m.getName()=="br"&&!k)k=true;else return false}return true}}function b(d){return d.type!=CKEDITOR.NODE_TEXT&&d.getName()in CKEDITOR.dtd.$removeEmpty||!CKEDITOR.tools.trim(d.getText())||
!!d.getParent().data("cke-bookmark")}function c(d){return!j(d)&&!f(d)}var e=function(d){d.collapsed=d.startContainer&&d.endContainer&&d.startContainer.equals(d.endContainer)&&d.startOffset==d.endOffset},g=function(d,k,l,m){d.optimizeBookmark();var p=d.startContainer,r=d.endContainer,t=d.startOffset,n=d.endOffset,s,q;if(r.type==CKEDITOR.NODE_TEXT)r=r.split(n);else if(r.getChildCount()>0)if(n>=r.getChildCount()){r=r.append(d.document.createText(""));q=true}else r=r.getChild(n);if(p.type==CKEDITOR.NODE_TEXT){p.split(t);
if(p.equals(r))r=p.getNext()}else if(t)if(t>=p.getChildCount()){p=p.append(d.document.createText(""));s=true}else p=p.getChild(t).getPrevious();else{p=p.getFirst().insertBeforeMe(d.document.createText(""));s=true}t=p.getParents();n=r.getParents();var v,x,G;for(v=0;v<t.length;v++){x=t[v];G=n[v];if(!x.equals(G))break}for(var C=l,A,F,H,J=v;J<t.length;J++){A=t[J];if(C&&!A.equals(p))F=C.append(A.clone());for(A=A.getNext();A;){if(A.equals(n[J])||A.equals(r))break;H=A.getNext();if(k==2)C.append(A.clone(true));
else{A.remove();k==1&&C.append(A)}A=H}if(C)C=F}C=l;for(l=v;l<n.length;l++){A=n[l];if(k>0&&!A.equals(r))F=C.append(A.clone());if(!t[l]||A.$.parentNode!=t[l].$.parentNode)for(A=A.getPrevious();A;){if(A.equals(t[l])||A.equals(p))break;H=A.getPrevious();if(k==2)C.$.insertBefore(A.$.cloneNode(true),C.$.firstChild);else{A.remove();k==1&&C.$.insertBefore(A.$,C.$.firstChild)}A=H}if(C)C=F}if(k==2){x=d.startContainer;if(x.type==CKEDITOR.NODE_TEXT){x.$.data+=x.$.nextSibling.data;x.$.parentNode.removeChild(x.$.nextSibling)}d=
d.endContainer;if(d.type==CKEDITOR.NODE_TEXT&&d.$.nextSibling){d.$.data+=d.$.nextSibling.data;d.$.parentNode.removeChild(d.$.nextSibling)}}else{if(x&&G&&(p.$.parentNode!=x.$.parentNode||r.$.parentNode!=G.$.parentNode)){k=G.getIndex();s&&G.$.parentNode==p.$.parentNode&&k--;if(m&&x.type==CKEDITOR.NODE_ELEMENT){m=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',d.document);m.insertAfter(x);x.mergeSiblings(false);d.moveToBookmark({startNode:m})}else d.setStart(G.getParent(),
k)}d.collapse(true)}s&&p.remove();q&&r.$.parentNode&&r.remove()},h={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},j=new CKEDITOR.dom.walker.whitespaces,f=new CKEDITOR.dom.walker.bookmark;CKEDITOR.dom.range.prototype={clone:function(){var d=new CKEDITOR.dom.range(this.document);d.startContainer=this.startContainer;d.startOffset=this.startOffset;d.endContainer=this.endContainer;
d.endOffset=this.endOffset;d.collapsed=this.collapsed;return d},collapse:function(d){if(d){this.endContainer=this.startContainer;this.endOffset=this.startOffset}else{this.startContainer=this.endContainer;this.startOffset=this.endOffset}this.collapsed=true},cloneContents:function(){var d=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||g(this,2,d);return d},deleteContents:function(d){this.collapsed||g(this,0,null,d)},extractContents:function(d){var k=new CKEDITOR.dom.documentFragment(this.document);
this.collapsed||g(this,1,k,d);return k},createBookmark:function(d){var k,l,m,p,r=this.collapsed;k=this.document.createElement("span");k.data("cke-bookmark",1);k.setStyle("display","none");k.setHtml("&nbsp;");if(d){m="cke_bm_"+CKEDITOR.tools.getNextNumber();k.setAttribute("id",m+"S")}if(!r){l=k.clone();l.setHtml("&nbsp;");d&&l.setAttribute("id",m+"E");p=this.clone();p.collapse();p.insertNode(l)}p=this.clone();p.collapse(true);p.insertNode(k);if(l){this.setStartAfter(k);this.setEndBefore(l)}else this.moveToPosition(k,
CKEDITOR.POSITION_AFTER_END);return{startNode:d?m+"S":k,endNode:d?m+"E":l,serializable:d,collapsed:r}},createBookmark2:function(d){var k=this.startContainer,l=this.endContainer,m=this.startOffset,p=this.endOffset,r=this.collapsed,t,n;if(!k||!l)return{start:0,end:0};if(d){if(k.type==CKEDITOR.NODE_ELEMENT)if((t=k.getChild(m))&&t.type==CKEDITOR.NODE_TEXT&&m>0&&t.getPrevious().type==CKEDITOR.NODE_TEXT){k=t;m=0}for(;k.type==CKEDITOR.NODE_TEXT&&(n=k.getPrevious())&&n.type==CKEDITOR.NODE_TEXT;){k=n;m+=n.getLength()}if(!r){if(l.type==
CKEDITOR.NODE_ELEMENT)if((t=l.getChild(p))&&t.type==CKEDITOR.NODE_TEXT&&p>0&&t.getPrevious().type==CKEDITOR.NODE_TEXT){l=t;p=0}for(;l.type==CKEDITOR.NODE_TEXT&&(n=l.getPrevious())&&n.type==CKEDITOR.NODE_TEXT;){l=n;p+=n.getLength()}}}return{start:k.getAddress(d),end:r?null:l.getAddress(d),startOffset:m,endOffset:p,normalized:d,collapsed:r,is2:true}},moveToBookmark:function(d){if(d.is2){var k=this.document.getByAddress(d.start,d.normalized),l=d.startOffset,m=d.end&&this.document.getByAddress(d.end,
d.normalized);d=d.endOffset;this.setStart(k,l);m?this.setEnd(m,d):this.collapse(true)}else{k=(l=d.serializable)?this.document.getById(d.startNode):d.startNode;d=l?this.document.getById(d.endNode):d.endNode;this.setStartBefore(k);k.remove();if(d){this.setEndBefore(d);d.remove()}else this.collapse(true)}},getBoundaryNodes:function(){var d=this.startContainer,k=this.endContainer,l=this.startOffset,m=this.endOffset,p;if(d.type==CKEDITOR.NODE_ELEMENT){p=d.getChildCount();if(p>l)d=d.getChild(l);else if(p<
1)d=d.getPreviousSourceNode();else{for(d=d.$;d.lastChild;)d=d.lastChild;d=new CKEDITOR.dom.node(d);d=d.getNextSourceNode()||d}}if(k.type==CKEDITOR.NODE_ELEMENT){p=k.getChildCount();if(p>m)k=k.getChild(m).getPreviousSourceNode(true);else if(p<1)k=k.getPreviousSourceNode();else{for(k=k.$;k.lastChild;)k=k.lastChild;k=new CKEDITOR.dom.node(k)}}if(d.getPosition(k)&CKEDITOR.POSITION_FOLLOWING)d=k;return{startNode:d,endNode:k}},getCommonAncestor:function(d,k){var l=this.startContainer,m=this.endContainer;
l=l.equals(m)?d&&l.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?l.getChild(this.startOffset):l:l.getCommonAncestor(m);return k&&!l.is?l.getParent():l},optimize:function(){var d=this.startContainer,k=this.startOffset;if(d.type!=CKEDITOR.NODE_ELEMENT&&d.type!=CKEDITOR.NODE_COMMENT)if(k)k>=d.getLength()&&this.setStartAfter(d);else this.setStartBefore(d);d=this.endContainer;k=this.endOffset;if(d.type!=CKEDITOR.NODE_ELEMENT&&d.type!=CKEDITOR.NODE_COMMENT)if(k)k>=d.getLength()&&this.setEndAfter(d);
else this.setEndBefore(d)},optimizeBookmark:function(){var d=this.startContainer,k=this.endContainer;d.is&&d.is("span")&&d.data("cke-bookmark")&&this.setStartAt(d,CKEDITOR.POSITION_BEFORE_START);k&&k.is&&k.is("span")&&k.data("cke-bookmark")&&this.setEndAt(k,CKEDITOR.POSITION_AFTER_END)},trim:function(d,k){var l=this.startContainer,m=this.startOffset,p=this.collapsed;if((!d||p)&&l&&l.type==CKEDITOR.NODE_TEXT){if(m)if(m>=l.getLength()){m=l.getIndex()+1;l=l.getParent()}else{var r=l.split(m);m=l.getIndex()+
1;l=l.getParent();if(this.startContainer.equals(this.endContainer))this.setEnd(r,this.endOffset-this.startOffset);else if(l.equals(this.endContainer))this.endOffset+=1}else{m=l.getIndex();l=l.getParent()}this.setStart(l,m);if(p){this.collapse(true);return}}l=this.endContainer;m=this.endOffset;if(!(k||p)&&l&&l.type==CKEDITOR.NODE_TEXT){if(m){m>=l.getLength()||l.split(m);m=l.getIndex()+1}else m=l.getIndex();l=l.getParent();this.setEnd(l,m)}},enlarge:function(d,k){switch(d){case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed)break;
var l=this.getCommonAncestor(),m=this.document.getBody(),p,r,t,n,s,q=false,v,x;v=this.startContainer;x=this.startOffset;if(v.type==CKEDITOR.NODE_TEXT){if(x){v=!CKEDITOR.tools.trim(v.substring(0,x)).length&&v;q=!!v}if(v)if(!(n=v.getPrevious()))t=v.getParent()}else{if(x)n=v.getChild(x-1)||v.getLast();n||(t=v)}for(;t||n;){if(t&&!n){if(!s&&t.equals(l))s=true;if(!m.contains(t))break;if(!q||t.getComputedStyle("display")!="inline"){q=false;if(s)p=t;else this.setStartBefore(t)}n=t.getPrevious()}for(;n;){v=
false;if(n.type==CKEDITOR.NODE_TEXT){x=n.getText();if(/[^\s\ufeff]/.test(x))n=null;v=/[\s\ufeff]$/.test(x)}else if(n.$.nodeType==CKEDITOR.NODE_ELEMENT&&(n.$.offsetWidth>0||k&&n.is("br"))&&!n.data("cke-bookmark"))if(q&&CKEDITOR.dtd.$removeEmpty[n.getName()]){x=n.getText();if(/[^\s\ufeff]/.test(x))n=null;else for(var G=n.$.all||n.$.getElementsByTagName("*"),C=0,A;A=G[C++];)if(!CKEDITOR.dtd.$removeEmpty[A.nodeName.toLowerCase()]){n=null;break}if(n)v=!!x.length}else n=null;if(v)if(q)if(s)p=t;else t&&
this.setStartBefore(t);else q=true;if(n){v=n.getPrevious();if(!t&&!v){t=n;n=null;break}n=v}else t=null}if(t)t=t.getParent()}v=this.endContainer;x=this.endOffset;t=n=null;s=q=false;if(v.type==CKEDITOR.NODE_TEXT){v=!CKEDITOR.tools.trim(v.substring(x)).length&&v;q=!(v&&v.getLength());if(v)if(!(n=v.getNext()))t=v.getParent()}else(n=v.getChild(x))||(t=v);for(;t||n;){if(t&&!n){if(!s&&t.equals(l))s=true;if(!m.contains(t))break;if(!q||t.getComputedStyle("display")!="inline"){q=false;if(s)r=t;else t&&this.setEndAfter(t)}n=
t.getNext()}for(;n;){v=false;if(n.type==CKEDITOR.NODE_TEXT){x=n.getText();if(/[^\s\ufeff]/.test(x))n=null;v=/^[\s\ufeff]/.test(x)}else if(n.$.nodeType==CKEDITOR.NODE_ELEMENT&&(n.$.offsetWidth>0||k&&n.is("br"))&&!n.data("cke-bookmark"))if(q&&CKEDITOR.dtd.$removeEmpty[n.getName()]){x=n.getText();if(/[^\s\ufeff]/.test(x))n=null;else{G=n.$.all||n.$.getElementsByTagName("*");for(C=0;A=G[C++];)if(!CKEDITOR.dtd.$removeEmpty[A.nodeName.toLowerCase()]){n=null;break}}if(n)v=!!x.length}else n=null;if(v)if(q)if(s)r=
t;else this.setEndAfter(t);if(n){v=n.getNext();if(!t&&!v){t=n;n=null;break}n=v}else t=null}if(t)t=t.getParent()}if(p&&r){l=p.contains(r)?r:p;this.setStartBefore(l);this.setEndAfter(l)}break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:t=new CKEDITOR.dom.range(this.document);m=this.document.getBody();t.setStartAt(m,CKEDITOR.POSITION_AFTER_START);t.setEnd(this.startContainer,this.startOffset);t=new CKEDITOR.dom.walker(t);var F,H,J=CKEDITOR.dom.walker.blockBoundary(d==
CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),K=function(o){var y=J(o);y||(F=o);return y};l=function(o){var y=K(o);if(!y&&o.is&&o.is("br"))H=o;return y};t.guard=K;t=t.lastBackward();F=F||m;this.setStartAt(F,!F.is("br")&&(!t&&this.checkStartOfBlock()||t&&F.contains(t))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);t=this.clone();t.collapse();t.setEndAt(m,CKEDITOR.POSITION_BEFORE_END);t=new CKEDITOR.dom.walker(t);t.guard=d==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?l:K;F=null;t=t.lastForward();
F=F||m;this.setEndAt(F,!t&&this.checkEndOfBlock()||t&&F.contains(t)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);H&&this.setEndAfter(H)}},shrink:function(d,k){if(!this.collapsed){d=d||CKEDITOR.SHRINK_TEXT;var l=this.clone(),m=this.startContainer,p=this.endContainer,r=this.startOffset,t=this.endOffset,n=1,s=1;if(m&&m.type==CKEDITOR.NODE_TEXT)if(r)if(r>=m.getLength())l.setStartAfter(m);else{l.setStartBefore(m);n=0}else l.setStartBefore(m);if(p&&p.type==CKEDITOR.NODE_TEXT)if(t)if(t>=
p.getLength())l.setEndAfter(p);else{l.setEndAfter(p);s=0}else l.setEndBefore(p);l=new CKEDITOR.dom.walker(l);var q=CKEDITOR.dom.walker.bookmark();l.evaluator=function(x){return x.type==(d==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var v;l.guard=function(x,G){if(q(x))return true;if(d==CKEDITOR.SHRINK_ELEMENT&&x.type==CKEDITOR.NODE_TEXT)return false;if(G&&x.equals(v))return false;if(!G&&x.type==CKEDITOR.NODE_ELEMENT)v=x;return true};if(n)(m=l[d==CKEDITOR.SHRINK_ELEMENT?"lastForward":
"next"]())&&this.setStartAt(m,k?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);if(s){l.reset();(l=l[d==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(l,k?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)}return!!(n||s)}},enlargeFormattables:function(){var d;if(this.startContainer.isReadOnly())if(d=this.startContainer.findFormattableAncestor())this.setStartBefore(d);if(this.endContainer.isReadOnly())if(d=this.endContainer.findFormattableAncestor())this.setEndAfter(d);
return this},insertNode:function(d){this.optimizeBookmark();this.trim(false,true);var k=this.startContainer,l=this.startOffset;(l=typeof k.getChild!="function"?new CKEDITOR.dom.element(k.$.previousSibling):k.getChild(l))?d.insertBefore(l):k.append(d);d.getParent().equals(this.endContainer)&&this.endOffset++;this.setStartBefore(d)},moveToPosition:function(d,k){this.setStartAt(d,k);this.collapse(true)},selectNodeContents:function(d){this.setStart(d,0);this.setEnd(d,d.type==CKEDITOR.NODE_TEXT?d.getLength():
d.getChildCount())},setStart:function(d,k){if(d.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[d.getName()]){k=d.getIndex();d=d.getParent()}this.startContainer=d;this.startOffset=k;if(!this.endContainer){this.endContainer=d;this.endOffset=k}e(this)},setEnd:function(d,k){if(d.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[d.getName()]){k=d.getIndex()+1;d=d.getParent()}this.endContainer=d;this.endOffset=k;if(!this.startContainer){this.startContainer=d;this.startOffset=k}e(this)},setStartAfter:function(d){this.setStart(d.getParent(),
d.getIndex()+1)},setStartBefore:function(d){this.setStart(d.getParent(),d.getIndex())},setEndAfter:function(d){this.setEnd(d.getParent(),d.getIndex()+1)},setEndBefore:function(d){this.setEnd(d.getParent(),d.getIndex())},setStartAt:function(d,k){switch(k){case CKEDITOR.POSITION_AFTER_START:this.setStart(d,0);break;case CKEDITOR.POSITION_BEFORE_END:d.type==CKEDITOR.NODE_TEXT?this.setStart(d,d.getLength()):this.setStart(d,d.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(d);
break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(d)}e(this)},setEndAt:function(d,k){switch(k){case CKEDITOR.POSITION_AFTER_START:this.setEnd(d,0);break;case CKEDITOR.POSITION_BEFORE_END:d.type==CKEDITOR.NODE_TEXT?this.setEnd(d,d.getLength()):this.setEnd(d,d.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(d);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(d)}e(this)},fixBlock:function(d,k){var l=this.createBookmark(),m=this.document.createElement(k);this.collapse(d);
this.enlargeFormattables();this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(m);m.trim();CKEDITOR.env.ie||m.appendBogus();this.insertNode(m);this.moveToBookmark(l);return m},splitBlock:function(d){var k=new CKEDITOR.dom.elementPath(this.startContainer),l=new CKEDITOR.dom.elementPath(this.endContainer),m=k.block,p=l.block,r=null;if(!k.blockLimit.equals(l.blockLimit))return null;if(d!="br"){if(!m){m=this.fixBlock(true,d);p=(new CKEDITOR.dom.elementPath(this.endContainer)).block}p||
(p=this.fixBlock(false,d))}d=m&&this.checkStartOfBlock();k=p&&this.checkEndOfBlock();this.deleteContents();if(m&&m.equals(p))if(k){r=new CKEDITOR.dom.elementPath(this.startContainer);this.moveToPosition(p,CKEDITOR.POSITION_AFTER_END);p=null}else if(d){r=new CKEDITOR.dom.elementPath(this.startContainer);this.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START);m=null}else{p=this.splitElement(m);!CKEDITOR.env.ie&&!m.is("ul","ol")&&m.appendBogus()}return{previousBlock:m,nextBlock:p,wasStartOfBlock:d,wasEndOfBlock:k,
elementPath:r}},splitElement:function(d){if(!this.collapsed)return null;this.setEndAt(d,CKEDITOR.POSITION_BEFORE_END);var k=this.extractContents(),l=d.clone(false);k.appendTo(l);l.insertAfter(d);this.moveToPosition(d,CKEDITOR.POSITION_AFTER_END);return l},checkBoundaryOfElement:function(d,k){var l=k==CKEDITOR.START,m=this.clone();m.collapse(l);m[l?"setStartAt":"setEndAt"](d,l?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);m=new CKEDITOR.dom.walker(m);m.evaluator=b;return m[l?"checkBackward":
"checkForward"]()},checkStartOfBlock:function(){var d=this.startContainer,k=this.startOffset;if(k&&d.type==CKEDITOR.NODE_TEXT)if(CKEDITOR.tools.ltrim(d.substring(0,k)).length)return false;this.trim();d=new CKEDITOR.dom.elementPath(this.startContainer);k=this.clone();k.collapse(true);k.setStartAt(d.block||d.blockLimit,CKEDITOR.POSITION_AFTER_START);d=new CKEDITOR.dom.walker(k);d.evaluator=a(true);return d.checkBackward()},checkEndOfBlock:function(){var d=this.endContainer,k=this.endOffset;if(d.type==
CKEDITOR.NODE_TEXT)if(CKEDITOR.tools.rtrim(d.substring(k)).length)return false;this.trim();d=new CKEDITOR.dom.elementPath(this.endContainer);k=this.clone();k.collapse(false);k.setEndAt(d.block||d.blockLimit,CKEDITOR.POSITION_BEFORE_END);d=new CKEDITOR.dom.walker(k);d.evaluator=a(false);return d.checkForward()},checkReadOnly:function(){function d(k,l){for(;k;){if(k.type==CKEDITOR.NODE_ELEMENT)if(k.getAttribute("contentEditable")=="false"&&!k.data("cke-editable"))return 0;else if(k.is("body")||k.getAttribute("contentEditable")==
"true"&&(k.contains(l)||k.equals(l)))break;k=k.getParent()}return 1}return function(){var k=this.startContainer,l=this.endContainer;return!(d(k,l)&&d(l,k))}}(),moveToElementEditablePosition:function(d,k){var l;if(CKEDITOR.dtd.$empty[d.getName()])return false;for(;d&&d.type==CKEDITOR.NODE_ELEMENT;){if(l=d.isEditable())this.moveToPosition(d,k?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START);else if(CKEDITOR.dtd.$inline[d.getName()]){this.moveToPosition(d,k?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);
return true}if((d=CKEDITOR.dtd.$empty[d.getName()]?d[k?"getPrevious":"getNext"](c):d[k?"getLast":"getFirst"](c))&&d.type==CKEDITOR.NODE_TEXT){this.moveToPosition(d,k?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);return true}}return l},moveToElementEditStart:function(d){return this.moveToElementEditablePosition(d)},moveToElementEditEnd:function(d){return this.moveToElementEditablePosition(d,true)},getEnclosedNode:function(){var d=this.clone();d.optimize();if(d.startContainer.type!=CKEDITOR.NODE_ELEMENT||
d.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var k=new CKEDITOR.dom.walker(d),l=CKEDITOR.dom.walker.bookmark(true),m=CKEDITOR.dom.walker.whitespaces(true);d.evaluator=function(p){return m(p)&&l(p)};d=k.next();k.reset();return d&&d.equals(k.previous())?d:null},getTouchedStartNode:function(){var d=this.startContainer;if(this.collapsed||d.type!=CKEDITOR.NODE_ELEMENT)return d;return d.getChild(this.startOffset)||d},getTouchedEndNode:function(){var d=this.endContainer;if(this.collapsed||d.type!=
CKEDITOR.NODE_ELEMENT)return d;return d.getChild(this.endOffset-1)||d}}})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.STARTEND=3;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;
(function(){function a(c,e,g){var h=c.serializable,j=e[g?"endContainer":"startContainer"],f=g?"endOffset":"startOffset",d=h?e.document.getById(c.startNode):c.startNode;c=h?e.document.getById(c.endNode):c.endNode;if(j.equals(d.getPrevious())){e.startOffset=e.startOffset-j.getLength()-c.getPrevious().getLength();j=c.getNext()}else if(j.equals(c.getPrevious())){e.startOffset-=j.getLength();j=c.getNext()}j.equals(d.getParent())&&e[f]++;j.equals(c.getParent())&&e[f]++;e[g?"endContainer":"startContainer"]=
j;return e}CKEDITOR.dom.rangeList=function(c){if(c instanceof CKEDITOR.dom.rangeList)return c;if(c){if(c instanceof CKEDITOR.dom.range)c=[c]}else c=[];return CKEDITOR.tools.extend(c,b)};var b={createIterator:function(){var c=this,e=CKEDITOR.dom.walker.bookmark(),g=[],h;return{getNextRange:function(j){h=h==undefined?0:h+1;var f=c[h];if(f&&c.length>1){if(!h)for(var d=c.length-1;d>=0;d--)g.unshift(c[d].createBookmark(true));if(j)for(var k=0;c[h+k+1];){var l=f.document;j=0;d=l.getById(g[k].endNode);for(l=
l.getById(g[k+1].startNode);;){d=d.getNextSourceNode(false);if(l.equals(d))j=1;else if(e(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.isBlockBoundary())continue;break}if(!j)break;k++}for(f.moveToBookmark(g.shift());k--;){d=c[++h];d.moveToBookmark(g.shift());f.setEnd(d.endContainer,d.endOffset)}}return f}}},createBookmarks:function(c){for(var e=[],g,h=0;h<this.length;h++){e.push(g=this[h].createBookmark(c,true));for(var j=h+1;j<this.length;j++){this[j]=a(g,this[j]);this[j]=a(g,this[j],true)}}return e},createBookmarks2:function(c){for(var e=
[],g=0;g<this.length;g++)e.push(this[g].createBookmark2(c));return e},moveToBookmarks:function(c){for(var e=0;e<this.length;e++)this[e].moveToBookmark(c[e])}}})();
(function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=false;else{var a=CKEDITOR.env.ie&&CKEDITOR.env.version==7;a=CKEDITOR.dom.element.createFromHtml('<div style="width:0px;height:0px;position:absolute;left:-10000px;background-image:url('+(CKEDITOR.env.ie&&CKEDITOR.env.version<7?CKEDITOR.basePath+"images/spacer.gif":a?"about:blank":"data:image/png;base64,")+')"></div>',CKEDITOR.document);a.appendTo(CKEDITOR.document.getHead());try{CKEDITOR.env.hc=a.getComputedStyle("background-image")=="none"}catch(b){CKEDITOR.env.hc=
false}if(CKEDITOR.env.hc)CKEDITOR.env.cssClass+=" cke_hc";a.remove()}})();CKEDITOR.plugins.load(CKEDITOR.config.corePlugins.split(","),function(){CKEDITOR.status="loaded";CKEDITOR.fire("loaded");var a=CKEDITOR._.pending;if(a){delete CKEDITOR._.pending;for(var b=0;b<a.length;b++)CKEDITOR.add(a[b])}});if(CKEDITOR.env.ie)try{document.execCommand("BackgroundImageCache",false,true)}catch(e$$12){}
CKEDITOR.skins.add("kama",function(){var a="cke_ui_color";return{editor:{css:["editor.css"]},dialog:{css:["dialog.css"]},templates:{css:["templates.css"]},margins:[0,0,0,0],init:function(b){function c(d){var k=d.getById(a);if(!k){k=d.getHead().append("style");k.setAttribute("id",a);k.setAttribute("type","text/css")}return k}function e(d,k,l){for(var m,p,r,t=0;t<d.length;t++)if(CKEDITOR.env.webkit)for(p=0;p<k.length;p++){r=k[p][1];for(m=0;m<l.length;m++)r=r.replace(l[m][0],l[m][1]);d[t].$.sheet.addRule(k[p][0],
r)}else{r=k;for(m=0;m<l.length;m++)r=r.replace(l[m][0],l[m][1]);if(CKEDITOR.env.ie)d[t].$.styleSheet.cssText+=r;else d[t].$.innerHTML+=r}}if(b.config.width&&!isNaN(b.config.width))b.config.width-=12;var g=[],h="/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}";
if(CKEDITOR.env.webkit){h=h.split("}").slice(0,-1);for(var j=0;j<h.length;j++)h[j]=h[j].split("{")}var f=/\$color/g;CKEDITOR.tools.extend(b,{uiColor:null,getUiColor:function(){return this.uiColor},setUiColor:function(d){var k,l=c(CKEDITOR.document),m="."+b.id;m=[m+" .cke_wrapper",m+"_dialog .cke_dialog_contents",m+"_dialog a.cke_dialog_tab",m+"_dialog .cke_dialog_footer"].join(",");k=CKEDITOR.env.webkit?[[m,"background-color: $color !important;"]]:m+"{background-color: $color !important;}";return(this.setUiColor=
function(p){var r=[[f,p]];b.uiColor=p;e([l],k,r);e(g,h,r)})(d)}});b.on("menuShow",function(d){d=d.data[0].element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!d.getById("cke_ui_color")){d=c(d);g.push(d);var k=b.getUiColor();k&&e([d],h,[[f,k]])}});b.config.uiColor&&b.setUiColor(b.config.uiColor)}}}());
(function(){function a(){CKEDITOR.dialog.on("resize",function(b){b=b.data;b.skin=="kama"&&b.dialog.parts.contents.setStyles({width:b.width+"px",height:b.height+"px"})})}CKEDITOR.dialog?a():CKEDITOR.on("dialogPluginReady",a)})();
(function(){CKEDITOR.plugins.add("a11yhelp",{availableLangs:{en:1,he:1},init:function(a){var b=this;a.addCommand("a11yHelp",{exec:function(){var c=a.langCode;c=b.availableLangs[c]?c:"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(b.path+"lang/"+c+".js"),function(){CKEDITOR.tools.extend(a.lang,b.langEntries[c]);a.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},canUndo:false});CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js")}})})();
CKEDITOR.plugins.add("basicstyles",{requires:["styles","button"],init:function(a){var b=function(g,h,j,f){f=new CKEDITOR.style(f);a.attachStyleStateChange(f,function(d){a.getCommand(j).setState(d)});a.addCommand(j,new CKEDITOR.styleCommand(f));a.ui.addButton(g,{label:h,command:j})},c=a.config,e=a.lang;b("Bold",e.bold,"bold",c.coreStyles_bold);b("Italic",e.italic,"italic",c.coreStyles_italic);b("Underline",e.underline,"underline",c.coreStyles_underline);b("Strike",e.strike,"strike",c.coreStyles_strike);
b("Subscript",e.subscript,"subscript",c.coreStyles_subscript);b("Superscript",e.superscript,"superscript",c.coreStyles_superscript)}});CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"};CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"};CKEDITOR.config.coreStyles_underline={element:"u"};CKEDITOR.config.coreStyles_strike={element:"strike"};CKEDITOR.config.coreStyles_subscript={element:"sub"};CKEDITOR.config.coreStyles_superscript={element:"sup"};
(function(){function a(f){var d=f.editor,k=f.data.path,l=d.config.useComputedState,m;l=l===undefined||l;if(!l)for(m=k.lastElement;m&&!(m.getName()in j||m.is("body"));){var p=m.getParent();if(!p)break;m=p}m=m||k.block||k.blockLimit;m.is("body")&&(m=d.getSelection().getRanges()[0].getEnclosedNode());if(m){k=l?m.getComputedStyle("direction"):m.getStyle("direction")||m.getAttribute("dir");d.getCommand("bidirtl").setState(k=="rtl"?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);d.getCommand("bidiltr").setState(k==
"ltr"?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}d=f.editor;f=f.data.path.block||f.data.path.blockLimit;d.fire("contentDirChanged",f?f.getComputedStyle("direction"):d.lang.dir)}function b(f,d,k,l){CKEDITOR.dom.element.setMarker(l,f,"bidi_processed",1);for(l=f;(l=l.getParent())&&!l.is("body");)if(l.getCustomData("bidi_processed")){f.removeStyle("direction");f.removeAttribute("dir");return null}var m=(l="useComputedState"in k.config?k.config.useComputedState:1)?f.getComputedStyle("direction"):f.getStyle("direction")||
f.hasAttribute("dir");if(m==d)return null;m=l?m:f.getComputedStyle("direction");f.removeStyle("direction");if(l){f.removeAttribute("dir");d!=f.getComputedStyle("direction")&&f.setAttribute("dir",d)}else f.setAttribute("dir",d);d!=m&&k.fire("dirChanged",{node:f,dir:d});k.forceNextSelectionCheck();return null}function c(f,d,k){var l=f.getCommonAncestor(false,true);f=f.clone();f.enlarge(k==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(f.checkBoundaryOfElement(l,
CKEDITOR.START)&&f.checkBoundaryOfElement(l,CKEDITOR.END)){for(var m;l&&l.type==CKEDITOR.NODE_ELEMENT&&(m=l.getParent())&&m.getChildCount()==1&&!(l.getName()in d);)l=m;return l.type==CKEDITOR.NODE_ELEMENT&&l.getName()in d&&l}}function e(f){return function(d){var k=d.getSelection(),l=d.config.enterMode,m=k.getRanges();if(m&&m.length){var p={},r=k.createBookmarks();m=m.createIterator();for(var t,n=0;t=m.getNextRange(1);){var s=t.getEnclosedNode();if(!s||s&&!(s.type==CKEDITOR.NODE_ELEMENT&&s.getName()in
h))s=c(t,g,l);s&&!s.isReadOnly()&&b(s,f,d,p);var q=new CKEDITOR.dom.walker(t),v=r[n].startNode,x=r[n++].endNode;q.evaluator=function(G){return!!(G.type==CKEDITOR.NODE_ELEMENT&&G.getName()in g&&!(G.getName()==(l==CKEDITOR.ENTER_P?"p":"div")&&G.getParent().type==CKEDITOR.NODE_ELEMENT&&G.getParent().getName()=="blockquote")&&G.getPosition(v)&CKEDITOR.POSITION_FOLLOWING&&(G.getPosition(x)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};for(;s=q.next();)b(s,f,d,p);
t=t.createIterator();for(t.enlargeBr=l!=CKEDITOR.ENTER_BR;s=t.getNextParagraph(l==CKEDITOR.ENTER_P?"p":"div");)!s.isReadOnly()&&b(s,f,d,p)}CKEDITOR.dom.element.clearAllMarkers(p);d.forceNextSelectionCheck();k.selectBookmarks(r);d.focus()}}}var g={table:1,ul:1,ol:1,blockquote:1,div:1},h={},j={};CKEDITOR.tools.extend(h,g,{tr:1,p:1,div:1,li:1});CKEDITOR.tools.extend(j,h,{td:1});CKEDITOR.plugins.add("bidi",{requires:["styles","button"],init:function(f){var d=function(l,m,p,r){f.addCommand(p,new CKEDITOR.command(f,
{exec:r}));f.ui.addButton(l,{label:m,command:p})},k=f.lang.bidi;d("BidiLtr",k.ltr,"bidiltr",e("ltr"));d("BidiRtl",k.rtl,"bidirtl",e("rtl"));f.on("selectionChange",a)}})})();
(function(){function a(c){var e=c.editor.getCommand("blockquote");c=c.data.path;c=c.block||c.blockLimit;c=!c||c.getName()=="body"?CKEDITOR.TRISTATE_OFF:c.getAscendant("blockquote",true)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;e.state=c;e.fire("state")}var b={exec:function(c){var e=c.getCommand("blockquote").state,g=c.getSelection(),h=g&&g.getRanges(true)[0];if(h){var j=g.createBookmarks();if(CKEDITOR.env.ie){var f=j[0].startNode,d=j[0].endNode,k;if(f&&f.getParent().getName()=="blockquote")for(k=
f;k=k.getNext();)if(k.type==CKEDITOR.NODE_ELEMENT&&k.isBlockBoundary()){f.move(k,true);break}if(d&&d.getParent().getName()=="blockquote")for(k=d;k=k.getPrevious();)if(k.type==CKEDITOR.NODE_ELEMENT&&k.isBlockBoundary()){d.move(k);break}}var l=h.createIterator();l.enlargeBr=c.config.enterMode!=CKEDITOR.ENTER_BR;if(e==CKEDITOR.TRISTATE_OFF){for(f=[];e=l.getNextParagraph();)f.push(e);if(f.length<1){e=c.document.createElement(c.config.enterMode==CKEDITOR.ENTER_P?"p":"div");d=j.shift();h.insertNode(e);
e.append(new CKEDITOR.dom.text("﻿",c.document));h.moveToBookmark(d);h.selectNodeContents(e);h.collapse(true);d=h.createBookmark();f.push(e);j.unshift(d)}k=f[0].getParent();h=[];for(d=0;d<f.length;d++){e=f[d];k=k.getCommonAncestor(e.getParent())}for(e={table:1,tbody:1,tr:1,ol:1,ul:1};e[k.getName()];)k=k.getParent();for(d=null;f.length>0;){for(e=f.shift();!e.getParent().equals(k);)e=e.getParent();e.equals(d)||h.push(e);d=e}for(;h.length>0;){e=h.shift();if(e.getName()=="blockquote"){for(d=new CKEDITOR.dom.documentFragment(c.document);e.getFirst();){d.append(e.getFirst().remove());
f.push(d.getLast())}d.replace(e)}else f.push(e)}h=c.document.createElement("blockquote");for(h.insertBefore(f[0]);f.length>0;){e=f.shift();h.append(e)}}else if(e==CKEDITOR.TRISTATE_ON){d=[];for(k={};e=l.getNextParagraph();){for(f=h=null;e.getParent();){if(e.getParent().getName()=="blockquote"){h=e.getParent();f=e;break}e=e.getParent()}if(h&&f&&!f.getCustomData("blockquote_moveout")){d.push(f);CKEDITOR.dom.element.setMarker(k,f,"blockquote_moveout",true)}}CKEDITOR.dom.element.clearAllMarkers(k);e=
[];f=[];for(k={};d.length>0;){l=d.shift();h=l.getParent();if(l.getPrevious())if(l.getNext()){l.breakParent(l.getParent());f.push(l.getNext())}else l.remove().insertAfter(h);else l.remove().insertBefore(h);if(!h.getCustomData("blockquote_processed")){f.push(h);CKEDITOR.dom.element.setMarker(k,h,"blockquote_processed",true)}e.push(l)}CKEDITOR.dom.element.clearAllMarkers(k);for(d=f.length-1;d>=0;d--){h=f[d];a:{k=h;l=0;for(var m=k.getChildCount(),p=void 0;l<m&&(p=k.getChild(l));l++)if(p.type==CKEDITOR.NODE_ELEMENT&&
p.isBlockBoundary()){k=false;break a}k=true}k&&h.remove()}if(c.config.enterMode==CKEDITOR.ENTER_BR)for(h=true;e.length;){l=e.shift();if(l.getName()=="div"){d=new CKEDITOR.dom.documentFragment(c.document);h&&l.getPrevious()&&!(l.getPrevious().type==CKEDITOR.NODE_ELEMENT&&l.getPrevious().isBlockBoundary())&&d.append(c.document.createElement("br"));for(h=l.getNext()&&!(l.getNext().type==CKEDITOR.NODE_ELEMENT&&l.getNext().isBlockBoundary());l.getFirst();)l.getFirst().remove().appendTo(d);h&&d.append(c.document.createElement("br"));
d.replace(l);h=false}}}g.selectBookmarks(j);c.focus()}}};CKEDITOR.plugins.add("blockquote",{init:function(c){c.addCommand("blockquote",b);c.ui.addButton("Blockquote",{label:c.lang.blockquote,command:"blockquote"});c.on("selectionChange",a)},requires:["domiterator"]})})();CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON=1;
CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,className:a.className||a.command&&"cke_button_"+a.command||"",click:a.click||function(b){b.execCommand(a.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}};
CKEDITOR.ui.button._={instances:[],keydown:function(a,b){var c=CKEDITOR.ui.button._.instances[a];if(c.onkey){b=new CKEDITOR.dom.event(b);return c.onkey(c,b.getKeystroke())!==false}},focus:function(a,b){var c=CKEDITOR.ui.button._.instances[a],e;if(c.onfocus)e=c.onfocus(c,new CKEDITOR.dom.event(b))!==false;CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&b.preventBubble();return e}};
(function(){var a=CKEDITOR.tools.addFunction(CKEDITOR.ui.button._.keydown,CKEDITOR.ui.button._),b=CKEDITOR.tools.addFunction(CKEDITOR.ui.button._.focus,CKEDITOR.ui.button._);CKEDITOR.ui.button.prototype={canGroup:true,render:function(c,e){var g=CKEDITOR.env,h=this._.id=CKEDITOR.tools.getNextId(),j="",f=this.command,d,k;this._.editor=c;var l={id:h,button:this,editor:c,focus:function(){CKEDITOR.document.getById(h).focus()},execute:function(){this.editor.fire("buttonClick",{button:this.button});this.button.click(c)}};
l.clickFn=d=CKEDITOR.tools.addFunction(l.execute,l);l.index=k=CKEDITOR.ui.button._.instances.push(l)-1;if(this.modes){var m={};c.on("beforeModeUnload",function(){m[c.mode]=this._.state},this);c.on("mode",function(){var p=c.mode;this.setState(this.modes[p]?m[p]!=undefined?m[p]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},this)}else if(f)if(f=c.getCommand(f)){f.on("state",function(){RTE.loaded?this.setState(f.state):this.setState(CKEDITOR.TRISTATE_DISABLED)},this);j+="cke_"+(f.state==CKEDITOR.TRISTATE_ON?
"on":f.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off")}f||(j+="cke_off");if(this.className)j+=" "+this.className;if(this.wrapperClassName)j+=" "+this.wrapperClassName;e.push('<span class="cke_button '+j+(this.icon&&this.icon.indexOf(".png")==-1?" cke_noalphafix":"")+'">','<a id="',h,'" class="',j,'"',g.gecko&&g.version>=10900&&!g.hc?"":'" href="javascript:void(\''+(this.title||"").replace("'","")+"')\"",' title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+h+
'_label"'+(this.hasArrow?' aria-haspopup="true"':""));if(g.opera||g.gecko&&g.mac)e.push(' onkeypress="return false;"');g.gecko&&e.push(' onblur="this.style.cssText = this.style.cssText;"');e.push(' onkeydown="return CKEDITOR.tools.callFunction(',a,", ",k,', event);" onfocus="return CKEDITOR.tools.callFunction(',b,", ",k,', event);" onclick="CKEDITOR.tools.callFunction(',d,', this); return false;">');if(this.hasIcon!==false){e.push('<span class="cke_icon"');if(this.icon){g=(this.iconOffset||0)*-16;
e.push(' style="background-image:url(',CKEDITOR.getUrl(this.icon),");background-position:0 "+g+'px;"')}e.push(">&nbsp;</span>")}e.push('<span id="',h,'_label" class="cke_label">',this.label,"</span>");if(this.hasArrow)e.push('<span class="cke_buttonarrow">'+(CKEDITOR.env.hc?"&#9660;":"&nbsp;")+"</span>");e.push("</a>","</span>");if(this.onRender)this.onRender();return l},setState:function(c){if(this._.state==c)return false;this._.state=c;var e=CKEDITOR.document.getById(this._.id);if(e){e.setState(c);
c==CKEDITOR.TRISTATE_DISABLED?e.setAttribute("aria-disabled",true):e.removeAttribute("aria-disabled");c==CKEDITOR.TRISTATE_ON?e.setAttribute("aria-pressed",true):e.removeAttribute("aria-pressed");return true}else return false}}})();CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)};CKEDITOR.on("reset",function(){CKEDITOR.ui.button._.instances=[]});
(function(){function a(l){if(!(!CKEDITOR.env.ie||CKEDITOR.env.quirks)){var m=l.getSelection(),p;if(m.getType()==CKEDITOR.SELECTION_ELEMENT&&(p=m.getSelectedElement())){var r=m.getRanges()[0],t=l.document.createText("");t.insertBefore(p);r.setStartBefore(t);r.setEndAfter(p);m.selectRanges([r]);setTimeout(function(){if(p.getParent()){t.remove();m.selectElement(p)}},0)}}}function b(l,m){CKEDITOR.env.ie&&(d=1);var p=m.document.$.queryCommandEnabled(l)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;
d=0;return p}function c(){if(this.mode=="wysiwyg"){this.getCommand("cut").setState(k?CKEDITOR.TRISTATE_DISABLED:b("Cut",this));this.getCommand("copy").setState(b("Copy",this));this.fire("pasteState",k?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.env.webkit?CKEDITOR.TRISTATE_OFF:b("Paste",this))}}var e=function(l,m){var p=l.document,r=p.getBody(),t=0,n=function(){t=1};r.on(m,n);(CKEDITOR.env.version>7?p.$:p.$.selection.createRange()).execCommand(m);r.removeListener(m,n);return t},g=CKEDITOR.env.ie?function(l,
m){return e(l,m)}:function(l,m){try{return l.document.$.execCommand(m,false,null)}catch(p){return false}},h=function(l){this.type=l;this.canUndo=this.type=="cut";this.startDisabled=true};h.prototype={exec:function(l){this.type=="cut"&&a(l);var m=g(l,this.type);m||alert(l.lang.clipboard[this.type+"Error"]);return m}};var j={canUndo:false,exec:CKEDITOR.env.ie?function(l){l.focus();if(!l.document.getBody().fire("beforepaste")&&!e(l,"paste")){l.fire("pasteDialog");return false}}:function(l){try{if(!l.document.getBody().fire("beforepaste")&&
!l.document.$.execCommand("Paste",false,null))throw 0;}catch(m){setTimeout(function(){l.fire("pasteDialog")},0);return false}}},f=function(l){if(this.mode=="wysiwyg")switch(l.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:var m=this.document.getBody();if(!CKEDITOR.env.ie&&m.fire("beforepaste"))l.cancel();else if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.version<10900)m.fire("paste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:var p=this;this.fire("saveSnapshot");setTimeout(function(){p.fire("saveSnapshot")},
0)}},d,k;CKEDITOR.plugins.add("clipboard",{requires:["dialog","htmldataprocessor"],init:function(l){function m(p,r,t,n){var s=l.lang[r];l.addCommand(r,t);l.ui.addButton(p,{label:s,command:r});l.addMenuItems&&l.addMenuItem(r,{label:s,command:r,group:"clipboard",order:n})}l.on("paste",function(p){p=p.data;if(p.html)l.insertHtml(p.html);else p.text&&l.insertText(p.text)},null,null,1E3);l.on("pasteDialog",function(){setTimeout(function(){l.openDialog("paste")},0)});l.on("pasteState",function(p){l.getCommand("paste").setState(p.data)});
m("Cut","cut",new h("cut"),1);m("Copy","copy",new h("copy"),4);m("Paste","paste",j,8);CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));l.on("key",f,l);l.on("contentDom",function(){l.document.getBody().on("beforepaste",function(p){d||l.fire("beforepaste",{originalEvent:p})})});l.on("selectionChange",function(p){k=p.data.selection.getRanges()[0].checkReadOnly();c.call(l)});l.contextMenu&&l.contextMenu.addListener(function(p,r){var t=r.getRanges()[0].checkReadOnly();return{cut:!t&&
b("Cut",l),copy:b("Copy",l),paste:!t&&(CKEDITOR.env.webkit?CKEDITOR.TRISTATE_OFF:b("Paste",l))}})}})})();
CKEDITOR.plugins.add("colorbutton",{requires:["panelbutton","floatpanel","styles"],init:function(a){function b(j,f,d){var k=CKEDITOR.tools.getNextId()+"_colorBox";a.ui.add(j,CKEDITOR.UI_PANELBUTTON,{label:d,title:d,className:"cke_button_"+j.toLowerCase(),modes:{wysiwyg:1},panel:{css:a.skin.editor.css,attributes:{role:"listbox","aria-label":h.panelTitle}},onBlock:function(l,m){m.autoSize=true;m.element.addClass("cke_colorblock");m.element.setHtml(c(l,f,k));m.element.getDocument().getBody().setStyle("overflow",
"hidden");CKEDITOR.ui.fire("ready",this);var p=m.keys,r=a.lang.dir=="rtl";p[r?37:39]="next";p[40]="next";p[9]="next";p[r?39:37]="prev";p[38]="prev";p[CKEDITOR.SHIFT+9]="prev";p[32]="click"},onOpen:function(){var l=a.getSelection();l=l&&l.getStartElement();l=new CKEDITOR.dom.elementPath(l);var m;l=l.block||l.blockLimit;do m=l&&l.getComputedStyle(f=="back"?"background-color":"color")||"transparent";while(f=="back"&&m=="transparent"&&l&&(l=l.getParent()));if(!m||m=="transparent")m="#ffffff";this._.panel._.iframe.getFrameDocument().getById(k).setStyle("background-color",
m)}})}function c(j,f,d){var k=[],l=g.colorButton_colors.split(","),m=l.length+(g.colorButton_enableMore?2:1),p=CKEDITOR.tools.addFunction(function(s,q){if(s=="?"){var v=arguments.callee,x=function(C){this.removeListener("ok",x);this.removeListener("cancel",x);C.name=="ok"&&v(this.getContentElement("picker","selectedColor").getValue(),q)};a.openDialog("colordialog",function(){this.on("ok",x);this.on("cancel",x)})}else{a.focus();j.hide();a.fire("saveSnapshot");(new CKEDITOR.style(g["colorButton_"+q+
"Style"],{color:"inherit"})).remove(a.document);if(s){var G=g["colorButton_"+q+"Style"];G.childRule=q=="back"?function(C){return e(C)}:function(C){return C.getName()!="a"||e(C)};(new CKEDITOR.style(G,{color:s})).apply(a.document)}a.fire("saveSnapshot")}});k.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',h.auto,'" onclick="CKEDITOR.tools.callFunction(',p,",null,'",f,"');return false;\" href=\"javascript:void('",h.auto,'\')" role="option" aria-posinset="1" aria-setsize="',m,'"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" id="',
d,'"></span></td><td colspan=7 align=center>',h.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(d=0;d<l.length;d++){d%8===0&&k.push("</tr><tr>");var r=l[d].split("/"),t=r[0],n=r[1]||t;r[1]||(t="#"+t.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));r=a.lang.colors[n]||n;k.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',r,'" onclick="CKEDITOR.tools.callFunction(',p,",'",t,"','",f,"'); return false;\" href=\"javascript:void('",r,'\')" role="option" aria-posinset="',
d+2,'" aria-setsize="',m,'"><span class="cke_colorbox" style="background-color:#',n,'"></span></a></td>')}if(g.colorButton_enableMore===undefined||g.colorButton_enableMore)k.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',h.more,'" onclick="CKEDITOR.tools.callFunction(',p,",'?','",f,"');return false;\" href=\"javascript:void('",h.more,"')\"",' role="option" aria-posinset="',m,'" aria-setsize="',m,'">',h.more,"</a></td>");k.push("</tr></table>");
return k.join("")}function e(j){return j.getAttribute("contentEditable")=="false"||j.getAttribute("data-nostyle")}var g=a.config,h=a.lang.colorButton;if(!CKEDITOR.env.hc){b("TextColor","fore",h.textColorTitle);b("BGColor","back",h.bgColorTitle)}}});CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF";
CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]};CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}};(function(){CKEDITOR.plugins.colordialog={init:function(a){a.addCommand("colordialog",new CKEDITOR.dialogCommand("colordialog"));CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js")}};CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog)})();
CKEDITOR.plugins.add("contextmenu",{requires:["menu"],onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(a){this.base.call(this,a,{panel:{className:a.skinClass+" cke_contextmenu",attributes:{"aria-label":a.lang.contextmenu.options}}})},proto:{addTarget:function(a,b){if(CKEDITOR.env.opera&&!("oncontextmenu"in document.body)){var c;a.on("mousedown",function(h){h=h.data;if(h.$.button!=2)h.getKeystroke()==CKEDITOR.CTRL+1&&a.fire("contextmenu",h);else if(!(b&&
(CKEDITOR.env.mac?h.$.metaKey:h.$.ctrlKey))){var j=h.getTarget();if(!c){j=j.getDocument();c=j.createElement("input");c.$.type="button";j.getBody().append(c)}c.setAttribute("style","position:absolute;top:"+(h.$.clientY-2)+"px;left:"+(h.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01")}});a.on("mouseup",function(h){if(c){c.remove();c=undefined;a.fire("contextmenu",h.data)}})}a.on("contextmenu",function(h){h=h.data;if(!(b&&(CKEDITOR.env.webkit?e:CKEDITOR.env.mac?h.$.metaKey:h.$.ctrlKey))){this.originalEvent=
new CKEDITOR.dom.event(h.$);h.preventDefault();var j=h.getTarget().getDocument().getDocumentElement(),f=h.$.clientX,d=h.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(j,null,f,d)},0,this)}},this);if(CKEDITOR.env.opera)a.on("keypress",function(h){h=h.data;h.$.keyCode===0&&h.preventDefault()});if(CKEDITOR.env.webkit){var e,g=function(){e=0};a.on("keydown",function(h){e=CKEDITOR.env.mac?h.data.$.metaKey:h.data.$.ctrlKey});a.on("keyup",g);a.on("contextmenu",g)}},open:function(a,b,c,e){this.editor.fire("contextMenuOnOpen",
{menu:this});this.editor.focus();a=a||CKEDITOR.document.getDocumentElement();this.show(a,b,c,e)}}})},beforeInit:function(a){a.contextMenu=new CKEDITOR.plugins.contextMenu(a);a.addCommand("contextMenu",{exec:function(){a.contextMenu.open(a.document.getBody())}});var b=a.contextMenu._;b.onClickOriginal=b.onClick;b.onClick=function(c){a.fire("contextMenuOnClick",{menu:a.contextMenu,item:c});b.onClickOriginal(c)}}});
(function(){function a(c){var e=this.att;c=c&&c.hasAttribute(e)&&c.getAttribute(e)||"";c!==undefined&&this.setValue(c)}function b(){for(var c,e=0;e<arguments.length;e++)if(arguments[e]instanceof CKEDITOR.dom.element){c=arguments[e];break}if(c){e=this.att;var g=this.getValue();if(e=="dir")if(c.getAttribute(e)!=g&&c.getParent())this._.dialog._.editor.fire("dirChanged",{node:c,dir:g||c.getDirection(1)});g?c.setAttribute(e,g):c.removeAttribute(e,g)}}CKEDITOR.plugins.add("dialogadvtab",{createAdvancedTab:function(c,
e){e||(e={id:1,dir:1,classes:1,styles:1});var g=c.lang.common,h={id:"advanced",label:g.advancedTab,title:g.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},j=[];if(e.id||e.dir){e.id&&j.push({id:"advId",att:"id",type:"text",label:g.id,setup:a,commit:b});e.dir&&j.push({id:"advLangDir",att:"dir",type:"select",label:g.langDir,"default":"",style:"width:100%",items:[[g.notSet,""],[g.langDirLTR,"ltr"],[g.langDirRTL,"rtl"]],setup:a,commit:b});h.elements[0].children.push({type:"hbox",widths:["50%",
"50%"],children:[].concat(j)})}if(e.styles||e.classes){j=[];e.styles&&j.push({id:"advStyles",att:"style",type:"text",label:g.styles,"default":"",getStyle:function(f,d){var k=this.getValue().match(RegExp(f+"\\s*:s*([^;]*)","i"));return k?k[1]:d},updateStyle:function(f,d){var k=this.getValue();if(k)k=k.replace(RegExp("\\s*"+f+"s*:[^;]*(?:$|;s*)","i"),"").replace(/^[;\s]+/,"").replace(/\s+$/,"");if(d){k&&!/;\s*$/.test(k)&&(k+="; ");k+=f+": "+d}this.setValue(k,1)},setup:a,commit:b});e.classes&&j.push({type:"hbox",
widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",label:g.cssClasses,"default":"",setup:a,commit:b}]});h.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(j)})}return h}})})();
(function(){CKEDITOR.plugins.add("div",{requires:["editingblock","domiterator","styles"],init:function(a){var b=a.lang.div;a.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv"));a.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv"));a.addCommand("removediv",{exec:function(c){function e(k){k=(new CKEDITOR.dom.elementPath(k)).blockLimit;if((k=k.is("div")&&k)&&!k.data("cke-div-added")){f.push(k);k.data("cke-div-added")}}for(var g=(c=c.getSelection())&&c.getRanges(),h,j=c.createBookmarks(),
f=[],d=0;d<g.length;d++){h=g[d];if(h.collapsed)e(c.getStartElement());else{h=new CKEDITOR.dom.walker(h);h.evaluator=e;h.lastForward()}}for(d=0;d<f.length;d++)f[d].remove(true);c.selectBookmarks(j)}});a.ui.addButton("CreateDiv",{label:b.toolbar,command:"creatediv"});if(a.addMenuItems){a.addMenuItems({editdiv:{label:b.edit,command:"editdiv",group:"div",order:1},removediv:{label:b.remove,command:"removediv",group:"div",order:5}});a.contextMenu&&a.contextMenu.addListener(function(c){if(!c||c.isReadOnly())return null;
if((c=(new CKEDITOR.dom.elementPath(c)).blockLimit)&&c.getAscendant("div",true))return{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF};return null})}CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js");CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}})})();
(function(){function a(j,f,d){d=j.config.forceEnterMode||d;if(j.mode!="wysiwyg")return false;if(!f)f=j.config.enterMode;setTimeout(function(){j.fire("saveSnapshot");f==CKEDITOR.ENTER_BR||j.getSelection().getStartElement().hasAscendant("pre",1)?e(j,f,null,d):g(j,f,null,d)},0);return true}function b(j){var f=j.getSelection().getRanges(true);if(f.length==0){f=j.getSelection().getRanges(false);f=f[0];var d=new CKEDITOR.dom.elementPath(f.startContainer),k=new CKEDITOR.dom.elementPath(f.endContainer);if(!k.isContentEditable()){d=
f.endContainer.isReadOnly();d.is("p","div")?f.setEndAt(d,CKEDITOR.POSITION_BEFORE_END):f.setEndAfter(d)}f.collapse(false);f=new CKEDITOR.dom.rangeList([f]);j.getSelection().selectRanges(f);j.getSelection().reset();CKEDITOR.env.ie||(f=j.getSelection().getRanges(false))}if(f.length==0){f=j.getSelection().getRanges(false);f=f[0];d=new CKEDITOR.dom.elementPath(f.startContainer);k=new CKEDITOR.dom.elementPath(f.endContainer);if(!d.isContentEditable()||!k.isContentEditable()){d=f.endContainer.isReadOnly();
d.is("p","div")?f.setEndAt(d,CKEDITOR.POSITION_BEFORE_END):f.setEndAfter(d);f.collapse(false)}j.getSelection().selectRanges(new CKEDITOR.dom.rangeList([f]));f=j.getSelection().getRanges(false)}for(j=f.length-1;j>0;j--)f[j].deleteContents();return f[0]}CKEDITOR.plugins.add("enterkey",{requires:["keystrokes","indent"],init:function(j){j=j.specialKeys;j[13]=a;j[CKEDITOR.SHIFT+13]=a}});CKEDITOR.plugins.enterkey={enterBlock:function(j,f,d,k){d=d||b(j);var l=d.document;if(d.checkStartOfBlock()&&d.checkEndOfBlock()){var m=
(new CKEDITOR.dom.elementPath(d.startContainer)).block;if(m&&(m.is("li")||m.getParent().is("li"))){j.execCommand("outdent");return}}var p=f==CKEDITOR.ENTER_DIV?"div":"p",r=d.splitBlock(p);if(r){j=r.previousBlock;f=r.nextBlock;m=r.wasStartOfBlock;var t=r.wasEndOfBlock,n;if(f){n=f.getParent();if(n.is("li")){f.breakParent(n);f.move(f.getNext(),1)}}else if(j&&(n=j.getParent())&&n.is("li")){j.breakParent(n);d.moveToElementEditStart(j.getNext());j.move(j.getPrevious())}if(!m&&!t){if(f.is("li")&&(n=f.getFirst(CKEDITOR.dom.walker.invisible(true)))&&
n.is&&n.is("ul","ol"))(CKEDITOR.env.ie?l.createText(" "):l.createElement("br")).insertBefore(n);if(f){if(f.is("p")){f.getFirst().$.nodeType!=CKEDITOR.NODE_COMMENT&&f.setAttribute("data-rte-empty-lines-before",1);f.setAttribute("data-rte-fromparser",1)}d.moveToElementEditStart(f)}}else{var s,q;if(j){if(j.is("li")||!h.test(j.getName()))s=j.clone();if(j.isReadOnly())s=null}else if(f){s=f.clone();if(f.isReadOnly())s=null}if(s)k&&!s.is("li")&&s.renameNode(p);else{s=l.createElement(p);if(j&&(q=j.getDirection()))s.setAttribute("dir",
q)}if(s.is("dl"))s=new CKEDITOR.dom.element("p");if(k=r.elementPath){n=-1;for(q=k.elements.length-1;q>=0;q--)if(k.elements[q].$.contentEditable=="false"){n=q;break}$().log({elementPath:k,elementPathBlock:k.block,elementPathBlockLimit:k.blockLimit,notEditableIndex:n},"RTE-enterkey");q=0;for(p=k.elements.length;q<p;q++){r=k.elements[q];if(r.equals(k.block)||r.equals(k.blockLimit))break;if(!(q<=n))if(CKEDITOR.dtd.$removeEmpty[r.getName()]){r=r.clone();s.moveChildren(r);s.append(r)}}}CKEDITOR.env.ie||
s.appendBogus();s.setAttribute("data-rte-new-node",true);d.insertNode(s);if(CKEDITOR.env.ie&&m&&(!t||!j.getChildCount())){d.moveToElementEditStart(t?j:s);d.select()}d.moveToElementEditStart(m&&!t?f:s)}if(!CKEDITOR.env.ie)if(f){l=l.createElement("span");l.setHtml("&nbsp;");d.insertNode(l);l.scrollIntoView();d.deleteContents()}else s.scrollIntoView();d.select()}},enterBr:function(j,f,d,k){if(d=d||b(j))if(d){var l=d.document,m=d.checkEndOfBlock(),p=new CKEDITOR.dom.elementPath(j.getSelection().getStartElement()),
r=p.block,t=r&&p.block.getName();p=false;if(!k&&t=="li")g(j,f,d,k);else{if(!k&&m&&h.test(t))if(m=r.getDirection()){l=l.createElement("div");l.setAttribute("dir",m);l.insertAfter(r);d.setStart(l,0)}else{l.createElement("br").insertAfter(r);CKEDITOR.env.gecko&&l.createText("").insertAfter(r);d.setStartAt(r.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)}else{if((p=t=="pre")&&!CKEDITOR.env.gecko)r=l.createText(CKEDITOR.env.ie?"\r":"\n");else{r=l.createElement("br");
r.setAttribute("data-rte-shift-enter",true);if(h.test(t))return}d.deleteContents();d.insertNode(r);CKEDITOR.env.ie||l.createText("﻿").insertAfter(r);m&&!CKEDITOR.env.ie&&r.getParent().appendBogus();if(!CKEDITOR.env.ie)r.getNext().$.nodeValue="";CKEDITOR.env.ie?d.setStartAt(r,CKEDITOR.POSITION_AFTER_END):d.setStartAt(r.getNext(),CKEDITOR.POSITION_AFTER_START);if(!CKEDITOR.env.ie){m=null;if(CKEDITOR.env.gecko)m=l.createElement("br");else{m=l.createElement("span");m.setHtml("&nbsp;")}m.insertBefore(r.getNext());
m.scrollIntoView();m.remove()}}d.collapse(true);d.select(p)}}}};var c=CKEDITOR.plugins.enterkey,e=c.enterBr,g=c.enterBlock,h=/^h[1-6]$/})();
(function(){function a(b,c){var e={},g=[],h={nbsp:" ",shy:"­",gt:">",lt:"<"};b=b.replace(/\b(nbsp|shy|gt|lt|amp)(?:,|$)/g,function(k,l){var m=c?"&"+l+";":h[l];e[m]=c?h[l]:"&"+l+";";g.push(m);return""});if(!c&&b){b=b.split(",");var j=document.createElement("div"),f;j.innerHTML="&"+b.join(";&")+";";f=j.innerHTML;j=null;for(j=0;j<f.length;j++){var d=f.charAt(j);e[d]="&"+b[j]+";";g.push(d)}}e.regex=g.join(c?"|":"");return e}CKEDITOR.plugins.add("entities",{afterInit:function(b){var c=b.config;if(b=(b=
b.dataProcessor)&&b.htmlFilter){var e="nbsp,gt,lt";if(c.entities){e+=",quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro";
if(c.entities_latin)e+=",Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml";if(c.entities_greek)e+=",Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv";
if(c.entities_additional)e+=","+c.entities_additional}var g=a(e),h="["+g.regex+"]";delete g.regex;if(c.entities&&c.entities_processNumerical)h="[^ -~]|"+h;h=RegExp(h,"g");var j=function(l){return c.entities_processNumerical=="force"||!g[l]?"&#"+l.charCodeAt(0)+";":g[l]},f=a("nbsp,gt,lt,shy",true),d=RegExp(f.regex,"g"),k=function(l){return f[l]};b.addRules({text:function(l){return l.replace(d,k).replace(h,j)}})}}})})();CKEDITOR.config.entities=true;CKEDITOR.config.entities_latin=true;
CKEDITOR.config.entities_greek=true;CKEDITOR.config.entities_additional="#39";
CKEDITOR.plugins.add("find",{init:function(a){a.ui.addButton("Find",{label:a.lang.findAndReplace.find,command:"find"});a.addCommand("find",new CKEDITOR.dialogCommand("find")).canUndo=false;a.ui.addButton("Replace",{label:a.lang.findAndReplace.replace,command:"replace"});a.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=false;CKEDITOR.dialog.add("find",this.path+"dialogs/find.js");CKEDITOR.dialog.add("replace",this.path+"dialogs/find.js")},requires:["styles"]});
CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}};
(function(){function a(b,c,e,g,h,j,f){var d=b.config,k=h.split(";"),l={};for(h=0;h<k.length;h++){var m=k[h];if(m){m=m.split("/");var p={},r=k[h]=m[0];p[e]=m[1]||r;l[r]=new CKEDITOR.style(f,p);l[r]._.definition.name=r}else k.splice(h--,1)}b.ui.addRichCombo(c,{label:g.label,title:g.panelTitle,className:"cke_"+(e=="size"?"fontSize":"font"),panel:{css:b.skin.editor.css.concat(d.contentsCss),multiSelect:false,attributes:{"aria-label":g.panelTitle}},init:function(){this.startGroup(g.panelTitle);for(var t=
0;t<k.length;t++){var n=k[t];this.add(n,l[n].buildPreview(),n)}},onClick:function(t){b.focus();b.fire("saveSnapshot");var n=l[t];this.getValue()==t?n.remove(b.document):n.apply(b.document);b.fire("saveSnapshot")},onRender:function(){b.on("selectionChange",function(t){var n=this.getValue();t=t.data.path.elements;for(var s=0,q;s<t.length;s++){q=t[s];for(var v in l)if(l[v].checkElementRemovable(q,true)){v!=n&&this.setValue(v);return}}this.setValue("",j)},this)}})}CKEDITOR.plugins.add("font",{requires:["richcombo",
"styles"],init:function(b){var c=b.config;a(b,"Font","family",b.lang.font,c.font_names,c.font_defaultLabel,c.font_style);a(b,"FontSize","size",b.lang.fontSize,c.fontSize_sizes,c.fontSize_defaultLabel,c.fontSize_style)}})})();CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif";
CKEDITOR.config.font_defaultLabel="";CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]};CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px";CKEDITOR.config.fontSize_defaultLabel="";CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]};
CKEDITOR.plugins.add("format",{requires:["richcombo","styles"],init:function(a){for(var b=a.config,c=a.lang.format,e=b.format_tags.split(";"),g={},h=0;h<e.length;h++){var j=e[h];g[j]=new CKEDITOR.style(b["format_"+j]);g[j]._.enterMode=a.config.enterMode}var f=b.format_disabled.split(";");a.ui.addRichCombo("Format",{label:c.label,title:c.panelTitle,className:"cke_format",panel:{css:a.skin.editor.css.concat(b.contentsCss),multiSelect:false,attributes:{"aria-label":c.panelTitle}},init:function(){this.startGroup(c.panelTitle);
for(var d in g){var k=c["tag_"+d];this.add(d,"<"+d+">"+k+"</"+d+">",k)}},onClick:function(d){a.focus();a.fire("saveSnapshot");d=g[d];var k=new CKEDITOR.dom.elementPath(a.getSelection().getStartElement());d[d.checkActive(k)?"remove":"apply"](a.document);setTimeout(function(){a.fire("saveSnapshot")},0)},onRender:function(){a.on("selectionChange",function(d){var k=this.getValue();d=d.data.path;if(jQuery.inArray(k,f)>-1)this.setState(CKEDITOR.TRISTATE_DISABLED);else{this.setState(CKEDITOR.TRISTATE_OFF);
for(var l in g)if(g[l].checkActive(d)){l!=k&&this.setValue(l,a.lang.format["tag_"+l]);return}this.setValue("")}},this)}})}});CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div";CKEDITOR.config.format_p={element:"p"};CKEDITOR.config.format_div={element:"div"};CKEDITOR.config.format_pre={element:"pre"};CKEDITOR.config.format_address={element:"address"};CKEDITOR.config.format_h1={element:"h1"};CKEDITOR.config.format_h2={element:"h2"};CKEDITOR.config.format_h3={element:"h3"};
CKEDITOR.config.format_h4={element:"h4"};CKEDITOR.config.format_h5={element:"h5"};CKEDITOR.config.format_h6={element:"h6"};CKEDITOR.config.format_disabled="li;dt;dd";
(function(){function a(o){for(var y=o.children.length,u=o.children[y-1];u&&u.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(u.value);)u=o.children[--y];return u}function b(o,y){var u=o.children,w=a(o);if(w){if((y||!CKEDITOR.env.ie)&&w.type==CKEDITOR.NODE_ELEMENT&&w.name=="br"&&typeof w.attributes["data-rte-washtml"]=="undefined")u.pop();w.type==CKEDITOR.NODE_TEXT&&m.test(w.value)&&u.pop()}}function c(o,y){return function(u){b(u,!o);var w;w=!o;if(!w&&(!y||typeof y=="function"&&y(u)===false))w=false;
else if(w&&CKEDITOR.env.ie&&(document.documentMode>7||u.name in CKEDITOR.dtd.tr||u.name in CKEDITOR.dtd.$listItem))w=false;else{w=a(u);w=!w||w&&u.name=="form"&&w.name=="input"}if(w)o||CKEDITOR.env.ie?u.add(new CKEDITOR.htmlParser.text(" ")):u.add(new CKEDITOR.htmlParser.element("br",{}))}}function e(o){o=o.attributes;if(o.contenteditable!="false")o["data-cke-editable"]=o.contenteditable?"true":1;o.contenteditable="false"}function g(o){o=o.attributes;switch(o["data-cke-editable"]){case "true":o.contenteditable=
"true";break;case "1":delete o.contenteditable}}function h(o){return o.replace(G,function(y,u,w){return"<"+u+w.replace(C,function(z,D){if(w.indexOf("data-cke-saved-"+D)==-1)return" data-cke-saved-"+z+" "+z;return z})+">"})}function j(o){return o.replace(A,function(y){return"<cke:encoded>"+encodeURIComponent(y)+"</cke:encoded>"})}function f(o){return o.replace(F,function(y,u){return decodeURIComponent(u)})}function d(o){return o.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(y){return"<\!--"+
p+"{C}"+encodeURIComponent(y).replace(/--/g,"%2D%2D")+"--\>"})}function k(o){return o.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(y,u){return decodeURIComponent(u)})}function l(o,y){var u=[],w=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,z=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(y);o=o.replace(/<\!--[\s\S]*?--\>/g,function(B){return"<\!--{cke_tempcomment}"+(u.push(B)-1)+"--\>"});for(var D=0;D<z.length;D++)o=o.replace(z[D],function(B){B=B.replace(w,function(E,
I,L){return u[L]});return"<\!--{cke_temp}"+(u.push(B)-1)+"--\>"});return o=o.replace(w,function(B,E,I){return"<\!--"+p+(E?"{C}":"")+encodeURIComponent(u[I]).replace(/--/g,"%2D%2D")+"--\>"})}var m=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,p="{cke_protected}",r=CKEDITOR.dtd,t=["caption","colgroup","col","thead","tfoot","tbody"],n=CKEDITOR.tools.extend({},r.$block,r.$listItem,r.$tableContent),s;for(s in n)"br"in r[s]||delete n[s];delete n.pre;var q={elements:{a:function(o){if((o=o.attributes)&&o["data-cke-saved-name"])o["class"]=
(o["class"]?o["class"]+" ":"")+"cke_anchor"}},attributeNames:[[/^on/,"data-cke-pa-on"]]},v={elements:{}};for(s in n)v.elements[s]=c();var x={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(o){var y=o.attributes;if(y){if(y["data-cke-temp"])return false;for(var u=["name","href","src"],w,z=0;z<u.length;z++){w="data-cke-saved-"+u[z];w in y&&delete y[u[z]]}}return o},table:function(o){o.children.sort(function(y,
u){return y.type==CKEDITOR.NODE_ELEMENT&&u.type==y.type?t.indexOf(y.name)>t.indexOf(u.name)?1:-1:0})},embed:function(o){var y=o.parent;if(y&&y.name=="object"){var u=y.attributes.width;y=y.attributes.height;u&&(o.attributes.width=u);y&&(o.attributes.height=y)}},param:function(o){o.children=[];o.isEmpty=true;return o},a:function(o){if(!(o.children.length||o.attributes.name||o.attributes["data-cke-saved-name"]))return false},span:function(o){o.attributes["class"]=="Apple-style-span"&&delete o.name},
pre:function(o){CKEDITOR.env.ie&&b(o)},html:function(o){delete o.attributes.contenteditable;delete o.attributes["class"]},body:function(o){delete o.attributes.spellcheck;delete o.attributes.contenteditable},style:function(o){var y=o.children[0];y&&y.value&&(y.value=CKEDITOR.tools.trim(y.value));if(!o.attributes.type)o.attributes.type="text/css"},title:function(o){var y=o.children[0];y&&(y.value=o.attributes["data-cke-title"]||"")}},attributes:{"class":function(o){return CKEDITOR.tools.ltrim(o.replace(/(?:^|\s+)cke_[^\s]*/g,
""))||false}},comment:function(o){if(o.substr(0,p.length)==p){o=o.substr(p.length,3)=="{C}"?o.substr(p.length+3):o.substr(p.length);return new CKEDITOR.htmlParser.cdata(decodeURIComponent(o))}return o}};if(CKEDITOR.env.ie)x.attributes.style=function(o){return o.replace(/(^|;)([^\:]+)/g,function(y){return y.toLowerCase()})};for(s in{input:1,textarea:1}){q.elements[s]=e;x.elements[s]=g}var G=/<(a|area|img|input)\b([^>]*)>/gi,C=/\b(href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,A=/(?:<style(?=[ >])[^>]*>[\s\S]*<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,
F=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,H=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,J=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,K=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;CKEDITOR.plugins.add("htmldataprocessor",{requires:["htmlwriter"],init:function(o){var y=o.dataProcessor=new CKEDITOR.htmlDataProcessor(o);y.writer.forceSimpleAmpersand=o.config.forceSimpleAmpersand;y.dataFilter.addRules(q);y.dataFilter.addRules(v);y.htmlFilter.addRules(x);var u={elements:{}};
for(s in n)u.elements[s]=c(true,o.config.fillEmptyBlocks);y.htmlFilter.addRules(u)},onLoad:function(){!("fillEmptyBlocks"in CKEDITOR.config)&&(CKEDITOR.config.fillEmptyBlocks=1)}});CKEDITOR.htmlDataProcessor=function(o){this.editor=o;this.writer=new CKEDITOR.htmlWriter;this.dataFilter=new CKEDITOR.htmlParser.filter;this.htmlFilter=new CKEDITOR.htmlParser.filter};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(o,y){o=l(o,this.editor.config.protectedSource);o=h(o);o=j(o);o=o.replace(H,"$1cke:$2");
o=o.replace(K,"<cke:$1$2></cke:$1>");o=o.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2");var u=new CKEDITOR.dom.element("div");u.setHtml("a"+o);o=u.getHtml().substr(1);o=o.replace(J,"$1$2");o=f(o);o=k(o);u=CKEDITOR.htmlParser.fragment.fromHtml(o,y);var w=new CKEDITOR.htmlParser.basicWriter;u.writeHtml(w,this.dataFilter);o=w.getHtml(true);return o=d(o)},toDataFormat:function(o,y){var u=this.writer,w=CKEDITOR.htmlParser.fragment.fromHtml(o,y);u.reset();w.writeHtml(u,this.htmlFilter);return u.getHtml(true)}}})();
(function(){CKEDITOR.plugins.add("iframe",{requires:["dialog","fakeobjects"],init:function(a){var b=a.lang.iframe;CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js");a.addCommand("iframe",new CKEDITOR.dialogCommand("iframe"));a.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}");a.ui.addButton("Iframe",{label:b.toolbar,command:"iframe"});
a.on("doubleclick",function(c){var e=c.data.element;if(e.is("img")&&e.data("cke-real-element-type")=="iframe")c.data.dialog="iframe"});a.addMenuItems&&a.addMenuItems({iframe:{label:b.title,command:"iframe",group:"image"}});a.contextMenu&&a.contextMenu.addListener(function(c){if(c&&c.is("img")&&c.data("cke-real-element-type")=="iframe")return{iframe:CKEDITOR.TRISTATE_OFF}})},afterInit:function(a){var b=a.dataProcessor;(b=b&&b.dataFilter)&&b.addRules({elements:{iframe:function(c){var e=a.createFakeParserElement(c,
"cke_iframe","iframe",true),g=e.attributes.style||"",h=c.attributes.width;c=c.attributes.height;if(typeof h!="undefined")g+="width:"+CKEDITOR.tools.cssLength(h)+";";if(typeof c!="undefined")g+="height:"+CKEDITOR.tools.cssLength(c)+";";e.attributes.style=g;return e}}})}})})();
(function(){function a(f){var d=f.editor,k=f.data.path,l=k.block?k.block.getName():"";if(/h\d/.test(l))return this.setState(CKEDITOR.TRISTATE_DISABLED);if(l=="p"){k=k.block.getStyle("text-align");if(k=="center"||k=="right")return this.setState(CKEDITOR.TRISTATE_DISABLED)}if((k=f.data.path)&&k.contains(g))return this.setState(CKEDITOR.TRISTATE_OFF);if(!this.useIndentClasses&&this.name=="indent")return this.setState(CKEDITOR.TRISTATE_OFF);k=f.data.path;f=k.block||k.blockLimit;if(!f)return this.setState(CKEDITOR.TRISTATE_DISABLED);
if(this.useIndentClasses){f=f.$.className.match(this.classNameRegex);k=0;if(f){f=f[1];k=this.indentClassMap[f]}if(this.name=="outdent"&&!k||this.name=="indent"&&k==d.config.indentClasses.length)return this.setState(CKEDITOR.TRISTATE_DISABLED)}else{d=parseInt(f.getStyle(c(f)),10);if(isNaN(d))d=0;if(d<=0)return this.setState(CKEDITOR.TRISTATE_DISABLED)}return this.setState(CKEDITOR.TRISTATE_OFF)}function b(f,d){this.name=d;if(this.useIndentClasses=f.config.indentClasses&&f.config.indentClasses.length>
0){this.classNameRegex=RegExp("(?:^|\\s+)("+f.config.indentClasses.join("|")+")(?=$|\\s)");this.indentClassMap={};for(var k=0;k<f.config.indentClasses.length;k++)this.indentClassMap[f.config.indentClasses[k]]=k+1}this.startDisabled=d=="outdent"}function c(f,d){return(d||f.getComputedStyle("direction"))=="ltr"?"margin-left":"margin-right"}function e(f){return f.type=CKEDITOR.NODE_ELEMENT&&f.is("li")}var g={ol:1,ul:1},h=CKEDITOR.dom.walker.whitespaces(true),j=CKEDITOR.dom.walker.bookmark(false,true);
b.prototype={exec:function(f){function d(C){for(var A=n.startContainer,F=n.endContainer;A&&!A.getParent().equals(C);)A=A.getParent();for(;F&&!F.getParent().equals(C);)F=F.getParent();if(A&&F){var H=A;A=[];for(var J=false;!J;){if(H.equals(F))J=true;A.push(H);H=H.getNext()}if(!(A.length<1)){H=C.getParents(true);for(F=0;F<H.length;F++)if(H[F].getName&&g[H[F].getName()]){C=H[F];break}H=m.name=="indent"?1:-1;F=A[0];A=A[A.length-1];J=CKEDITOR.plugins.list.listToArray(C,p);J[A.getCustomData("listarray_index")].toIndent=
true;var K=J[A.getCustomData("listarray_index")].indent;for(F=F.getCustomData("listarray_index");F<=A.getCustomData("listarray_index");F++){J[F].indent+=H;var o=J[F].parent;J[F].parent=new CKEDITOR.dom.element(o.getName(),o.getDocument())}for(F=A.getCustomData("listarray_index")+1;F<J.length&&J[F].indent>K;F++)J[F].indent+=H;A=CKEDITOR.plugins.list.arrayToList(J,p,null,f.config.enterMode,C.getDirection());if(m.name=="outdent"){var y;if((y=C.getParent())&&y.is("li")){H=A.listNode.getChildren();var u=
[],w;for(F=H.count()-1;F>=0;F--)if((w=H.getItem(F))&&w.is&&w.is("li"))u.push(w)}}A&&A.listNode.replace(C);if(u&&u.length)for(F=0;F<u.length;F++){for(w=C=u[F];(w=w.getNext())&&w.is&&w.getName()in g;){CKEDITOR.env.ie&&!C.getFirst(function(z){return h(z)&&j(z)})&&C.append(n.document.createText(" "));C.append(w)}C.insertAfter(y)}}}}function k(){var C=n.createIterator(),A=f.config.enterMode;C.enforceRealBlocks=true;C.enlargeBr=A!=CKEDITOR.ENTER_BR;for(var F;F=C.getNextParagraph(A==CKEDITOR.ENTER_P?"p":
"div");)l(F)}function l(C,A){if(C.getCustomData("indent_processed"))return false;if(m.useIndentClasses){var F=C.$.className.match(m.classNameRegex),H=0;if(F){F=F[1];H=m.indentClassMap[F]}if(m.name=="outdent")H--;else H++;if(H<0)return false;H=Math.min(H,f.config.indentClasses.length);H=Math.max(H,0);C.$.className=CKEDITOR.tools.ltrim(C.$.className.replace(m.classNameRegex,""));H>0&&C.addClass(f.config.indentClasses[H-1])}else{F=c(C,A);H=parseInt(C.getStyle(F),10);if(isNaN(H))H=0;var J=f.config.indentOffset||
40;H+=(m.name=="indent"?1:-1)*J;if(H<0)return false;H=Math.max(H,0);H=Math.ceil(H/J)*J;C.setStyle(F,H?H+(f.config.indentUnit||"px"):"");C.getAttribute("style")===""&&C.removeAttribute("style")}CKEDITOR.dom.element.setMarker(p,C,"indent_processed",1);return true}for(var m=this,p={},r=f.getSelection(),t=r.createBookmarks(1),n,s=(r&&r.getRanges(1)).createIterator();n=s.getNextRange();){for(var q=n.getCommonAncestor();q&&!(q.type==CKEDITOR.NODE_ELEMENT&&g[q.getName()]);)q=q.getParent();if(!q){var v=n.getEnclosedNode();
if(v&&v.type==CKEDITOR.NODE_ELEMENT&&v.getName()in g){n.setStartAt(v,CKEDITOR.POSITION_AFTER_START);n.setEndAt(v,CKEDITOR.POSITION_BEFORE_END);q=v}}if(q&&n.startContainer.type==CKEDITOR.NODE_ELEMENT&&n.startContainer.getName()in g){v=new CKEDITOR.dom.walker(n);v.evaluator=e;n.startContainer=v.next()}if(q&&n.endContainer.type==CKEDITOR.NODE_ELEMENT&&n.endContainer.getName()in g){v=new CKEDITOR.dom.walker(n);v.evaluator=e;n.endContainer=v.previous()}if(q){v=q.getFirst(e);var x=!!v.getNext(e),G=n.startContainer;
(v.equals(G)||v.contains(G))&&(m.name=="indent"||m.useIndentClasses||parseInt(q.getStyle(c(q)),10))&&l(q,!x&&v.getDirection())||d(q)}else k()}CKEDITOR.dom.element.clearAllMarkers(p);f.forceNextSelectionCheck();r.selectBookmarks(t)}};CKEDITOR.plugins.add("indent",{init:function(f){var d=f.addCommand("indent",new b(f,"indent")),k=f.addCommand("outdent",new b(f,"outdent"));f.ui.addButton("Indent",{label:f.lang.indent,command:"indent"});f.ui.addButton("Outdent",{label:f.lang.outdent,command:"outdent"});
f.on("selectionChange",CKEDITOR.tools.bind(a,d));f.on("selectionChange",CKEDITOR.tools.bind(a,k));if(CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat)f.addCss("ul,ol{\tmargin-left: 0px;\tpadding-left: 40px;}");f.on("dirChanged",function(l){var m=new CKEDITOR.dom.range(f.document);m.setStartBefore(l.data.node);m.setEndAfter(l.data.node);for(var p=new CKEDITOR.dom.walker(m),r;r=p.next();)if(r.type==CKEDITOR.NODE_ELEMENT)if(!r.equals(l.data.node)&&r.getDirection()){m.setStartAfter(r);p=new CKEDITOR.dom.walker(m)}else{var t=
f.config.indentClasses;if(t)for(var n=l.data.dir=="ltr"?["_rtl",""]:["","_rtl"],s=0;s<t.length;s++)if(r.hasClass(t[s]+n[0])){r.removeClass(t[s]+n[0]);r.addClass(t[s]+n[1])}t=r.getStyle("margin-right");n=r.getStyle("margin-left");t?r.setStyle("margin-left",t):r.removeStyle("margin-left");n?r.setStyle("margin-right",n):r.removeStyle("margin-right")}})},requires:["domiterator","list"]})})();
CKEDITOR.plugins.add("keystrokes",{beforeInit:function(a){a.keystrokeHandler=new CKEDITOR.keystrokeHandler(a);a.specialKeys={}},init:function(a){var b=a.config.keystrokes,c=a.config.blockedKeystrokes,e=a.keystrokeHandler.keystrokes;a=a.keystrokeHandler.blockedKeystrokes;for(var g=0;g<b.length;g++)e[b[g][0]]=b[g][1];for(g=0;g<c.length;g++)a[c[g]]=1}});
CKEDITOR.keystrokeHandler=function(a){if(a.keystrokeHandler)return a.keystrokeHandler;this.keystrokes={};this.blockedKeystrokes={};this._={editor:a};return this};
(function(){var a,b=function(e){e=e.data;var g=e.getKeystroke(),h=this.keystrokes[g],j=this._.editor;a=j.fire("key",{keyCode:g})===true;if(!a){if(h)a=j.execCommand(h,{from:"keystrokeHandler"})!==false;if(!a)(a=(h=j.specialKeys[g])&&h(j)===true)||(a=!!this.blockedKeystrokes[g])}a&&e.preventDefault(true);return!a},c=function(e){if(a){a=false;e.data.preventDefault(true)}};CKEDITOR.keystrokeHandler.prototype={attach:function(e){e.on("keydown",b,this);if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)e.on("keypress",
c,this)}}})();CKEDITOR.config.blockedKeystrokes=[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85];
CKEDITOR.config.keystrokes=[[CKEDITOR.ALT+121,"toolbarFocus"],[CKEDITOR.ALT+122,"elementsPathFocus"],[CKEDITOR.SHIFT+121,"contextMenu"],[CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu"],[CKEDITOR.CTRL+90,"undo"],[CKEDITOR.CTRL+89,"redo"],[CKEDITOR.CTRL+CKEDITOR.SHIFT+90,"redo"],[CKEDITOR.CTRL+76,"link"],[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"],[CKEDITOR.ALT+109,"toolbarCollapse"],[CKEDITOR.ALT+48,"a11yHelp"]];
(function(){function a(s){var q=s.data.path;s=q.blockLimit;var v=q.elements,x;if(/h\d/.test(q.block?q.block.getName():""))return this.setState(CKEDITOR.TRISTATE_DISABLED);for(q=0;q<v.length&&(x=v[q])&&!x.equals(s);q++)if(j[v[q].getName()])return this.setState(this.type==v[q].getName()?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);return this.setState(CKEDITOR.TRISTATE_OFF)}function b(s,q,v,x){for(var G=CKEDITOR.plugins.list.listToArray(q.root,v),C=[],A=0;A<q.contents.length;A++){var F=q.contents[A];
F=F.getAscendant("li",true);if(!(!F||F.getCustomData("list_item_processed"))){C.push(F);CKEDITOR.dom.element.setMarker(v,F,"list_item_processed",true)}}A=q.root;F=A.getDocument().createElement(this.type);A.copyAttributes(F,{start:1,type:1});F.removeStyle("list-style-type");for(A=0;A<C.length;A++){var H=C[A].getCustomData("listarray_index");G[H].parent=F}s=CKEDITOR.plugins.list.arrayToList(G,v,null,s.config.enterMode);var J;v=s.listNode.getChildCount();for(A=0;A<v&&(J=s.listNode.getChild(A));A++)J.getName()==
this.type&&x.push(J);s.listNode.replace(q.root)}function c(s,q,v){var x=q.contents,G=q.root.getDocument(),C=[];if(x.length==1&&x[0].equals(q.root)){var A=G.createElement("div");x[0].moveChildren&&x[0].moveChildren(A);x[0].append(A);x[0]=A}q=q.contents[0].getParent();for(A=0;A<x.length;A++)q=q.getCommonAncestor(x[A].getParent());var F=s.config.useComputedState,H,J;F=F===undefined||F;for(A=0;A<x.length;A++)for(var K=x[A],o;o=K.getParent();){if(o.equals(q)){C.push(K);if(!J&&K.getDirection())J=1;K=K.getDirection(F);
if(H!==null)H=H&&H!=K?null:K;break}K=o}if(!(C.length<1)){x=C[C.length-1].getNext();A=G.createElement(this.type);s.fire("listCreated",{listNode:A});for(v.push(A);C.length;){s=C.shift();v=G.createElement("li");if(s.is("pre")||l.test(s.getName()))s.appendTo(v);else{if(H&&s.getDirection()){s.removeStyle("direction");s.removeAttribute("dir")}s.copyAttributes(v);s.moveChildren(v);s.remove()}v.appendTo(A)}H&&J&&A.setAttribute("dir",H);x?A.insertBefore(x):A.appendTo(q)}}function e(s,q,v){function x(o){if((J=
H[o?"getFirst":"getLast"]())&&!(J.is&&J.isBlockBoundary())&&(K=q.root[o?"getPrevious":"getNext"](CKEDITOR.dom.walker.whitespaces(true)))&&!(K.is&&K.isBlockBoundary({br:1})))s.document.createElement("br")[o?"insertBefore":"insertAfter"](J)}for(var G=CKEDITOR.plugins.list.listToArray(q.root,v),C=[],A=0;A<q.contents.length;A++){var F=q.contents[A];F=F.getAscendant("li",true);if(!(!F||F.getCustomData("list_item_processed"))){C.push(F);CKEDITOR.dom.element.setMarker(v,F,"list_item_processed",true)}}F=
null;for(A=0;A<C.length;A++){F=C[A].getCustomData("listarray_index");G[F].indent=-1}for(A=F+1;A<G.length;A++)if(G[A].indent>G[A-1].indent+1){C=G[A-1].indent+1-G[A].indent;for(F=G[A].indent;G[A]&&G[A].indent>=F;){G[A].indent+=C;A++}A--}var H=CKEDITOR.plugins.list.arrayToList(G,v,null,s.config.enterMode,q.root.getAttribute("dir")).listNode,J,K;x(true);x();H.replace(q.root)}function g(s,q){this.name=s;this.type=q}function h(s){return function(q){var v=q.children;a:{for(var x=q.children,G=x.length,C=
0;C<G;C++){q=x[C];if(q.name&&q.name in m.$list){q=C;break a}}q=G}x=(x=v[q])&&x.previous;var A;if(x&&(x.name&&x.name=="br"||x.value&&(A=x.value.match(p))))if(!(A&&A.index)&&x==v[0])v[0]=s||CKEDITOR.env.ie?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{});else if(x.name=="br")v.splice(q-1,1);else x.value=x.value.replace(p,"")}}var j={ol:1,ul:1},f=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(),k=function(s){return!(f(s)||d(s))};CKEDITOR.plugins.list={listToArray:function(s,
q,v,x,G){if(!j[s.getName()])return[];x||(x=0);v||(v=[]);for(var C=0,A=s.getChildCount();C<A;C++){var F=s.getChild(C);if(F.$.nodeName.toLowerCase()=="li"){var H={parent:s,indent:x,element:F,contents:[]};if(G)H.grandparent=G;else{H.grandparent=s.getParent();if(H.grandparent&&H.grandparent.$.nodeName.toLowerCase()=="li")H.grandparent=H.grandparent.getParent()}q&&CKEDITOR.dom.element.setMarker(q,F,"listarray_index",v.length);v.push(H);for(var J=0,K=F.getChildCount(),o;J<K;J++){o=F.getChild(J);o.type==
CKEDITOR.NODE_ELEMENT&&j[o.getName()]?CKEDITOR.plugins.list.listToArray(o,q,v,x+1,H.grandparent):H.contents.push(o)}}}return v},arrayToList:function(s,q,v,x,G){v||(v=0);if(!s||s.length<v+1)return null;for(var C=s[v].parent.getDocument(),A=new CKEDITOR.dom.documentFragment(C),F=null,H=v,J=Math.max(s[v].indent,0),K=null,o=x==CKEDITOR.ENTER_P?"p":"div";;){var y=s[H];if(y.indent==J){if(!F||s[H].parent.getName()!=F.getName()){F=s[H].parent.clone(false,1);if(y.toIndent){F.removeAttribute("data-rte-empty-lines-before");
F.setAttribute("data-rte-new-node",true)}G&&F.setAttribute("dir",G);A.append(F)}K=F.append(y.element.clone(0,1));for(var u=0;u<y.contents.length;u++)K.append(y.contents[u].clone(1,1));H++}else if(y.indent==Math.max(J,0)+1){H=CKEDITOR.plugins.list.arrayToList(s,null,H,x);!K.getChildCount()&&CKEDITOR.env.ie&&!(C.$.documentMode>7)&&K.append(C.createText(" "));K.append(H.listNode);H=H.nextIndex}else if(y.indent==-1&&!v&&y.grandparent){if(j[y.grandparent.getName()])K=y.element.clone(false,true);else if(G||
y.element.hasAttributes()||x!=CKEDITOR.ENTER_BR){K=C.createElement(o);y.element.copyAttributes(K,{type:1,value:1});(F=y.element.getDirection()||G)&&K.setAttribute("dir",F);if(!G&&x==CKEDITOR.ENTER_BR&&!K.hasAttributes())K=new CKEDITOR.dom.documentFragment(C)}else K=new CKEDITOR.dom.documentFragment(C);for(u=0;u<y.contents.length;u++)K.append(y.contents[u].clone(1,1));if(K.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&H!=s.length-1){(F=K.getLast())&&F.type==CKEDITOR.NODE_ELEMENT&&F.getAttribute("type")==
"_moz"&&F.remove();K.getLast(k)&&F.type==CKEDITOR.NODE_ELEMENT&&F.getName()in CKEDITOR.dtd.$block||K.append(C.createElement("br"))}if(K.type==CKEDITOR.NODE_ELEMENT&&K.getName()==o&&K.$.firstChild){K.trim();F=K.getFirst();if(F.type==CKEDITOR.NODE_ELEMENT&&F.isBlockBoundary()){F=new CKEDITOR.dom.documentFragment(C);K.moveChildren(F);K=F}}F=K.$.nodeName.toLowerCase();if(!CKEDITOR.env.ie&&(F=="div"||F=="p"))K.appendBogus();A.append(K);F=null;H++}else return null;if(s.length<=H||Math.max(s[H].indent,0)<
J)break}if(q)for(s=A.getFirst();s;){s.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dom.element.clearMarkers(q,s);s=s.getNextSourceNode()}return{listNode:A,nextIndex:H}}};var l=/^h[1-6]$/;g.prototype={exec:function(s){s.focus();var q=s.document,v=s.getSelection(),x=v&&v.getRanges(CKEDITOR.ONLY_FORMATTABLES);if(!(!x||x.length<1)){if(this.state==CKEDITOR.TRISTATE_OFF){var G=q.getBody();G.trim();if(G.getFirst()){var C=x.length==1&&x[0];(q=C&&C.getEnclosedNode())&&q.is&&this.type==q.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else{var A=
q.createElement(s.config.enterMode==CKEDITOR.ENTER_P?"p":s.config.enterMode==CKEDITOR.ENTER_DIV?"div":"br");A.appendTo(G);x=new CKEDITOR.dom.rangeList([new CKEDITOR.dom.range(q)]);if(A.is("br")){x[0].setStartBefore(A);x[0].setEndAfter(A)}else x[0].selectNodeContents(A);v.selectRanges(x)}}q=v.createBookmarks(true);A=[];G={};x=x.createIterator();for(var F=0;(C=x.getNextRange())&&++F;){var H=C.getBoundaryNodes(),J=H.startNode,K=H.endNode;J.type==CKEDITOR.NODE_ELEMENT&&J.getName()=="td"&&C.setStartAt(H.startNode,
CKEDITOR.POSITION_AFTER_START);K.type==CKEDITOR.NODE_ELEMENT&&K.getName()=="td"&&C.setEndAt(H.endNode,CKEDITOR.POSITION_BEFORE_END);C=C.createIterator();for(C.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;H=C.getNextParagraph();)if(!H.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(G,H,"list_block",1);J=new CKEDITOR.dom.elementPath(H);K=J.elements;var o=null,y=0,u=J.blockLimit,w;for(J=K.length-1;J>=0&&(w=K[J]);J--)if(j[w.getName()]&&u.contains(w)){u.removeCustomData("list_group_object_"+
F);if(J=w.getCustomData("list_group_object"))J.contents.push(H);else{J={root:w,contents:[H]};A.push(J);CKEDITOR.dom.element.setMarker(G,w,"list_group_object",J)}y=1;break}if(!y){K=u;if(K.getCustomData("list_group_object_"+F))K.getCustomData("list_group_object_"+F).contents.push(H);else{J={root:K,contents:[H]};CKEDITOR.dom.element.setMarker(G,K,"list_group_object_"+F,J);A.push(J)}}}}for(w=[];A.length>0;){J=A.shift();if(this.state==CKEDITOR.TRISTATE_OFF)j[J.root.getName()]?b.call(this,s,J,G,w):c.call(this,
s,J,w);else this.state==CKEDITOR.TRISTATE_ON&&j[J.root.getName()]&&e.call(this,s,J,G)}for(J=0;J<w.length;J++){o=w[J];var z=this;(A=function(D){var B=o[D?"getPrevious":"getNext"](CKEDITOR.dom.walker.whitespaces(true));if(B&&B.getName&&B.getName()==z.type){B.remove();B.moveChildren(o,D)}})();A(1)}CKEDITOR.dom.element.clearAllMarkers(G);v.selectBookmarks(q);s.focus()}}};var m=CKEDITOR.dtd,p=/[\t\r\n ]*(?:&nbsp;|\xa0)$/,r={elements:{}},t;for(t in m.$listItem)r.elements[t]=h();var n={elements:{}};for(t in m.$listItem)n.elements[t]=
h(true);CKEDITOR.plugins.add("list",{init:function(s){var q=s.addCommand("numberedlist",new g("numberedlist","ol")),v=s.addCommand("bulletedlist",new g("bulletedlist","ul"));s.ui.addButton("NumberedList",{label:s.lang.numberedlist,command:"numberedlist"});s.ui.addButton("BulletedList",{label:s.lang.bulletedlist,command:"bulletedlist"});s.on("selectionChange",CKEDITOR.tools.bind(a,q));s.on("selectionChange",CKEDITOR.tools.bind(a,v))},afterInit:function(s){if(s=s.dataProcessor){s.dataFilter.addRules(r);
s.htmlFilter.addRules(n)}},requires:["domiterator"]})})();
(function(){CKEDITOR.plugins.add("pastefromword",{init:function(a){var b=0,c=function(){setTimeout(function(){b=0},0)};a.addCommand("pastefromword",{canUndo:false,exec:function(){b=1;if(a.execCommand("paste")===false)a.on("dialogHide",function(e){e.removeListener();c()});else c()}});a.ui.addButton("PasteFromWord",{label:a.lang.pastefromword.toolbar,command:"pastefromword"});a.on("pasteState",function(e){a.getCommand("pastefromword").setState(e.data)});a.on("paste",function(e){var g=e.data,h;if((h=
g.html)&&(b||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(h))){var j=this.loadFilterRules(function(){if(j)a.fire("paste",g);else if(!a.config.pasteFromWordPromptCleanup||b||confirm(a.lang.pastefromword.confirmCleanup))g.html=CKEDITOR.cleanWord(h,a)});j&&e.cancel()}},this)},loadFilterRules:function(a){var b=CKEDITOR.cleanWord;if(b)a();else{var c=CKEDITOR.getUrl(CKEDITOR.config.pasteFromWordCleanupFile||this.path+"filter/default.js");CKEDITOR.scriptLoader.load(c,a,null,true)}return!b},
requires:["clipboard"]})})();
(function(){var a={exec:function(b){var c=CKEDITOR.tools.tryThese(function(){var e=window.clipboardData.getData("Text");if(!e)throw 0;return e});if(c)b.fire("paste",{text:c});else{b.openDialog("pastetext");return false}return true}};CKEDITOR.plugins.add("pastetext",{init:function(b){b.addCommand("pastetext",a);b.ui.addButton("PasteText",{label:b.lang.pasteText.button,command:"pastetext"});CKEDITOR.dialog.add("pastetext",CKEDITOR.getUrl(this.path+"dialogs/pastetext.js"));if(b.config.forcePasteAsPlainText)b.on("beforeCommandExec",
function(c){if(c.data.name=="paste"){b.execCommand("pastetext");c.cancel()}},null,null,0);b.on("pasteState",function(c){b.getCommand("pastetext").setState(c.data)})},requires:["clipboard"]})})();CKEDITOR.plugins.add("popup");
CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(a,b,c,e){b=b||"80%";c=c||"70%";if(typeof b=="string"&&b.length>1&&b.substr(b.length-1,1)=="%")b=parseInt(window.screen.width*parseInt(b,10)/100,10);if(typeof c=="string"&&c.length>1&&c.substr(c.length-1,1)=="%")c=parseInt(window.screen.height*parseInt(c,10)/100,10);if(b<640)b=640;if(c<420)c=420;var g=parseInt((window.screen.height-c)/2,10),h=parseInt((window.screen.width-b)/2,10);e=(e||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+
",width="+b+",height="+c+",top="+g+",left="+h;var j=window.open("",null,e,true);if(!j)return false;try{j.moveTo(h,g);j.resizeTo(b,c);j.focus();j.location.href=a}catch(f){window.open(a,null,e,true)}return true}});
(function(){var a={modes:{wysiwyg:1,source:1},canUndo:false,exec:function(b){var c=b.config,e=c.baseHref?'<base href="'+c.baseHref+'"/>':"",g=CKEDITOR.env.isCustomDomain();if(c.fullPage)b=b.getData().replace(/<head>/,"$&"+e).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+b.lang.preview);else{c="<body ";var h=b.document&&b.document.getBody();if(h){if(h.getAttribute("id"))c+='id="'+h.getAttribute("id")+'" ';if(h.getAttribute("class"))c+='class="'+h.getAttribute("class")+'" '}c+=">";b=b.config.docType+'<html dir="'+
b.config.contentsLangDirection+'"><head>'+e+"<title>"+b.lang.preview+"</title>"+CKEDITOR.tools.buildStyleHtml(b.config.contentsCss)+"</head>"+c+b.getData()+"</body></html>"}e=640;c=420;h=80;try{var j=window.screen;e=Math.round(j.width*0.8);c=Math.round(j.height*0.7);h=Math.round(j.width*0.1)}catch(f){}j="";if(g){window._cke_htmlToLoad=b;j='javascript:void( (function(){document.open();document.domain="'+document.domain+'";document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )'}j=
window.open(j,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+e+",height="+c+",left="+h);if(!g){j.document.open();j.document.write(b);j.document.close()}}};CKEDITOR.plugins.add("preview",{init:function(b){b.addCommand("preview",a);b.ui.addButton("Preview",{label:b.lang.preview,command:"preview"})}})})();CKEDITOR.plugins.add("print",{init:function(a){a.addCommand("print",CKEDITOR.plugins.print);a.ui.addButton("Print",{label:a.lang.print,command:"print"})}});
CKEDITOR.plugins.print={exec:function(a){CKEDITOR.env.opera||(CKEDITOR.env.gecko?a.window.$.print():a.document.$.execCommand("Print"))},canUndo:false,modes:{wysiwyg:!CKEDITOR.env.opera}};CKEDITOR.plugins.add("removeformat",{requires:["selection"],init:function(a){a.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);a.ui.addButton("RemoveFormat",{label:a.lang.removeFormat,command:"removeFormat"});a._.removeFormat={filters:[]}}});
CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(a){for(var b=a._.removeFormatRegex||(a._.removeFormatRegex=RegExp("^(?:"+a.config.removeFormatTags.replace(/,/g,"|")+")$","i")),c=a._.removeAttributes||(a._.removeAttributes=a.config.removeFormatAttributes.split(",")),e=CKEDITOR.plugins.removeformat.filter,g=a.getSelection().getRanges(1),h=g.createIterator(),j;j=h.getNextRange();){j.collapsed||j.enlarge(CKEDITOR.ENLARGE_ELEMENT);var f=j.createBookmark(),d=f.startNode,k=f.endNode,
l=function(m){for(var p=new CKEDITOR.dom.elementPath(m),r=p.elements,t=1,n;n=r[t];t++){if(n.equals(p.block)||n.equals(p.blockLimit))break;b.test(n.getName())&&e(a,n)&&m.breakParent(n)}};l(d);if(k){l(k);for(d=d.getNextSourceNode(true,CKEDITOR.NODE_ELEMENT);d;){if(d.equals(k))break;l=d.getNextSourceNode(false,CKEDITOR.NODE_ELEMENT);if(!(d.getName()=="img"&&d.data("cke-realelement"))&&e(a,d))if(b.test(d.getName()))d.remove(1);else{d.removeAttributes(c);a.fire("removeFormatCleanup",d)}d=l}}j.moveToBookmark(f)}a.getSelection().selectRanges(g)}}},
filter:function(a,b){for(var c=a._.removeFormat.filters,e=0;e<c.length;e++)if(c[e](b)===false)return false;return true}};CKEDITOR.editor.prototype.addRemoveFormatFilter=function(a){this._.removeFormat.filters.push(a)};CKEDITOR.config.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var";CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign";
CKEDITOR.plugins.add("resize",{init:function(a){var b=a.config;!b.resize_dir&&(b.resize_dir="both");b.resize_maxWidth==undefined&&(b.resize_maxWidth=3E3);b.resize_maxHeight==undefined&&(b.resize_maxHeight=3E3);b.resize_minWidth==undefined&&(b.resize_minWidth=750);b.resize_minHeight==undefined&&(b.resize_minHeight=250);if(b.resize_enabled!==false){var c=null,e,g,h=(b.resize_dir=="both"||b.resize_dir=="horizontal")&&b.resize_minWidth!=b.resize_maxWidth,j=(b.resize_dir=="both"||b.resize_dir=="vertical")&&
b.resize_minHeight!=b.resize_maxHeight,f=function(l){var m=g.width,p=g.height,r=m+(l.data.$.screenX-e.x)*(a.lang.dir=="rtl"?-1:1);l=p+(l.data.$.screenY-e.y);if(h)m=Math.max(b.resize_minWidth,Math.min(r,b.resize_maxWidth));if(j)p=Math.max(b.resize_minHeight,Math.min(l,b.resize_maxHeight));a.resize(m,p)},d=function(){CKEDITOR.document.removeListener("mousemove",f);CKEDITOR.document.removeListener("mouseup",d);if(a.document){a.document.removeListener("mousemove",f);a.document.removeListener("mouseup",
d)}},k=CKEDITOR.tools.addFunction(function(l){c||(c=a.getResizable());g={width:c.$.offsetWidth||0,height:c.$.offsetHeight||0};e={x:l.screenX,y:l.screenY};b.resize_minWidth>g.width&&(b.resize_minWidth=g.width);b.resize_minHeight>g.height&&(b.resize_minHeight=g.height);CKEDITOR.document.on("mousemove",f);CKEDITOR.document.on("mouseup",d);if(a.document){a.document.on("mousemove",f);a.document.on("mouseup",d)}});a.on("destroy",function(){CKEDITOR.tools.removeFunction(k)});a.on("themeSpace",function(l){if(l.data.space==
"bottom"){var m="";if(h&&!j)m=" cke_resizer_horizontal";if(!h&&j)m=" cke_resizer_vertical";l.data.html+='<div class="cke_resizer'+m+'" title="'+CKEDITOR.tools.htmlEncode(a.lang.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+k+', event)"></div>'}},a,null,100)}}});
CKEDITOR.plugins.add("smiley",{requires:["dialog"],init:function(a){a.config.smiley_path=a.config.smiley_path||this.path+"images/";a.addCommand("smiley",new CKEDITOR.dialogCommand("smiley"));a.ui.addButton("Smiley",{label:a.lang.smiley.toolbar,command:"smiley"});CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}});
CKEDITOR.config.smiley_images=["regular_smile.gif","sad_smile.gif","wink_smile.gif","teeth_smile.gif","confused_smile.gif","tounge_smile.gif","embaressed_smile.gif","omg_smile.gif","whatchutalkingabout_smile.gif","angry_smile.gif","angel_smile.gif","shades_smile.gif","devil_smile.gif","cry_smile.gif","lightbulb.gif","thumbs_down.gif","thumbs_up.gif","heart.gif","broken_heart.gif","kiss.gif","envelope.gif"];
CKEDITOR.config.smiley_descriptions=["smiley","sad","wink","laugh","frown","cheeky","blush","surprise","indecision","angry","angel","cool","devil","crying","enlightened","no","yes","heart","broken heart","kiss","mail"];
(function(){var a=/%1/g,b=/%2/g,c=/%3/g,e={preserveState:true,editorFocus:false,exec:function(g){this.toggleState();this.refresh(g)},refresh:function(g){var h=this.state==CKEDITOR.TRISTATE_ON?"addClass":"removeClass";g.document.getBody()[h]("cke_show_blocks")}};CKEDITOR.plugins.add("showblocks",{requires:["wysiwygarea"],init:function(g){var h=g.addCommand("showblocks",e);h.canUndo=false;g.config.startupOutlineBlocks&&h.setState(CKEDITOR.TRISTATE_ON);g.addCss(".%2 p,.%2 div,.%2 pre,.%2 address,.%2 blockquote,.%2 h1,.%2 h2,.%2 h3,.%2 h4,.%2 h5,.%2 h6{background-repeat: no-repeat;background-position: top %3;border: 1px dotted gray;padding-top: 8px;padding-%3: 8px;}.%2 p{%1p.png);}.%2 div{%1div.png);}.%2 pre{%1pre.png);}.%2 address{%1address.png);}.%2 blockquote{%1blockquote.png);}.%2 h1{%1h1.png);}.%2 h2{%1h2.png);}.%2 h3{%1h3.png);}.%2 h4{%1h4.png);}.%2 h5{%1h5.png);}.%2 h6{%1h6.png);}".replace(a,
"background-image: url("+CKEDITOR.getUrl(this.path)+"images/block_").replace(b,"cke_show_blocks ").replace(c,g.lang.dir=="rtl"?"right":"left"));g.ui.addButton("ShowBlocks",{label:g.lang.showBlocks,command:"showblocks"});g.on("mode",function(){h.state!=CKEDITOR.TRISTATE_DISABLED&&h.refresh(g)});g.on("contentDom",function(){h.state!=CKEDITOR.TRISTATE_DISABLED&&h.refresh(g)})}})})();
(function(){var a;a=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th,","{","border : #d3d3d3 1px dotted","}"]:[".%1 table.%2,",".%1 table.%2 > tr > td, .%1 table.%2 > tr > th,",".%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,",".%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,",".%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th","{","border : #d3d3d3 1px dotted","}"]).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders ");
var b={preserveState:true,editorFocus:false,exec:function(c){this.toggleState();this.refresh(c)},refresh:function(c){var e=this.state==CKEDITOR.TRISTATE_ON?"addClass":"removeClass";c.document.getBody()[e]("cke_show_borders")}};CKEDITOR.plugins.add("showborders",{requires:["wysiwygarea"],modes:{wysiwyg:1},init:function(c){var e=c.addCommand("showborders",b);e.canUndo=false;c.config.startupShowBorders!==false&&e.setState(CKEDITOR.TRISTATE_ON);c.addCss(a);c.on("mode",function(){e.state!=CKEDITOR.TRISTATE_DISABLED&&
e.refresh(c)},null,null,100);c.on("contentDom",function(){e.state!=CKEDITOR.TRISTATE_DISABLED&&e.refresh(c)});c.on("removeFormatCleanup",function(g){g=g.data;if(c.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&g.is("table")&&(!g.hasAttribute("border")||parseInt(g.getAttribute("border"),10)<=0))g.addClass("cke_show_border")})},afterInit:function(c){var e=c.dataProcessor;c=e&&e.dataFilter;e=e&&e.htmlFilter;c&&c.addRules({elements:{table:function(g){g=g.attributes;var h=g["class"],j=parseInt(g.border,
10);if(!j||j<=0)g["class"]=(h||"")+" cke_show_border"}}});e&&e.addRules({elements:{table:function(g){g=g.attributes;var h=g["class"];h&&(g["class"]=h.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}});CKEDITOR.on("dialogDefinition",function(c){var e=c.data.name;if(e=="table"||e=="tableProperties"){c=c.data.definition;e=c.getContents("info").get("txtBorder");e.commit=CKEDITOR.tools.override(e.commit,function(g){return function(h,j){g.apply(this,arguments);var f=parseInt(this.getValue(),
10);j[!f||f<=0?"addClass":"removeClass"]("cke_show_border")}});if(c=(c=c.getContents("advanced"))&&c.get("advCSSClasses")){c.setup=CKEDITOR.tools.override(c.setup,function(g){return function(){g.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,""))}});c.commit=CKEDITOR.tools.override(c.commit,function(g){return function(h,j){g.apply(this,arguments);parseInt(j.getAttribute("border"),10)||j.addClass("cke_show_border")}})}}})})();
CKEDITOR.plugins.add("sourcearea",{requires:["editingblock"],init:function(a){var b=CKEDITOR.plugins.sourcearea,c=CKEDITOR.document.getWindow();a.on("editingBlockReady",function(){var e,g;a.addMode("source",{load:function(h,j){CKEDITOR.env.ie&&CKEDITOR.env.version<8&&h.setStyle("position","relative");a.textarea=e=new CKEDITOR.dom.element("textarea");e.setAttributes({dir:"ltr",tabIndex:CKEDITOR.env.webkit?-1:a.tabIndex,role:"textbox","aria-label":a.lang.editorTitle.replace("%1",a.name)});e.addClass("cke_source");
e.addClass("cke_enable_context_menu");var f={width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"};if(CKEDITOR.env.ie){g=function(){e.hide();e.setStyle("height",h.$.clientHeight+"px");e.setStyle("width",h.$.clientWidth+"px");e.show()};a.on("resize",g);c.on("resize",g);setTimeout(g,0)}h.setHtml("");h.append(e);e.setStyles(f);a.fire("ariaWidget",e);e.on("blur",function(){a.focusManager.blur()});e.on("focus",function(){a.focusManager.focus()});a.mayBeDirty=
true;this.loadData(j);(f=a.keystrokeHandler)&&f.attach(e);setTimeout(function(){a.mode="source";a.fire("mode")},CKEDITOR.env.gecko||CKEDITOR.env.webkit?100:0)},loadData:function(h){e.setValue(h);a.fire("dataReady")},getData:function(){return e.getValue()},getSnapshotData:function(){return e.getValue()},unload:function(h){e.clearCustomData();a.textarea=e=null;if(g){a.removeListener("resize",g);c.removeListener("resize",g)}CKEDITOR.env.ie&&CKEDITOR.env.version<8&&h.removeStyle("position")},focus:function(){e.focus()}})});
a.addCommand("source",b.commands.source);a.ui.addButton&&a.ui.addButton("Source",{label:a.lang.source,command:"source"});a.on("mode",function(){a.getCommand("source").setState(a.mode=="source"?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)})}});
CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:false,exec:function(a){a.mode=="wysiwyg"&&a.fire("saveSnapshot");a.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);a.setMode(a.mode=="source"?"wysiwyg":"source")},canUndo:false}}};
(function(){function a(b,c){var e=b.type,g=c.type;return e==g?0:e==CKEDITOR.STYLE_OBJECT?-1:g==CKEDITOR.STYLE_OBJECT?1:g==CKEDITOR.STYLE_BLOCK?1:-1}CKEDITOR.plugins.add("stylescombo",{requires:["richcombo","styles"],init:function(b){function c(f){b.getStylesSet(function(d){if(!j.length){for(var k,l,m=0,p=d.length;m<p;m++){k=d[m];l=k.name;k=h[l]=new CKEDITOR.style(k);k._name=l;k._.enterMode=e.enterMode;j.push(k)}j.sort(a)}f&&f()})}var e=b.config,g=b.lang.stylesCombo,h={},j=[];b.ui.addRichCombo("Styles",
{label:g.label,title:g.panelTitle,className:"cke_styles",panel:{css:b.skin.editor.css.concat(e.contentsCss),multiSelect:true,attributes:{"aria-label":g.panelTitle}},init:function(){var f=this;c(function(){for(var d,k,l,m=0,p=j.length;m<p;m++){d=j[m];k=d._name;var r=d.type;if(r!=l){f.startGroup(g["panelTitle"+String(r)]);l=r}f.add(k,d.type==CKEDITOR.STYLE_OBJECT?k:d.buildPreview(),k)}f.commit();f.onOpen()})},onClick:function(f){b.focus();b.fire("saveSnapshot");f=h[f];var d=b.getSelection();d=new CKEDITOR.dom.elementPath(d.getStartElement());
f[f.checkActive(d)?"remove":"apply"](b.document);b.fire("saveSnapshot")},onRender:function(){b.on("selectionChange",function(f){var d=this.getValue();f=f.data.path.elements;for(var k=0,l=f.length,m;k<l;k++){m=f[k];for(var p in h)if(h[p].checkElementRemovable(m,true)){p!=d&&this.setValue(p);return}}this.setValue("")},this)},onOpen:function(){if(CKEDITOR.env.ie||CKEDITOR.env.webkit)b.focus();var f=b.getSelection(),d=f.getSelectedElement();f=new CKEDITOR.dom.elementPath(d||f.getStartElement());d=[0,
0,0,0];this.showAll();this.unmarkAll();for(var k in h){var l=h[k],m=l.type;if(l.checkActive(f))this.mark(k);else if(m==CKEDITOR.STYLE_OBJECT&&!l.checkApplicable(f)){this.hideItem(k);d[m]--}d[m]++}d[CKEDITOR.STYLE_BLOCK]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]);d[CKEDITOR.STYLE_INLINE]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_INLINE)]);d[CKEDITOR.STYLE_OBJECT]||this.hideGroup(g["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])}});b.on("instanceReady",function(){c()})}})})();
CKEDITOR.plugins.add("table",{init:function(a){var b=a.lang.table;a.addCommand("table",new CKEDITOR.dialogCommand("table"));a.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties"));a.ui.addButton("Table",{label:b.toolbar,command:"table"});CKEDITOR.dialog.add("table",this.path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js");a.addMenuItems&&a.addMenuItems({table:{label:b.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:b.deleteTable,
command:"tableDelete",group:"table",order:1}});a.on("doubleclick",function(c){if(c.data.element.is("table"))c.data.dialog="tableProperties"});a.contextMenu&&a.contextMenu.addListener(function(c){if(!c||c.isReadOnly())return null;if(c.hasAscendant("table",1))return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF};return null})}});
(function(){function a(n){function s(H){if(!(x.length>0))if(H.type==CKEDITOR.NODE_ELEMENT&&r.test(H.getName())&&!H.getCustomData("selected_cell")){CKEDITOR.dom.element.setMarker(G,H,"selected_cell",true);x.push(H)}}for(var q=n.createBookmarks(),v=n.getRanges(),x=[],G={},C=0;C<v.length;C++){var A=v[C];if(A.collapsed){A=A.getCommonAncestor();(A=A.getAscendant("td",true)||A.getAscendant("th",true))&&x.push(A)}else{A=new CKEDITOR.dom.walker(A);var F;for(A.guard=s;F=A.next();)if((F=F.getParent())&&r.test(F.getName())&&
!F.getCustomData("selected_cell")){CKEDITOR.dom.element.setMarker(G,F,"selected_cell",true);x.push(F)}}}CKEDITOR.dom.element.clearAllMarkers(G);n.selectBookmarks(q);return x}function b(n){for(var s=0,q=n.length-1,v={},x,G;x=n[s++];)CKEDITOR.dom.element.setMarker(v,x,"delete_cell",true);for(s=0;x=n[s++];)if((G=x.getPrevious())&&!G.getCustomData("delete_cell")||(G=x.getNext())&&!G.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(v);return G}CKEDITOR.dom.element.clearAllMarkers(v);
s=n[0].getParent();if(s=s.getPrevious())return s.getLast();s=n[q].getParent();if(s=s.getNext())return s.getChild(0);return null}function c(n,s){var q=a(n),v=q[0],x=v.getAscendant("table");v=v.getDocument();var G=q[0].getParent(),C=G.$.rowIndex;q=q[q.length-1];var A=q.getParent().$.rowIndex+q.$.rowSpan-1;q=new CKEDITOR.dom.element(x.$.rows[A]);C=s?C:A;G=s?G:q;q=CKEDITOR.tools.buildTableMap(x);x=q[C];C=s?q[C-1]:q[C+1];q=q[0].length;v=v.createElement("tr");for(A=0;A<q;A++){var F;if(x[A].rowSpan>1&&C&&
x[A]==C[A]){F=x[A];F.rowSpan+=1}else{F=(new CKEDITOR.dom.element(x[A])).clone();F.removeAttribute("rowSpan");!CKEDITOR.env.ie&&F.appendBogus();v.append(F);F=F.$}A+=F.colSpan-1}s?v.insertBefore(G):v.insertAfter(G)}function e(n){if(n instanceof CKEDITOR.dom.selection){var s=a(n),q=s[0].getAscendant("table"),v=CKEDITOR.tools.buildTableMap(q);n=s[0].getParent().$.rowIndex;s=s[s.length-1];var x=s.getParent().$.rowIndex+s.$.rowSpan-1;s=[];for(var G=n;G<=x;G++){for(var C=v[G],A=new CKEDITOR.dom.element(q.$.rows[G]),
F=0;F<C.length;F++){var H=new CKEDITOR.dom.element(C[F]),J=H.getParent().$.rowIndex;if(H.$.rowSpan==1)H.remove();else{H.$.rowSpan-=1;if(J==G){J=v[G+1];J[F-1]?H.insertAfter(new CKEDITOR.dom.element(J[F-1])):(new CKEDITOR.dom.element(q.$.rows[G+1])).append(H,1)}}F+=H.$.colSpan-1}s.push(A)}v=q.$.rows;q=new CKEDITOR.dom.element(v[n]||v[n-1]||q.$.parentNode);for(G=s.length;G>=0;G--)e(s[G]);return q}else if(n instanceof CKEDITOR.dom.element){q=n.getAscendant("table");q.$.rows.length==1?q.remove():n.remove()}return null}
function g(n,s){for(var q=s?Infinity:0,v=0;v<n.length;v++){var x;x=n[v];for(var G=s,C=x.getParent().$.cells,A=0,F=0;F<C.length;F++){var H=C[F];A+=G?1:H.colSpan;if(H==x.$)break}x=A-1;if(s?x<q:x>q)q=x}return q}function h(n,s){var q=a(n),v=q[0].getAscendant("table"),x=g(q,1);q=g(q);x=s?x:q;var G=CKEDITOR.tools.buildTableMap(v);v=[];q=[];for(var C=G.length,A=0;A<C;A++){v.push(G[A][x]);var F=s?G[A][x-1]:G[A][x+1];F&&q.push(F)}for(A=0;A<C;A++){if(v[A].colSpan>1&&q.length&&q[A]==v[A]){x=v[A];x.colSpan+=
1}else{x=(new CKEDITOR.dom.element(v[A])).clone();x.removeAttribute("colSpan");!CKEDITOR.env.ie&&x.appendBogus();x[s?"insertBefore":"insertAfter"].call(x,new CKEDITOR.dom.element(v[A]));x=x.$}A+=x.rowSpan-1}}function j(n,s){var q=n.getStartElement();if(q=q.getAscendant("td",1)||q.getAscendant("th",1)){var v=q.clone();CKEDITOR.env.ie||v.appendBogus();s?v.insertBefore(q):v.insertAfter(q)}}function f(n){if(n instanceof CKEDITOR.dom.selection){n=a(n);for(var s=n[0]&&n[0].getAscendant("table"),q=b(n),
v=n.length-1;v>=0;v--)f(n[v]);if(q)d(q,true);else s&&s.remove()}else if(n instanceof CKEDITOR.dom.element){s=n.getParent();s.getChildCount()==1?s.remove():n.remove()}}function d(n,s){var q=new CKEDITOR.dom.range(n.getDocument());if(!q["moveToElementEdit"+(s?"End":"Start")](n)){q.selectNodeContents(n);q.collapse(s?false:true)}q.select(true)}function k(n,s,q){n=n[s];if(typeof q=="undefined")return n;for(s=0;n&&s<n.length;s++)if(q.is&&n[s]==q.$)return s;else if(s==q)return new CKEDITOR.dom.element(n[s]);
return q.is?-1:null}function l(n,s,q){var v=a(n),x;if((s?v.length!=1:v.length<2)||(x=n.getCommonAncestor())&&x.type==CKEDITOR.NODE_ELEMENT&&x.is("table"))return false;var G;n=v[0];x=n.getAscendant("table");var C=CKEDITOR.tools.buildTableMap(x),A=C.length,F=C[0].length,H=n.getParent().$.rowIndex,J=k(C,H,n);if(s){var K;try{var o=parseInt(n.getAttribute("rowspan"),10)||1;G=parseInt(n.getAttribute("colspan"),10)||1;K=C[s=="up"?H-o:s=="down"?H+o:H][s=="left"?J-G:s=="right"?J+G:J]}catch(y){return false}if(!K||
n.$==K)return false;v[s=="up"||s=="left"?"unshift":"push"](new CKEDITOR.dom.element(K))}s=n.getDocument();var u=H;o=K=0;var w=!q&&new CKEDITOR.dom.documentFragment(s),z=0;for(s=0;s<v.length;s++){G=v[s];var D=G.getParent(),B=G.getFirst(),E=G.$.colSpan,I=G.$.rowSpan;D=D.$.rowIndex;var L=k(C,D,G);z+=E*I;o=Math.max(o,L-J+E);K=Math.max(K,D-H+I);if(!q){E=G;(I=E.getBogus())&&I.remove();E.trim();if(G.getChildren().count()){if(D!=u&&B&&!(B.isBlockBoundary&&B.isBlockBoundary({br:1})))(u=w.getLast(CKEDITOR.dom.walker.whitespaces(true)))&&
!(u.is&&u.is("br"))&&w.append("br");G.moveChildren(w)}s?G.remove():G.setHtml("")}u=D}if(q)return K*o==z;else{w.moveChildren(n);CKEDITOR.env.ie||n.appendBogus();if(o>=F)n.removeAttribute("rowSpan");else n.$.rowSpan=K;if(K>=A)n.removeAttribute("colSpan");else n.$.colSpan=o;q=new CKEDITOR.dom.nodeList(x.$.rows);v=q.count();for(s=v-1;s>=0;s--){x=q.getItem(s);if(!x.$.cells.length){x.remove();v++}}return n}}function m(n,s){var q=a(n);if(q.length>1)return false;else if(s)return true;q=q[0];var v=q.getParent(),
x=v.getAscendant("table"),G=CKEDITOR.tools.buildTableMap(x),C=v.$.rowIndex,A=k(G,C,q),F=q.$.rowSpan,H;if(F>1){H=Math.ceil(F/2);F=Math.floor(F/2);v=C+H;x=new CKEDITOR.dom.element(x.$.rows[v]);G=k(G,v);var J;v=q.clone();for(C=0;C<G.length;C++){J=G[C];if(J.parentNode==x.$&&C>A){v.insertBefore(new CKEDITOR.dom.element(J));break}else J=null}J||x.append(v,true)}else{F=H=1;x=v.clone();x.insertAfter(v);x.append(v=q.clone());J=k(G,C);for(A=0;A<J.length;A++)J[A].rowSpan++}CKEDITOR.env.ie||v.appendBogus();q.$.rowSpan=
H;v.$.rowSpan=F;H==1&&q.removeAttribute("rowSpan");F==1&&v.removeAttribute("rowSpan");return v}function p(n,s){var q=a(n);if(q.length>1)return false;else if(s)return true;q=q[0];var v=q.getParent(),x=v.getAscendant("table");x=CKEDITOR.tools.buildTableMap(x);var G=k(x,v.$.rowIndex,q),C=q.$.colSpan;if(C>1){v=Math.ceil(C/2);C=Math.floor(C/2)}else{C=v=1;for(var A=[],F=0;F<x.length;F++)A.push(x[F][G]);for(x=0;x<A.length;x++)A[x].colSpan++}x=q.clone();x.insertAfter(q);CKEDITOR.env.ie||x.appendBogus();q.$.colSpan=
v;x.$.colSpan=C;v==1&&q.removeAttribute("colSpan");C==1&&x.removeAttribute("colSpan");return x}var r=/^(?:td|th)$/,t={thead:1,tbody:1,tfoot:1,td:1,tr:1,th:1};CKEDITOR.plugins.tabletools={init:function(n){var s=n.lang.table;n.addCommand("cellProperties",new CKEDITOR.dialogCommand("cellProperties"));CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js");n.addCommand("tableDelete",{exec:function(q){var v=(q=q.getSelection())&&q.getStartElement();if(v=v&&v.getAscendant("table",1)){q.selectElement(v);
var x=q.getRanges()[0];x.collapse();q.selectRanges([x]);q=v.getParent();q.getChildCount()==1&&!q.is("body","td","th")?q.remove():v.remove()}}});n.addCommand("rowDelete",{exec:function(q){q=q.getSelection();d(e(q))}});n.addCommand("rowInsertBefore",{exec:function(q){q=q.getSelection();c(q,true)}});n.addCommand("rowInsertAfter",{exec:function(q){q=q.getSelection();c(q)}});n.addCommand("columnDelete",{exec:function(q){q=q.getSelection();q=a(q);var v=q[0],x=q[q.length-1];q=v.getAscendant("table");for(var G=
CKEDITOR.tools.buildTableMap(q),C,A,F=[],H=0,J=G.length;H<J;H++)for(var K=0,o=G[H].length;K<o;K++){if(G[H][K]==v.$)C=K;if(G[H][K]==x.$)A=K}for(H=C;H<=A;H++)for(K=0;K<G.length;K++){x=G[K];v=new CKEDITOR.dom.element(q.$.rows[K]);x=new CKEDITOR.dom.element(x[H]);if(x.$.colSpan==1)x.remove();else x.$.colSpan-=1;K+=x.$.rowSpan-1;v.$.cells.length||F.push(v)}A=q.$.rows[0]&&q.$.rows[0].cells;C=new CKEDITOR.dom.element(A[C]||(C?A[C-1]:q.$.parentNode));F.length==J&&q.remove();C&&d(C,true)}});n.addCommand("columnInsertBefore",
{exec:function(q){q=q.getSelection();h(q,true)}});n.addCommand("columnInsertAfter",{exec:function(q){q=q.getSelection();h(q)}});n.addCommand("cellDelete",{exec:function(q){q=q.getSelection();f(q)}});n.addCommand("cellMerge",{exec:function(q){d(l(q.getSelection()),true)}});n.addCommand("cellMergeRight",{exec:function(q){d(l(q.getSelection(),"right"),true)}});n.addCommand("cellMergeDown",{exec:function(q){d(l(q.getSelection(),"down"),true)}});n.addCommand("cellVerticalSplit",{exec:function(q){d(m(q.getSelection()))}});
n.addCommand("cellHorizontalSplit",{exec:function(q){d(p(q.getSelection()))}});n.addCommand("cellInsertBefore",{exec:function(q){q=q.getSelection();j(q,true)}});n.addCommand("cellInsertAfter",{exec:function(q){q=q.getSelection();j(q)}});n.addMenuItems&&n.addMenuItems({tablecell:{label:s.cell.menu,group:"tablecell",order:1,getItems:function(){var q=n.getSelection(),v=a(q);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,
tablecell_merge:l(q,null,true)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:l(q,"right",true)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:l(q,"down",true)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:m(q,true)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:p(q,true)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:v.length>0?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},
tablecell_insertBefore:{label:s.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:s.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:s.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:s.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:s.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:s.cell.mergeDown,
group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:s.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:s.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:s.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:s.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,
tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:s.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:s.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:s.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:s.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,
tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:s.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:s.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:s.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});n.contextMenu&&n.contextMenu.addListener(function(q){if(!q||q.isReadOnly())return null;
for(;q;){if(q.getName()in t)return{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF};q=q.getParent()}return null})},getSelectedCells:a};CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)})();
CKEDITOR.tools.buildTableMap=function(a){a=a.$.rows;for(var b=-1,c=[],e=0;e<a.length;e++){b++;!c[b]&&(c[b]=[]);for(var g=-1,h=0;h<a[e].cells.length;h++){var j=a[e].cells[h];for(g++;c[b][g];)g++;var f=isNaN(j.colSpan)?1:j.colSpan;j=isNaN(j.rowSpan)?1:j.rowSpan;for(var d=0;d<j;d++){c[b+d]||(c[b+d]=[]);for(var k=0;k<f;k++)c[b+d][g+k]=a[e].cells[h]}g+=f-1}}return c};
CKEDITOR.plugins.add("specialchar",{availableLangs:{en:1},init:function(a){var b=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js");a.addCommand("specialchar",{exec:function(){var c=a.langCode;c=b.availableLangs[c]?c:"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(b.path+"lang/"+c+".js"),function(){CKEDITOR.tools.extend(a.lang.specialChar,b.langEntries[c]);a.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:false});a.ui.addButton("SpecialChar",{label:a.lang.specialChar.toolbar,
command:"specialchar"})}});
CKEDITOR.config.specialChars=["!","&quot;","#","$","%","&amp;","'","(",")","*","+","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&lt;","=","&gt;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","&euro;","&lsquo;","&rsquo;","&ldquo;","&rdquo;","&ndash;","&mdash;","&iexcl;","&cent;",
"&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;",
"&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&uuml;","&yacute;","&thorn;","&yuml;","&OElig;","&oelig;","&#372;","&#374","&#373","&#375;","&sbquo;","&#8219;","&bdquo;",
"&hellip;","&trade;","&#9658;","&bull;","&rarr;","&rArr;","&hArr;","&diams;","&asymp;"];
(function(){function a(g){return{editorFocus:false,canUndo:false,modes:{wysiwyg:1},exec:function(h){if(h.focusManager.hasFocus){var j=h.getSelection().getCommonAncestor(),f;if(f=j.getAscendant("td",true)||j.getAscendant("th",true)){j=new CKEDITOR.dom.range(h.document);var d=CKEDITOR.tools.tryThese(function(){return f.getParent().$.cells[f.$.cellIndex+(g?-1:1)]},function(){var r=f.getParent();r=r.getAscendant("table").$.rows[r.$.rowIndex+(g?-1:1)];return r.cells[g?r.cells.length-1:0]});if(d||g)if(d){d=
new CKEDITOR.dom.element(d);j.moveToElementEditStart(d);j.checkStartOfBlock()&&j.checkEndOfBlock()||j.selectNodeContents(d)}else return true;else{var k=f.getAscendant("table").$;d=f.getParent().$.cells;k=new CKEDITOR.dom.element(k.insertRow(-1),h.document);for(var l=0,m=d.length;l<m;l++){var p=k.append((new CKEDITOR.dom.element(d[l],h.document)).clone(false,false));!CKEDITOR.env.ie&&p.appendBogus()}j.moveToElementEditStart(k)}j.select(true);return true}}return false}}}var b={editorFocus:false,modes:{wysiwyg:1,
source:1}},c={exec:function(g){g.container.focusNext(true,g.tabIndex)}},e={exec:function(g){g.container.focusPrevious(true,g.tabIndex)}};CKEDITOR.plugins.add("tab",{requires:["keystrokes"],init:function(g){for(var h=g.config.enableTabKeyTools!==false,j=g.config.tabSpaces||0,f="";j--;)f+=" ";if(f)g.on("key",function(d){if(d.data.keyCode==9){g.insertHtml(f);d.cancel()}});if(h)g.on("key",function(d){if(d.data.keyCode==9&&g.execCommand("selectNextCell")||d.data.keyCode==CKEDITOR.SHIFT+9&&g.execCommand("selectPreviousCell"))d.cancel()});
if(CKEDITOR.env.webkit||CKEDITOR.env.gecko)g.on("key",function(d){var k=d.data.keyCode;if(k==9&&!f){d.cancel();g.execCommand("blur")}if(k==CKEDITOR.SHIFT+9){g.execCommand("blurBack");d.cancel()}});g.addCommand("blur",CKEDITOR.tools.extend(c,b));g.addCommand("blurBack",CKEDITOR.tools.extend(e,b));g.addCommand("selectNextCell",a());g.addCommand("selectPreviousCell",a(true))}})})();
CKEDITOR.dom.element.prototype.focusNext=function(a,b){var c=b===undefined?this.getTabIndex():b,e,g,h,j,f,d;if(c<=0)for(f=this.getNextSourceNode(a,CKEDITOR.NODE_ELEMENT);f;){if(f.isVisible()&&f.getTabIndex()===0){h=f;break}f=f.getNextSourceNode(false,CKEDITOR.NODE_ELEMENT)}else for(f=this.getDocument().getBody().getFirst();f=f.getNextSourceNode(false,CKEDITOR.NODE_ELEMENT);){if(!e)if(!g&&f.equals(this)){g=true;if(a){if(!(f=f.getNextSourceNode(true,CKEDITOR.NODE_ELEMENT)))break;e=1}}else if(g&&!this.contains(f))e=
1;if(!(!f.isVisible()||(d=f.getTabIndex())<0)){if(e&&d==c){h=f;break}if(d>c&&(!h||!j||d<j)){h=f;j=d}else if(!h&&d===0){h=f;j=d}}}h&&h.focus()};
CKEDITOR.dom.element.prototype.focusPrevious=function(a,b){for(var c=b===undefined?this.getTabIndex():b,e,g,h,j=0,f,d=this.getDocument().getBody().getLast();d=d.getPreviousSourceNode(false,CKEDITOR.NODE_ELEMENT);){if(!e)if(!g&&d.equals(this)){g=true;if(a){if(!(d=d.getPreviousSourceNode(true,CKEDITOR.NODE_ELEMENT)))break;e=1}}else if(g&&!this.contains(d))e=1;if(!(!d.isVisible()||(f=d.getTabIndex())<0))if(c<=0){if(e&&f===0){h=d;break}if(f>j){h=d;j=f}}else{if(e&&f==c){h=d;break}if(f<c&&(!h||f>j)){h=
d;j=f}}}h&&h.focus()};
(function(){CKEDITOR.plugins.add("templates",{requires:["dialog"],init:function(c){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js"));c.addCommand("templates",new CKEDITOR.dialogCommand("templates"));c.ui.addButton("Templates",{label:c.lang.templates.button,command:"templates"})}});var a={},b={};CKEDITOR.addTemplates=function(c,e){a[c]=e};CKEDITOR.getTemplates=function(c){return a[c]};CKEDITOR.loadTemplates=function(c,e){for(var g=[],h=0,j=c.length;h<j;h++)if(!b[c[h]]){g.push(c[h]);
b[c[h]]=1}g.length?CKEDITOR.scriptLoader.load(g,e):setTimeout(e,0)}})();CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")];CKEDITOR.config.templates_replaceContent=true;
(function(){function a(j){this.editor=j;this.reset()}CKEDITOR.plugins.add("undo",{requires:["selection","wysiwygarea"],init:function(j){function f(m){d.enabled&&m.data.command.canUndo!==false&&d.save()}var d=new a(j),k=j.addCommand("undo",{exec:function(){if(d.undo()){j.selectionChange();this.fire("afterUndo")}},state:CKEDITOR.TRISTATE_DISABLED,canUndo:false}),l=j.addCommand("redo",{exec:function(){if(d.redo()){j.selectionChange();this.fire("afterRedo")}},state:CKEDITOR.TRISTATE_DISABLED,canUndo:false});
d.onChange=function(){k.setState(d.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);l.setState(d.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};j.on("beforeCommandExec",f);j.on("afterCommandExec",f);j.on("saveSnapshot",function(){d.save()});j.on("contentDom",function(){j.document.on("keydown",function(m){!m.data.$.ctrlKey&&!m.data.$.metaKey&&d.type(m)})});j.on("beforeModeUnload",function(){j.mode=="wysiwyg"&&d.save(true)});j.on("mode",function(){d.enabled=j.mode=="wysiwyg";
d.onChange()});j.ui.addButton("Undo",{label:j.lang.undo,command:"undo"});j.ui.addButton("Redo",{label:j.lang.redo,command:"redo"});j.resetUndo=function(){d.reset();j.fire("saveSnapshot")};j.on("updateSnapshot",function(){d.currentImage&&(new b(j)).equals(d.currentImage)&&setTimeout(function(){d.update()},0)})}});CKEDITOR.plugins.undo={};var b=CKEDITOR.plugins.undo.Image=function(j){this.editor=j;j.fire("beforeCreateUndoSnapshot");var f=j.getSnapshot(),d=f&&j.getSelection();CKEDITOR.env.ie&&f&&(f=
f.replace(/\s+data-cke-expando=".*?"/g,""));this.contents=f;this.bookmarks=d&&d.createBookmarks2(true);j.fire("afterCreateUndoSnapshot")},c=/\b(?:href|src|name)="[^"]*?"/gi;b.prototype={equals:function(j,f){var d=this.contents,k=j.contents;if(CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)){d=d.replace(c,"");k=k.replace(c,"")}if(d!=k)return false;if(f)return true;d=this.bookmarks;k=j.bookmarks;if(d||k){if(!d||!k||d.length!=k.length)return false;for(var l=0;l<d.length;l++){var m=
d[l],p=k[l];if(m.startOffset!=p.startOffset||m.endOffset!=p.endOffset||!CKEDITOR.tools.arrayCompare(m.start,p.start)||!CKEDITOR.tools.arrayCompare(m.end,p.end))return false}}return true}};var e={8:1,46:1},g={16:1,17:1,18:1},h={37:1,38:1,39:1,40:1};a.prototype={type:function(j){j=j&&j.data.getKey();var f=j in e,d=this.lastKeystroke in e,k=f&&j==this.lastKeystroke,l=j in h,m=this.lastKeystroke in h;if(!(j in g||this.typing)||!f&&!l&&(d||m)||f&&!k){var p=new b(this.editor);CKEDITOR.tools.setTimeout(function(){var r=
this.editor.getSnapshot();if(CKEDITOR.env.ie)r=r.replace(/\s+data-cke-expando=".*?"/g,"");if(p.contents!=r){this.typing=true;this.save(false,p,false)||this.snapshots.splice(this.index+1,this.snapshots.length-this.index-1);this.hasUndo=true;this.hasRedo=false;this.modifiersCount=this.typesCount=1;this.onChange()}},0,this)}this.lastKeystroke=j;if(f){this.typesCount=0;this.modifiersCount++;if(this.modifiersCount>25){this.save(false,null,false);this.modifiersCount=1}}else if(!l){this.modifiersCount=0;
this.typesCount++;if(this.typesCount>25){this.save(false,null,false);this.typesCount=1}}},reset:function(){this.lastKeystroke=0;this.snapshots=[];this.index=-1;this.limit=this.editor.config.undoStackSize||20;this.currentImage=null;this.hasRedo=this.hasUndo=false;this.resetType()},resetType:function(){this.typing=false;delete this.lastKeystroke;this.modifiersCount=this.typesCount=0},fireChange:function(){this.hasUndo=!!this.getNextImage(true);this.hasRedo=!!this.getNextImage(false);this.resetType();
this.onChange()},save:function(j,f,d){var k=this.snapshots;RTE.log("undo save");f||(f=new b(this.editor));if(f.contents===false)return false;if(this.currentImage&&f.equals(this.currentImage,j))return false;k.splice(this.index+1,k.length-this.index-1);k.length==this.limit&&k.shift();this.index=k.push(f)-1;this.currentImage=f;d!==false&&this.fireChange();return true},restoreImage:function(j){this.editor.loadSnapshot(j.contents);if(j.bookmarks)this.editor.getSelection().selectBookmarks(j.bookmarks);
else if(CKEDITOR.env.ie){var f=this.editor.document.getBody().$.createTextRange();f.collapse(true);f.select()}this.index=j.index;this.update();this.fireChange();this.editor.fire("wysiwygModeReady")},getNextImage:function(j){var f=this.snapshots,d=this.currentImage,k;if(d)if(j)for(k=this.index-1;k>=0;k--){j=f[k];if(!d.equals(j,true)){j.index=k;return j}}else for(k=this.index+1;k<f.length;k++){j=f[k];if(!d.equals(j,true)){j.index=k;return j}}return null},redoable:function(){return this.enabled&&this.hasRedo},
undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(true);var j=this.getNextImage(true);if(j)return this.restoreImage(j),true}return false},redo:function(){if(this.redoable()){this.save(true);if(this.redoable()){var j=this.getNextImage(false);if(j)return this.restoreImage(j),true}}return false},update:function(){this.snapshots.splice(this.index,1,this.currentImage=new b(this.editor))}}})();
(function(){function a(n){return n.getName()in l||n.isBlockBoundary()&&CKEDITOR.dtd.$empty[n.getName()]}function b(n){return function(s){if(this.mode=="wysiwyg"){this.focus();this.fire("saveSnapshot");var q=this.getSelection(),v={selection:q,ranges:q&&q.getRanges(),data:s.data};this.fire("beforeInsertContent",v);n.call(this,s.data);CKEDITOR.tools.setTimeout(function(){this.fire("afterInsertContent",v);this.fire("saveSnapshot")},0,this)}}}function c(n){if(this.dataProcessor)n=this.dataProcessor.toHtml(n);
var s=this.getSelection(),q=s.getRanges()[0];if(!q.checkReadOnly()){if(CKEDITOR.env.ie){var v=s.isLocked;v&&s.unlock();var x=s.getNative();if(x.type=="Control")x.clear();else if(s.getType()==CKEDITOR.SELECTION_TEXT)if((s=(q=s.getRanges()[0])&&q.endContainer)&&s.type==CKEDITOR.NODE_ELEMENT&&s.getAttribute("contenteditable")=="false"&&q.checkBoundaryOfElement(s,CKEDITOR.END)){q.setEndAfter(q.endContainer);q.deleteContents()}try{x.createRange().pasteHTML(n)}catch(G){}v&&this.getSelection().lock()}else this.document.$.execCommand("inserthtml",
false,n);if(CKEDITOR.env.webkit){s=this.getSelection();s.scrollIntoView()}}}function e(n){var s=this.getSelection(),q=s.getStartElement().hasAscendant("pre",true)?CKEDITOR.ENTER_BR:this.config.enterMode,v=q==CKEDITOR.ENTER_BR;n=CKEDITOR.tools.htmlEncode(n.replace(/\r\n|\r/g,"\n"));n=n.replace(/^[ \t]+|[ \t]+$/g,function(C,A){return C.length==1?"&nbsp;":A?" "+CKEDITOR.tools.repeat("&nbsp;",C.length-1):CKEDITOR.tools.repeat("&nbsp;",C.length-1)+" "});n=n.replace(/[ \t]{2,}/g,function(C){return CKEDITOR.tools.repeat("&nbsp;",
C.length-1)+" "});var x=q==CKEDITOR.ENTER_P?"p":"div";v||(n=n.replace(/(\n{2})([\s\S]*?)(?:$|\1)/g,function(C,A,F){return"<"+x+">"+F+"</"+x+">"}));n=n.replace(/\n/g,"<br>");v||CKEDITOR.env.ie||(n=n.replace(RegExp("<br>(?=</"+x+">)"),function(C){return CKEDITOR.tools.repeat(C,2)}));if(CKEDITOR.env.gecko||CKEDITOR.env.webkit){s=new CKEDITOR.dom.elementPath(s.getStartElement());q=[];for(v=0;v<s.elements.length;v++){var G=s.elements[v].getName();if(G in CKEDITOR.dtd.$inline)q.unshift(s.elements[v].getOuterHtml().match(/^<.*?>/));
else if(G in CKEDITOR.dtd.$block)break}n=q.join("")+n}c.call(this,n)}function g(n){var s=this.getSelection(),q=s.getRanges(),v=n.getName(),x=CKEDITOR.dtd.$block[v],G=s.isLocked;G&&s.unlock();for(var C,A,F,H=q.length-1;H>=0;H--){C=q[H];if(!C.checkReadOnly()){C.deleteContents(1);A=!H&&n||n.clone(1);var J,K;if(x)for(;(J=C.getCommonAncestor(0,1))&&(K=CKEDITOR.dtd[J.getName()])&&!(K&&K[v]);)if(J.getName()in CKEDITOR.dtd.span)C.splitElement(J);else if(C.checkStartOfBlock()&&C.checkEndOfBlock()){C.setStartBefore(J);
C.collapse(true);J.remove()}else C.splitBlock();var o=C.getCommonAncestor(0,1);if(/h\d/i.test(o.getName()))C.startOffset==0?C.setStartBefore(o):C.setStartAfter(o);C.insertNode(A);F||(F=A)}}if(F){C.moveToPosition(F,CKEDITOR.POSITION_AFTER_END);if(x)(q=(n=F.getNext(p))&&n.type==CKEDITOR.NODE_ELEMENT&&n.getName())&&CKEDITOR.dtd.$block[q]&&CKEDITOR.dtd[q]["#"]&&C.moveToElementEditStart(n)}s.selectRanges([C]);G&&this.getSelection().lock()}function h(n){n.checkDirty()||setTimeout(function(){n.resetDirty()},
0)}function j(n){return r(n)&&t(n)}function f(n){if(n.isLocked){n.unlock();setTimeout(function(){n.lock()},0)}}function d(n){var s=n.window,q=n.document,v=n.document.getBody(),x=v.getChildren().count();if(!x||x==1&&v.getFirst().hasAttribute("_moz_editor_bogus_node")){h(n);n=n.element.getDocument();var G=n.getDocumentElement(),C=G.$.scrollTop,A=G.$.scrollLeft,F=q.$.createEvent("KeyEvents");F.initKeyEvent("keypress",true,true,s.$,false,false,false,false,0,32);q.$.dispatchEvent(F);if(C!=G.$.scrollTop||
A!=G.$.scrollLeft)n.getWindow().$.scrollTo(A,C);x&&v.getFirst().remove();q.getBody().appendBogus();s=new CKEDITOR.dom.range(q);s.setStartAt(v,CKEDITOR.POSITION_AFTER_START);s.select()}}function k(n){var s=n.editor,q=n.data.path,v=q.blockLimit;n=n.data.selection;var x=n.getRanges()[0],G=s.document.getBody(),C=s.config.enterMode;if(CKEDITOR.env.gecko){d(s);var A=q.block||q.blockLimit;if(A&&!A.getBogus()){s.fire("updateSnapshot");h(s);A.appendBogus()}}if(C!=CKEDITOR.ENTER_BR&&x.collapsed&&v.getName()==
"body"&&!q.block){s.fire("updateSnapshot");h(s);CKEDITOR.env.ie&&f(n);q=x.fixBlock(true,s.config.enterMode==CKEDITOR.ENTER_DIV?"div":"p");if(CKEDITOR.env.ie)(v=q.getFirst(j))&&v.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(v.getText()).match(/^(?:&nbsp;|\xa0)$/)&&v.remove();if(q.getOuterHtml().match(m))if((v=q.getNext(r))&&v.type==CKEDITOR.NODE_ELEMENT&&!a(v)){x.moveToElementEditStart(v);q.remove()}else if((v=q.getPrevious(r))&&v.type==CKEDITOR.NODE_ELEMENT&&!a(v)){x.moveToElementEditEnd(v);q.remove()}x.select();
if(!CKEDITOR.env.ie){s.forceNextSelectionCheck();s.selectionChange()}}x=new CKEDITOR.dom.range(s.document);q=new CKEDITOR.dom.walker(x);x.selectNodeContents(G);q.evaluator=function(F){return F.type==CKEDITOR.NODE_ELEMENT&&F.getName()in l};q.guard=function(F,H){return!(F.type==CKEDITOR.NODE_TEXT&&r(F)||H)};if(q.previous()){s.fire("updateSnapshot");h(s);CKEDITOR.env.ie&&f(n);s=C!=CKEDITOR.ENTER_BR?G.append(new CKEDITOR.dom.element(C==CKEDITOR.ENTER_P?"p":"div")):G;CKEDITOR.env.ie||s.appendBogus()}}
var l={table:1,pre:1},m=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,p=CKEDITOR.dom.walker.whitespaces(true),r=CKEDITOR.dom.walker.whitespaces(true),t=CKEDITOR.dom.walker.bookmark(false,true);r=CKEDITOR.dom.walker.whitespaces(true);CKEDITOR.plugins.add("wysiwygarea",{requires:["editingblock"],init:function(n){function s(F){CKEDITOR.tools.tryThese(function(){n.document.$.designMode="on";setTimeout(function(){n.document.$.designMode=
"off";CKEDITOR.currentInstance==n&&n.document.getBody().focus()},50)},function(){n.document.$.designMode="off";var H=n.document.getBody();H.setAttribute("contentEditable",false);H.setAttribute("contentEditable",true);!F&&s(1)})}var q=n.config.enterMode!=CKEDITOR.ENTER_BR?n.config.enterMode==CKEDITOR.ENTER_DIV?"div":"p":false,v=n.lang.editorTitle.replace("%1",n.name),x;n.on("editingBlockReady",function(){function F(B){if(y){y=0;n.fire("ariaWidget",J);var E=B.document,I=E.body,L=E.getElementById("cke_actscrpt");
L&&L.parentNode.removeChild(L);I.spellcheck=!n.config.disableNativeSpellChecker;if(CKEDITOR.env.ie){I.hideFocus=true;I.disabled=true;I.contentEditable=true;I.removeAttribute("disabled")}else setTimeout(function(){if(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900||CKEDITOR.env.opera)E.$.body.contentEditable=true;else if(CKEDITOR.env.webkit)E.$.body.parentNode.contentEditable=true;else E.$.designMode="on"},0);CKEDITOR.env.gecko&&CKEDITOR.tools.setTimeout(d,0,null,n);B=n.window=new CKEDITOR.dom.window(B);
E=n.document=new CKEDITOR.dom.document(E);E.on("dblclick",function(M){M={element:M.data.getTarget(),dialog:""};n.fire("doubleclick",M);M.dialog&&n.openDialog(M.dialog)});CKEDITOR.env.ie&&E.on("click",function(M){var O=M.data.getTarget();if(O.is("input")){O=O.getAttribute("type");if(O=="submit"||O=="reset")M.data.preventDefault()}});if(!(CKEDITOR.env.ie||CKEDITOR.env.opera))E.on("mousedown",function(M){M=M.data.getTarget();M.is("img","hr","input","textarea","select")&&n.getSelection().selectElement(M)});
if(CKEDITOR.env.gecko)E.on("mouseup",function(M){if(M.data.$.button==2){M=M.data.getTarget();if(!M.getOuterHtml().replace(m,"")){var O=new CKEDITOR.dom.range(E);O.moveToElementEditStart(M);O.select(true)}}});E.on("click",function(M){M=M.data;M.getTarget().is("a")&&M.$.button!=2&&M.preventDefault()});if(CKEDITOR.env.webkit){E.on("click",function(M){M.data.getTarget().is("input","select")&&M.data.preventDefault()});E.on("mouseup",function(M){M.data.getTarget().is("input","textarea")&&M.data.preventDefault()})}if(CKEDITOR.env.ie&&
E.$.compatMode=="CSS1Compat"||CKEDITOR.env.opera){var R=E.getDocumentElement();R.on("mousedown",function(M){M.data.getTarget().equals(R)&&A.focus()})}B=CKEDITOR.env.ie?J:B;B.on("blur",function(){n.focusManager.blur()});var S;B.on("focus",function(){var M=n.document;if(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900)s();else if(CKEDITOR.env.opera)M.getBody().focus();else if(CKEDITOR.env.webkit)if(!S){n.document.getDocumentElement().focus();S=1}n.focusManager.focus()});(B=n.keystrokeHandler)&&B.attach(E);
if(CKEDITOR.env.ie){E.getDocumentElement().addClass(E.$.compatMode);E.on("keydown",function(M){if(M.data.getKeystroke()in{8:1,46:1}){var O=n.getSelection(),T=O.getSelectedElement();if(T){n.fire("saveSnapshot");var P=O.getRanges()[0].createBookmark();T.remove();O.selectBookmarks([P]);n.fire("saveSnapshot");M.data.preventDefault()}}});if(E.$.compatMode=="CSS1Compat"){var N={33:1,34:1};E.on("keydown",function(M){M.data.getKeystroke()in N&&setTimeout(function(){n.getSelection().scrollIntoView()},0)})}}n.contextMenu&&
n.contextMenu.addTarget(E,n.config.browserContextMenuOnCtrl!==false);setTimeout(function(){n.fire("contentDom");if(u){n.mode="wysiwyg";n.fire("mode");u=false}K=false;if(o){n.focus();o=false}setTimeout(function(){n.fire("dataReady")},0);try{n.document.$.execCommand("enableInlineTableEditing",false,!n.config.disableNativeTableHandles)}catch(M){}if(n.config.disableObjectResizing)try{n.document.$.execCommand("enableObjectResizing",false,false)}catch(O){n.document.getBody().on(CKEDITOR.env.ie?"resizestart":
"resize",function(T){T.data.preventDefault()})}CKEDITOR.env.ie&&setTimeout(function(){if(n.document){var T=n.document.$.body;T.runtimeStyle.marginBottom="0px";T.runtimeStyle.marginBottom=""}},1E3)},0)}}var H,J,K,o,y,u,w=CKEDITOR.env.isCustomDomain(),z=function(B){J&&J.remove();var E="document.open();"+(w?'document.domain="'+document.domain+'";':"")+"document.close();";E=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(E)+"}())":"";J=CKEDITOR.dom.element.createFromHtml('<iframe style="width:100%;height:100%" frameBorder="0" title="'+
v+'" src="'+E+'" tabIndex="'+(CKEDITOR.env.webkit?-1:n.tabIndex)+'" allowTransparency="true"></iframe>');if(document.location.protocol=="chrome:")CKEDITOR.event.useCapture=true;J.on("load",function(R){y=1;R.removeListener();R=J.getFrameDocument();R.write(B);CKEDITOR.env.air&&F(R.getWindow().$)});if(document.location.protocol=="chrome:")CKEDITOR.event.useCapture=false;var I=n.element;E=CKEDITOR.env.gecko&&!I.isVisible();var L={};if(E){I.show();L={position:I.getStyle("position"),top:I.getStyle("top")};
I.setStyles({position:"absolute",top:"-3000px"})}H.append(J);E&&setTimeout(function(){I.hide();I.setStyles(L)},1E3)};x=CKEDITOR.tools.addFunction(F);var D='<script id="cke_actscrpt" type="text/javascript" data-cke-temp="1">'+(w?'document.domain="'+document.domain+'";':"")+"window.parent.CKEDITOR.tools.callFunction( "+x+", window );<\/script>";n.addMode("wysiwyg",{load:function(B,E,I){H=B;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&B.setStyle("position","relative");u=n.mayBeDirty=true;I?this.loadSnapshotData(E):
this.loadData(E)},loadData:function(B){K=true;var E=n.config,I=E.fullPage,L=E.docType,R='<style type="text/css" data-cke-temp="1">'+n._.styles.join("\n")+"</style>";!I&&(R=CKEDITOR.tools.buildStyleHtml(n.config.contentsCss)+R);var S=E.baseHref?'<base href="'+E.baseHref+'" data-cke-temp="1" />':"";if(I)B=B.replace(/<!DOCTYPE[^>]*>/i,function(N){n.docType=L=N;return""});if(n.dataProcessor)B=n.dataProcessor.toHtml(B,q);if(I){/<body[\s|>]/.test(B)||(B="<body>"+B);/<html[\s|>]/.test(B)||(B="<html>"+B+
"</html>");if(/<head[\s|>]/.test(B))/<title[\s|>]/.test(B)||(B=B.replace(/<head[^>]*>/,"$&<title></title>"));else B=B.replace(/<html[^>]*>/,"$&<head><title></title></head>");S&&(B=B.replace(/<head>/,"$&"+S));B=B.replace(/<\/head\s*>/,R+"$&");B=L+B}else B=E.docType+'<html dir="'+E.contentsLangDirection+'" lang="'+(E.contentsLanguage||n.langCode)+'"><head><title>'+v+"</title>"+S+R+"</head><body"+(E.bodyId?' id="'+E.bodyId+'"':"")+(E.bodyClass?' class="'+E.bodyClass+'"':"")+">"+B+"</html>";B+=D;this.onDispose();
z(B)},getData:function(){var B=n.config,E=B.fullPage,I=E&&n.docType,L=J.getFrameDocument();E=E?L.getDocumentElement().getOuterHtml():L.getBody().getHtml();if(n.dataProcessor)E=n.dataProcessor.toDataFormat(E,q);if(B.ignoreEmptyParagraph)E=E.replace(m,function(R,S){return S});if(I)E=I+"\n"+E;return E},getSnapshotData:function(){return J.getFrameDocument().getBody().getHtml()},loadSnapshotData:function(B){J.getFrameDocument().getBody().setHtml(B)},onDispose:function(){if(n.document){n.document.getDocumentElement().clearCustomData();
n.document.getBody().clearCustomData();n.window.clearCustomData();n.document.clearCustomData();J.clearCustomData();J.remove()}},unload:function(){this.onDispose();n.window=n.document=J=H=o=null;n.fire("contentDomUnload")},focus:function(){var B=n.window;if(K)o=true;else if(CKEDITOR.env.opera&&n.document){var E=n.window.$.frameElement;E.blur();E.focus();n.document.getBody().focus();n.selectionChange()}else if(!CKEDITOR.env.opera&&B){CKEDITOR.env.air?setTimeout(function(){B.focus()},0):B.focus();n.selectionChange()}}});
n.on("insertHtml",b(c),null,null,20);n.on("insertElement",b(g),null,null,20);n.on("insertText",b(e),null,null,20);n.on("selectionChange",k,null,null,1)});n.on("contentDom",function(){n.document.getElementsByTag("title").getItem(0).data("cke-title",n.document.$.title);n.document.$.title=v});if(CKEDITOR.document.$.documentMode>=8){n.addCss("html.CSS1Compat [contenteditable=false]{ min-height:0 !important;}");var G=[],C;for(C in CKEDITOR.dtd.$removeEmpty)G.push("html.CSS1Compat "+C+"[contenteditable=false]");
n.addCss(G.join(",")+"{ display:inline-block;}")}else CKEDITOR.env.gecko&&n.addCss("html { height: 100% !important; }");if(CKEDITOR.env.ie||CKEDITOR.env.opera){var A;n.on("uiReady",function(){A=n.container.append(CKEDITOR.dom.element.createFromHtml('<span tabindex="-1" style="position:absolute;" role="presentation"></span>'));A.on("focus",function(){n.focus()});n.focusGrabber=A});n.on("destroy",function(){CKEDITOR.tools.removeFunction(x);A.clearCustomData();delete n.focusGrabber})}n.on("insertElement",
function(F){F=F.data;if(F.type==CKEDITOR.NODE_ELEMENT&&(F.is("input")||F.is("textarea"))){F.isReadOnly()||F.data("cke-editable",F.hasAttribute("contenteditable")?"true":"1");F.setAttribute("contentEditable",false)}})}});CKEDITOR.env.gecko&&function(){var n=document.body;if(n){var s=n.getAttribute("onpageshow");n.setAttribute("onpageshow",(s?s+";":"")+'event.persisted && (function(){var allInstances = CKEDITOR.instances, editor, doc;for ( var i in allInstances ){\teditor = allInstances[ i ];\tdoc = editor.document;\tif ( doc )\t{\t\tdoc.$.designMode = "off";\t\tdoc.$.designMode = "on";\t}}})();')}else window.addEventListener("load",
arguments.callee,false)}()})();CKEDITOR.config.disableObjectResizing=false;CKEDITOR.config.disableNativeTableHandles=true;CKEDITOR.config.disableNativeSpellChecker=true;CKEDITOR.config.ignoreEmptyParagraph=true;CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;
(function(){function a(){for(var o=this._.tabIdList.length,y=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+o,u=y-1;u>y-o;u--)if(this._.tabs[this._.tabIdList[u%o]][0].$.offsetHeight)return this._.tabIdList[u%o];return null}function b(){for(var o=this._.tabIdList.length,y=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),u=y+1;u<y+o;u++)if(this._.tabs[this._.tabIdList[u%o]][0].$.offsetHeight)return this._.tabIdList[u%o];return null}function c(o,y){for(var u=o.$.getElementsByTagName("input"),
w=0,z=u.length;w<z;w++){var D=new CKEDITOR.dom.element(u[w]);if(D.getAttribute("type").toLowerCase()=="text")if(y){D.setAttribute("value",D.getCustomData("fake_value")||"");D.removeCustomData("fake_value")}else{D.setCustomData("fake_value",D.getAttribute("value"));D.setAttribute("value","")}}}function e(o,y,u){this.element=y;this.focusIndex=u;this.tabIndex=0;this.isFocusable=function(){return!y.getAttribute("disabled")&&y.isVisible()};this.focus=function(){o._.currentFocusIndex=this.focusIndex;this.element.focus()};
y.on("keydown",function(w){w.data.getKeystroke()in{32:1,13:1}&&this.fire("click")});y.on("focus",function(){this.fire("mouseover")});y.on("blur",function(){this.fire("mouseout")})}function g(o,y){this._={dialog:o};CKEDITOR.tools.extend(this,y)}function h(o){function y(I){var L=o.getSize(),R=CKEDITOR.document.getWindow().getViewPaneSize(),S=I.data.$.screenX,N=I.data.$.screenY,M=S-w.x,O=N-w.y;w={x:S,y:N};z.x+=M;z.y+=O;o.move(z.x+E[3]<B?-E[3]:z.x-E[1]>R.width-L.width-B?R.width-L.width+(D.lang.dir=="rtl"?
0:E[1]):z.x,z.y+E[0]<B?-E[0]:z.y-E[2]>R.height-L.height-B?R.height-L.height+E[2]:z.y,1);I.data.preventDefault()}function u(){CKEDITOR.document.removeListener("mousemove",y);CKEDITOR.document.removeListener("mouseup",u);if(CKEDITOR.env.ie6Compat){var I=q.getChild(0).getFrameDocument();I.removeListener("mousemove",y);I.removeListener("mouseup",u)}}var w=null,z=null;o.getElement().getFirst();var D=o.getParentEditor(),B=D.config.dialog_magnetDistance,E=D.skin.margins||[0,0,0,0];if(typeof B=="undefined")B=
20;o.parts.title.on("mousedown",function(I){w={x:I.data.$.screenX,y:I.data.$.screenY};CKEDITOR.document.on("mousemove",y);CKEDITOR.document.on("mouseup",u);z=o.getPosition();if(CKEDITOR.env.ie6Compat){var L=q.getChild(0).getFrameDocument();L.on("mousemove",y);L.on("mouseup",u)}I.data.preventDefault()},o)}function j(o){function y(M){var O=D.lang.dir=="rtl",T=(M.data.$.screenX-L.x)*(O?-1:1),P=R.width,Q=R.height,U=P+T*(o._.moved?1:2),W=Q+(M.data.$.screenY-L.y)*(o._.moved?1:2),V=o._.element.getFirst(),
Y=O&&V.getComputedStyle("right"),X=o.getPosition();if(Y)Y=Y=="auto"?I.width-(X.x||0)-V.getSize("width"):parseInt(Y,10);if(X.y+W>I.height)W=I.height-X.y;if((O?Y:X.x)+U>I.width)U=I.width-(O?Y:X.x);if((z==CKEDITOR.DIALOG_RESIZE_WIDTH||z==CKEDITOR.DIALOG_RESIZE_BOTH)&&!(O&&T>0&&!X.x))P=Math.max(w.minWidth||0,U-B);if(z==CKEDITOR.DIALOG_RESIZE_HEIGHT||z==CKEDITOR.DIALOG_RESIZE_BOTH)Q=Math.max(w.minHeight||0,W-E);o.resize(P,Q);O=Y;if(o._.moved&&D.lang.dir=="rtl"){T=o._.element.getFirst();T.setStyle("right",
O+"px");T.removeStyle("left")}else o._.moved||o.layout();M.data.preventDefault()}function u(){CKEDITOR.document.removeListener("mouseup",u);CKEDITOR.document.removeListener("mousemove",y);if(S){S.remove();S=null}if(CKEDITOR.env.ie6Compat){var M=q.getChild(0).getFrameDocument();M.removeListener("mouseup",u);M.removeListener("mousemove",y)}if(D.lang.dir=="rtl"){M=o._.element.getFirst();var O=M.getComputedStyle("left");O=O=="auto"?I.width-parseInt(M.getStyle("right"),10)-o.getSize().width:parseInt(O,
10);M.removeStyle("right");o._.position.x+=1;o.move(O,o._.position.y)}}var w=o.definition,z=w.resizable;if(z!=CKEDITOR.DIALOG_RESIZE_NONE){var D=o.getParentEditor(),B,E,I,L,R,S,N=CKEDITOR.tools.addFunction(function(M){R=o.getSize();var O=o.parts.contents;if(O.$.getElementsByTagName("iframe").length){S=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>');O.append(S)}E=R.height-o.parts.contents.getSize("height",!(CKEDITOR.env.gecko||
CKEDITOR.env.opera||CKEDITOR.env.ie&&CKEDITOR.env.quirks));B=R.width-o.parts.contents.getSize("width",1);L={x:M.screenX,y:M.screenY};I=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",y);CKEDITOR.document.on("mouseup",u);if(CKEDITOR.env.ie6Compat){O=q.getChild(0).getFrameDocument();O.on("mousemove",y);O.on("mouseup",u)}M.preventDefault&&M.preventDefault()});o.on("load",function(){var M="";if(z==CKEDITOR.DIALOG_RESIZE_WIDTH)M=" cke_resizer_horizontal";else if(z==CKEDITOR.DIALOG_RESIZE_HEIGHT)M=
" cke_resizer_vertical";M=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+M+'" title="'+CKEDITOR.tools.htmlEncode(D.lang.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+N+', event )"></div>');o.parts.footer.append(M,1)});D.on("destroy",function(){CKEDITOR.tools.removeFunction(N)})}}function f(o){var y=CKEDITOR.document.getWindow(),u=o.config,w=u.dialog_backgroundCoverColor||"white";o=u.dialog_backgroundCoverOpacity;var z=u.baseFloatZIndex;u=CKEDITOR.tools.genKey(w,o,z);var D=s[u];
if(D)D.show();else{z=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",z,"; top: 0px; left: 0px; ",!CKEDITOR.env.ie6Compat?"background-color: "+w:"",'" class="cke_dialog_background_cover blackout">'];if(CKEDITOR.env.ie6Compat){var B=CKEDITOR.env.isCustomDomain();w="<html><body style=\\'background-color:"+w+";\\'></body></html>";z.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:');z.push("void((function(){document.open();"+
(B?"document.domain='"+document.domain+"';":"")+"document.write( '"+w+"' );document.close();})())");z.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')}z.push("</div>");D=CKEDITOR.dom.element.createFromHtml(z.join(""));D.setOpacity(o!=undefined?o:0.5);D.appendTo(CKEDITOR.document.getBody());s[u]=D}q=D;o=function(){var L=y.getViewPaneSize();D.setStyles({width:L.width+"px",height:L.height+"px"})};var E=function(){var L=
y.getScrollPosition(),R=CKEDITOR.dialog._.currentTop;D.setStyles({left:L.x+"px",top:L.y+"px"});if(R){do{L=R.getPosition();R.move(L.x,L.y)}while(R=R._.parentDialog)}};n=o;y.on("resize",o);o();CKEDITOR.env.mac&&CKEDITOR.env.webkit||D.focus();if(CKEDITOR.env.ie6Compat){var I=function(){E();arguments.callee.prevScrollHandler.apply(this,arguments)};y.$.setTimeout(function(){I.prevScrollHandler=window.onscroll||function(){};window.onscroll=I},0);E()}}function d(){if(q){var o=CKEDITOR.document.getWindow();
q.hide();o.removeListener("resize",n);CKEDITOR.env.ie6Compat&&o.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0);n=null}}var k=CKEDITOR.tools.cssLength;CKEDITOR.dialog=function(o,y){function u(){var P=N._.focusList;P.sort(function(W,V){return W.tabIndex!=V.tabIndex?V.tabIndex-W.tabIndex:W.focusIndex-V.focusIndex});for(var Q=P.length,U=0;U<Q;U++)P[U].focusIndex=U}function w(P){var Q=N._.focusList;P=P?1:-1;if(!(Q.length<1)){var U=N._.currentFocusIndex;
try{Q[U].getInputElement().$.blur()}catch(W){}for(var V=U=(U+P+Q.length)%Q.length;!Q[V].isFocusable();){V=(V+P+Q.length)%Q.length;if(V==U)break}Q[V].focus();Q[V].type=="text"&&Q[V].select()}}function z(P){if(N==CKEDITOR.dialog._.currentTop){var Q=P.data.getKeystroke(),U=o.lang.dir=="rtl";O=0;if(Q==9||Q==CKEDITOR.SHIFT+9){Q=Q==CKEDITOR.SHIFT+9;if(N._.tabBarMode){Q=Q?a.call(N):b.call(N);N.selectPage(Q);N._.tabs[Q][0].focus()}else w(!Q);O=1}else if(Q==CKEDITOR.ALT+121&&!N._.tabBarMode&&N.getPageCount()>
1){N._.tabBarMode=true;N._.tabs[N._.currentTabId][0].focus();O=1}else if((Q==37||Q==39)&&N._.tabBarMode){Q=Q==(U?39:37)?a.call(N):b.call(N);N.selectPage(Q);N._.tabs[Q][0].focus();O=1}else if((Q==13||Q==32)&&N._.tabBarMode){this.selectPage(this._.currentTabId);this._.tabBarMode=false;this._.currentFocusIndex=-1;w(true);O=1}if(O){P.stop();P.data.preventDefault()}}}function D(P){O&&P.data.preventDefault()}var B=CKEDITOR.dialog._.dialogDefinitions[y],E=CKEDITOR.tools.clone(l),I=o.config.dialog_buttonsOrder||
"OS",L=o.lang.dir;if(I=="OS"&&CKEDITOR.env.mac||I=="rtl"&&L=="ltr"||I=="ltr"&&L=="rtl")E.buttons.reverse();B=CKEDITOR.tools.extend(B(o),E);B=CKEDITOR.tools.clone(B);B=new t(this,B);E=o.theme.buildDialog(o);this._={editor:o,element:E.element,name:y,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:false,focusList:[],currentFocusIndex:0,hasFocus:false};this.parts=
E.parts;CKEDITOR.tools.setTimeout(function(){o.fire("ariaWidget",this.parts.contents)},0,this);this.parts.dialog.setStyles({position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,left:0,visibility:"hidden"});CKEDITOR.event.call(this);this.definition=B=CKEDITOR.fire("dialogDefinition",{name:y,definition:B},o).definition;I={};if(!("removeDialogTabs"in o._)&&o.config.removeDialogTabs){L=o.config.removeDialogTabs.split(";");for(E=0;E<L.length;E++){var R=L[E].split(":");if(R.length==2){var S=R[0];I[S]||
(I[S]=[]);I[S].push(R[1])}}o._.removeDialogTabs=I}if(o._.removeDialogTabs&&(I=o._.removeDialogTabs[y]))for(E=0;E<I.length;E++)B.removeContents(I[E]);if(B.onLoad)this.on("load",B.onLoad);if(B.onShow)this.on("show",B.onShow);if(B.onHide)this.on("hide",B.onHide);if(B.onOk)this.on("ok",function(P){o.fire("saveSnapshot");setTimeout(function(){o.fire("saveSnapshot")},0);if(B.onOk.call(this,P)===false)P.data.hide=false});if(B.onCancel)this.on("cancel",function(P){if(B.onCancel.call(this,P)===false)P.data.hide=
false});var N=this,M=function(P){var Q=N._.contents,U=false,W;for(W in Q)for(var V in Q[W])if(U=P.call(this,Q[W][V]))return};this.on("ok",function(P){M(function(Q){if(Q.validate){var U=Q.validate(this);if(typeof U=="string"){var W=this.getDialog()._.editor;RTE.tools.alert(W.lang.errorPopupTitle,U);U=false}if(U===false){Q.getDialog().fire("notvalid",{item:Q});Q.select?Q.select():Q.focus();P.data.hide=false;P.stop();return true}}})},this,null,0);this.on("cancel",function(P){if(this._.name=="link")return false;
M(function(Q){if(Q.isChanged()){if(!confirm(o.lang.common.confirmCancel))P.data.hide=false;return true}})},this,null,0);this.parts.close.on("click",function(P){this.fire("close",{close:true});this.fire("cancel",{hide:true}).hide!==false&&this.hide();P.data.preventDefault()},this);this.changeFocus=w;var O,T=this._.element;this.on("show",function(){T.on("keydown",z,this,null,0);if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)T.on("keypress",D,this)});this.on("hide",function(){T.removeListener("keydown",
z);if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)T.removeListener("keypress",D)});this.on("iframeAdded",function(P){(new CKEDITOR.dom.document(P.data.iframe.$.contentWindow.document)).on("keydown",z,this,null,0)});this.on("show",function(){u();if(o.config.dialog_startupFocusTab&&N._.pageCount>1){N._.tabBarMode=true;N._.tabs[N._.currentTabId][0].focus()}else if(!this._.hasFocus){this._.currentFocusIndex=-1;if(B.onFocus){var P=B.onFocus.call(this);P&&P.focus()}else w(true);if(this._.editor.mode==
"wysiwyg"&&CKEDITOR.env.ie)if(P=o.document.$.selection.createRange())if(P.parentElement&&P.parentElement().ownerDocument==o.document.$||P.item&&P.item(0).ownerDocument==o.document.$){P=document.body.createTextRange();P.moveToElementText(this.getElement().getFirst().$);P.collapse(true);P.select()}}},this,null,4294967295);if(CKEDITOR.env.ie6Compat)this.on("load",function(){var P=this.getElement(),Q=P.getFirst();Q.remove();Q.appendTo(P)},this);h(this);j(this);(new CKEDITOR.dom.text(B.title,CKEDITOR.document)).appendTo(this.parts.title);
for(E=0;E<B.contents.length;E++)(I=B.contents[E])&&this.addPage(I);this.parts.tabs.on("click",function(P){var Q=P.data.getTarget();if(Q.hasClass("cke_dialog_tab")){Q=Q.$.id;this.selectPage(Q.substring(4,Q.lastIndexOf("_")));if(this._.tabBarMode){this._.tabBarMode=false;this._.currentFocusIndex=-1;w(true)}P.data.preventDefault()}},this);E=[];I=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:B.buttons},E).getChild();this.parts.footer.setHtml(E.join(""));
for(E=0;E<I.length;E++)this._.buttons[I[E].id]=I[E]};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(){return function(o,y){if(!(this._.contentSize&&this._.contentSize.width==o&&this._.contentSize.height==y)){CKEDITOR.dialog.fire("resize",{dialog:this,skin:this._.editor.skinName,width:o,height:y},this._.editor);this._.contentSize={width:o,height:y}}}}(),getSize:function(){var o=this._.element.getFirst();return{width:o.$.offsetWidth||0,height:o.$.offsetHeight||
0}},move:function(){var o;return function(y,u,w){var z=this._.element.getFirst();if(o===undefined)o=z.getComputedStyle("position")=="fixed";if(!(o&&this._.position&&this._.position.x==y&&this._.position.y==u)){this._.position={x:y,y:u};if(!o){var D=CKEDITOR.document.getWindow().getScrollPosition();y+=D.x;u+=D.y}z.setStyles({left:(y>0?y:0)+"px",top:(u>0?u:0)+"px"});w&&(this._.moved=1)}}}(),getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var o=this._.element,
y=this.definition;o.getParent()&&o.getParent().equals(CKEDITOR.document.getBody())?o.setStyle("display","block"):o.appendTo(CKEDITOR.document.getBody());if(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900){var u=this.parts.dialog;u.setStyle("position","absolute");setTimeout(function(){u.setStyle("position","fixed")},0)}this.resize(this._.contentSize&&this._.contentSize.width||y.minWidth,this._.contentSize&&this._.contentSize.height||y.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);
if(CKEDITOR.dialog._.currentZIndex===null)CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex;this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);if(CKEDITOR.dialog._.currentTop===null){CKEDITOR.dialog._.currentTop=this;this._.parentDialog=null;f(this._.editor);o.on("keydown",x);o.on(CKEDITOR.env.opera?"keypress":"keyup",G);for(var w in{keyup:1,keydown:1,keypress:1})o.on(w,K)}else{this._.parentDialog=CKEDITOR.dialog._.currentTop;this._.parentDialog.getElement().getFirst().$.style.zIndex-=
Math.floor(this._.editor.config.baseFloatZIndex/2);CKEDITOR.dialog._.currentTop=this}C(this,this,"",null,function(){this.fireOnce("close",{esc:true});this.getButton("cancel")&&this.getButton("cancel").click()});this._.hasFocus=false;CKEDITOR.tools.setTimeout(function(){this.layout();this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this.foreach(function(z){z.setInitValue&&z.setInitValue()})},
100,this)},layout:function(){var o=CKEDITOR.document.getWindow().getViewPaneSize(),y=this.getSize();this.move(this._.moved?this._.position.x:(o.width-y.width)/2,this._.moved?this._.position.y:(o.height-y.height)/2)},foreach:function(o){for(var y in this._.contents)for(var u in this._.contents[y])o(this._.contents[y][u]);return this},reset:function(){var o=function(y){y.reset&&y.reset(1)};return function(){this.foreach(o);return this}}(),setupContent:function(){var o=arguments;this.foreach(function(y){y.setup&&
y.setup.apply(y,o)})},commitContent:function(){var o=arguments;this.foreach(function(y){y.commit&&y.commit.apply(y,o)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);var o=this._.element;o.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(A(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var y=this._.parentDialog.getElement().getFirst();y.setStyle("z-index",
parseInt(y.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else d();if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null;o.removeListener("keydown",x);o.removeListener(CKEDITOR.env.opera?"keypress":"keyup",G);for(var u in{keyup:1,keydown:1,keypress:1})o.removeListener(u,K);o=this._.editor;o.focus();if(o.mode=="wysiwyg"&&CKEDITOR.env.ie)(o=o.getSelection())&&o.unlock(true)}delete this._.parentDialog;
this.foreach(function(w){w.resetInitValue&&w.resetInitValue()})}},addPage:function(o){var y=[],u=o.label?' title="'+CKEDITOR.tools.htmlEncode(o.label)+'"':"",w=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:o.elements,expand:!!o.expand,padding:o.padding,style:o.style||"width: 100%;"},y);y=CKEDITOR.dom.element.createFromHtml(y.join(""));y.setAttribute("role","tabpanel");var z=CKEDITOR.env,D="cke_"+o.id+"_"+CKEDITOR.tools.getNextNumber();
u=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',this._.pageCount>0?" cke_last":"cke_first",u,o.hidden?' style="display:none"':"",' id="',D,'"',z.gecko&&z.version>=10900&&!z.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',o.label,'<img class="chevron" src="'+window.wgBlankImgUrl+'" />',"</a>"].join(""));y.setAttribute("aria-labelledby",D);this._.tabs[o.id]=[u,y];this._.tabIdList.push(o.id);!o.hidden&&this._.pageCount++;this._.lastTab=u;this.updateStyle();
D=this._.contents[o.id]={};for(z=w.getChild();w=z.shift();){D[w.id]=w;typeof w.getChild=="function"&&z.push.apply(z,w.getChild())}y.setAttribute("name",o.id);y.appendTo(this.parts.contents);u.unselectable();this.parts.tabs.append(u);if(o.accessKey){C(this,this,"CTRL+"+o.accessKey,H,F);this._.accessKeyMap["CTRL+"+o.accessKey]=o.id}},selectPage:function(o){if(this._.currentTabId!=o)if(this.fire("selectPage",{page:o,currentPage:this._.currentTabId})!==true){for(var y in this._.tabs){var u=this._.tabs[y][0],
w=this._.tabs[y][1];if(y!=o){u.removeClass("cke_dialog_tab_selected");w.hide()}w.setAttribute("aria-hidden",y!=o)}var z=this._.tabs[o];z[0].addClass("cke_dialog_tab_selected");if(CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat){c(z[1]);z[1].show();setTimeout(function(){c(z[1],1)},0)}else z[1].show();this._.currentTabId=o;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,o)}},updateStyle:function(){this.parts.dialog[(this._.pageCount===1?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(o){var y=
this._.tabs[o]&&this._.tabs[o][0];if(!(!y||this._.pageCount==1||!y.isVisible())){o==this._.currentTabId&&this.selectPage(a.call(this));y.hide();this._.pageCount--;this.updateStyle()}},showPage:function(o){if(o=this._.tabs[o]&&this._.tabs[o][0]){o.show();this._.pageCount++;this.updateStyle()}},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(o,y){var u=this._.contents[o];return u&&u[y]},getValueOf:function(o,y){return this.getContentElement(o,
y).getValue()},setValueOf:function(o,y,u){return this.getContentElement(o,y).setValue(u)},getButton:function(o){return this._.buttons[o]},click:function(o){return this._.buttons[o].click()},disableButton:function(o){return this._.buttons[o].disable()},enableButton:function(o){return this._.buttons[o].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},
addFocusable:function(o,y){if(typeof y=="undefined"){y=this._.focusList.length;this._.focusList.push(new e(this,o,y))}else{this._.focusList.splice(y,0,new e(this,o,y));for(var u=y+1;u<this._.focusList.length;u++)this._.focusList[u].focusIndex++}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(o,y){if(!this._.dialogDefinitions[o]||typeof y=="function")this._.dialogDefinitions[o]=y},exists:function(o){return!!this._.dialogDefinitions[o]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},
okButton:function(){var o=function(y,u){u=u||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:y.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(w){w=w.data.dialog;w.fire("ok",{hide:true}).hide!==false&&w.hide()}},u,true)};o.type="button";o.override=function(y){return CKEDITOR.tools.extend(function(u){return o(u,y)},{type:"button"},true)};return o}(),cancelButton:function(){var o=function(y,u){u=u||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:y.lang.common.cancel,
"class":"cke_dialog_ui_button_cancel",onClick:function(w){w=w.data.dialog;w.fireOnce("cancelClicked");w.fire("cancel",{hide:true}).hide!==false&&w.hide()}},u,true)};o.type="button";o.override=function(y){return CKEDITOR.tools.extend(function(u){return o(u,y)},{type:"button"},true)};return o}(),addUIElement:function(o,y){this._.uiElementBuilders[o]=y}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype,
true);var l={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton]},m=function(o,y,u){for(var w=0,z;z=o[w];w++){if(z.id==y)return z;if(u&&z[u])if(z=m(z[u],y,u))return z}return null},p=function(o,y,u,w,z){if(u){for(var D=0,B;B=o[D];D++){if(B.id==u){o.splice(D,0,y);return y}if(w&&B[w])if(B=p(B[w],y,u,w,true))return B}if(z)return null}o.push(y);return y},r=function(o,y,u){for(var w=0,z;z=o[w];w++){if(z.id==y)return o.splice(w,1);if(u&&z[u])if(z=r(z[u],y,
u))return z}return null},t=function(o,y){this.dialog=o;for(var u=y.contents,w=0,z;z=u[w];w++)u[w]=z&&new g(o,z);CKEDITOR.tools.extend(this,y)};t.prototype={getContents:function(o){return m(this.contents,o)},getButton:function(o){return m(this.buttons,o)},addContents:function(o,y){return p(this.contents,o,y)},addButton:function(o,y){return p(this.buttons,o,y)},removeContents:function(o){r(this.contents,o)},removeButton:function(o){r(this.buttons,o)}};g.prototype={get:function(o){return m(this.elements,
o,"children")},add:function(o,y){return p(this.elements,o,y,"children")},remove:function(o){r(this.elements,o,"children")}};var n,s={},q,v={},x=function(o){var y=o.data.$.ctrlKey||o.data.$.metaKey,u=o.data.$.altKey,w=o.data.$.shiftKey,z=String.fromCharCode(o.data.$.keyCode);if((y=v[(y?"CTRL+":"")+(u?"ALT+":"")+(w?"SHIFT+":"")+z])&&y.length){y=y[y.length-1];y.keydown&&y.keydown.call(y.uiElement,y.dialog,y.key);o.data.preventDefault()}},G=function(o){var y=o.data.$.ctrlKey||o.data.$.metaKey,u=o.data.$.altKey,
w=o.data.$.shiftKey,z=String.fromCharCode(o.data.$.keyCode);if((y=v[(y?"CTRL+":"")+(u?"ALT+":"")+(w?"SHIFT+":"")+z])&&y.length){y=y[y.length-1];if(y.keyup){y.keyup.call(y.uiElement,y.dialog,y.key);o.data.preventDefault()}}},C=function(o,y,u,w,z){(v[u]||(v[u]=[])).push({uiElement:o,dialog:y,key:u,keyup:z||o.accessKeyUp,keydown:w||o.accessKeyDown})},A=function(o){for(var y in v){for(var u=v[y],w=u.length-1;w>=0;w--)if(u[w].dialog==o||u[w].uiElement==o)u.splice(w,1);u.length===0&&delete v[y]}},F=function(o,
y){o._.accessKeyMap[y]&&o.selectPage(o._.accessKeyMap[y])},H=function(){},J={27:1,13:1},K=function(o){o.data.getKeystroke()in J&&o.data.stopPropagation()};(function(){CKEDITOR.ui.dialog={uiElement:function(o,y,u,w,z,D,B){if(!(arguments.length<4)){var E=(w.call?w(y):w)||"div",I=["<",E," "],L=(z&&z.call?z(y):z)||{},R=(D&&D.call?D(y):D)||{},S=(B&&B.call?B.call(this,o,y):B)||"",N=this.domId=R.id||CKEDITOR.tools.getNextId()+"_uiElement";this.id=y.id;R.id=N;var M={};if(y.type)M["cke_dialog_ui_"+y.type]=
1;if(y.className)M[y.className]=1;var O=R["class"]&&R["class"].split?R["class"].split(" "):[];for(N=0;N<O.length;N++)if(O[N])M[O[N]]=1;O=[];for(N in M)O.push(N);R["class"]=O.join(" ");if(y.title)R.title=y.title;M=(y.style||"").split(";");for(N in L)M.push(N+":"+L[N]);y.hidden&&M.push("display:none");for(N=M.length-1;N>=0;N--)M[N]===""&&M.splice(N,1);if(M.length>0)R.style=(R.style?R.style+"; ":"")+M.join("; ");for(N in R)I.push(N+'="'+CKEDITOR.tools.htmlEncode(R[N])+'" ');I.push(">",S,"</",E,">");
u.push(I.join(""));(this._||(this._={})).dialog=o;if(typeof y.isChanged=="boolean")this.isChanged=function(){return y.isChanged};if(typeof y.isChanged=="function")this.isChanged=y.isChanged;CKEDITOR.event.implementOn(this);this.registerEvents(y);this.accessKeyUp&&this.accessKeyDown&&y.accessKey&&C(this,o,"CTRL+"+y.accessKey);var T=this;o.on("load",function(){if(T.getInputElement())T.getInputElement().on("focus",function(){o._.tabBarMode=false;o._.hasFocus=true;T.fire("focus")},T)});if(this.keyboardFocusable){this.tabIndex=
y.tabIndex||0;this.focusIndex=o._.focusList.push(this)-1;this.on("focus",function(){o._.currentFocusIndex=T.focusIndex})}CKEDITOR.tools.extend(this,y)}},hbox:function(o,y,u,w,z){if(!(arguments.length<4)){this._||(this._={});this._.children=y;var D=z&&z.widths||null,B=z&&z.height||null,E,I={role:"presentation"};z&&z.align&&(I.align=z.align);CKEDITOR.ui.dialog.uiElement.call(this,o,z||{type:"hbox"},w,"table",{},I,function(){var L=['<tbody><tr class="cke_dialog_ui_hbox">'];for(E=0;E<u.length;E++){var R=
"cke_dialog_ui_hbox_child",S=[];if(E===0)R="cke_dialog_ui_hbox_first";if(E==u.length-1)R="cke_dialog_ui_hbox_last";L.push('<td class="',R,'" role="presentation" ');if(D)D[E]&&S.push("width:"+k(D[E]));else S.push("width:"+Math.floor(100/u.length)+"%");B&&S.push("height:"+k(B));z&&z.padding!=undefined&&S.push("padding:"+k(z.padding));S.length>0&&L.push('style="'+S.join("; ")+'" ');L.push(">",u[E],"</td>")}L.push("</tr></tbody>");return L.join("")})}},vbox:function(o,y,u,w,z){if(!(arguments.length<3)){this._||
(this._={});this._.children=y;var D=z&&z.width||null,B=z&&z.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,o,z||{type:"vbox"},w,"div",null,{role:"presentation"},function(){var E=['<table role="presentation" cellspacing="0" border="0" '];E.push('style="');z&&z.expand&&E.push("height:100%;");E.push("width:"+k(D||"100%"),";");E.push('"');E.push('align="',CKEDITOR.tools.htmlEncode(z&&z.align||(o.getParentEditor().lang.dir=="ltr"?"left":"right")),'" ');E.push("><tbody>");for(var I=0;I<u.length;I++){var L=
[];E.push('<tr><td role="presentation" ');if(D)L.push("width:"+k(D||"100%"));if(B)L.push("height:"+k(B[I]));else z&&z.expand&&L.push("height:"+Math.floor(100/u.length)+"%");z&&z.padding!=undefined&&L.push("padding:"+k(z.padding));L.length>0&&E.push('style="',L.join("; "),'" ');E.push(' class="cke_dialog_ui_vbox_child">',u[I],"</td></tr>")}E.push("</tbody></table>");return E.join("")})}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},
getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(o,y){this.getInputElement().setValue(o);!y&&this.fire("change",{value:o});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return false},selectParentTab:function(){for(var o=this.getInputElement();(o=o.getParent())&&o.$.className.search("cke_dialog_page_contents")==-1;);if(!o)return this;o=o.getAttribute("name");this._.dialog._.currentTabId!=
o&&this._.dialog.selectPage(o);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(o){var y=/^on([A-Z]\w+)/,u,w=function(D,B,E,I){B.on("load",function(){D.getInputElement().on(E,I,D)})},z;for(z in o)if(u=z.match(y))this.eventProcessors[z]?this.eventProcessors[z].call(this,this._.dialog,o[z]):w(this,this._.dialog,u[1].toLowerCase(),o[z]);return this},eventProcessors:{onLoad:function(o,y){o.on("load",y,this)},onShow:function(o,y){o.on("show",
y,this)},onHide:function(o,y){o.on("hide",y,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var o=this.getInputElement();o.setAttribute("disabled","true");o.addClass("cke_disabled")},enable:function(){var o=this.getInputElement();o.removeAttribute("disabled");o.removeClass("cke_disabled")},isEnabled:function(){return!this.getInputElement().getAttribute("disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){if(!this.isEnabled()||
!this.isVisible())return false;return true}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(o){if(arguments.length<1)return this._.children.concat();o.splice||(o=[o]);return o.length<2?this._.children[o[0]]:this._.children[o[0]]&&this._.children[o[0]].getChild?this._.children[o[0]].getChild(o.slice(1,o.length)):null}},true);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var o={build:function(y,u,w){for(var z=u.children,
D,B=[],E=[],I=0;I<z.length&&(D=z[I]);I++){var L=[];B.push(L);E.push(CKEDITOR.dialog._.uiElementBuilders[D.type].build(y,D,L))}return new CKEDITOR.ui.dialog[u.type](y,E,B,w,u)}};CKEDITOR.dialog.addUIElement("hbox",o);CKEDITOR.dialog.addUIElement("vbox",o)})();CKEDITOR.dialogCommand=function(o){this.dialogName=o};CKEDITOR.dialogCommand.prototype={exec:function(o){o.openDialog(this.dialogName)},canUndo:false,editorFocus:CKEDITOR.env.ie||CKEDITOR.env.webkit};(function(){var o=/^([a]|[^a])+$/,y=/^\d*$/,
u=/^\d*(?:\.\d+)?$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){return function(){var w=this&&this.getValue?this.getValue():arguments[0],z=undefined,D=CKEDITOR.VALIDATE_AND,B=[],E;for(E=0;E<arguments.length;E++)if(typeof arguments[E]=="function")B.push(arguments[E]);else break;if(E<arguments.length&&typeof arguments[E]=="string"){z=arguments[E];E++}if(E<arguments.length&&typeof arguments[E]=="number")D=arguments[E];var I=D==CKEDITOR.VALIDATE_AND?true:
false;for(E=0;E<B.length;E++)I=D==CKEDITOR.VALIDATE_AND?I&&B[E](w):I||B[E](w);if(!I){if(z!==undefined){w=this.getDialog()._.editor;RTE.tools.alert(w.lang.errorPopupTitle,z)}if(this&&(this.select||this.focus))(this.select||this.focus)();return false}return true}},regex:function(w,z){return function(D){D=this&&this.getValue?this.getValue():D;if(!w.test(D)){if(z!==undefined){D=this.getDialog()._.editor;RTE.tools.alert(D.lang.errorPopupTitle,z)}if(this&&(this.select||this.focus))this.select?this.select():
this.focus();return false}return true}},notEmpty:function(w){return this.regex(o,w)},integer:function(w){return this.regex(y,w)},number:function(w){return this.regex(u,w)},equals:function(w,z){return this.functions(function(D){return D==w},z)},notEqual:function(w,z){return this.functions(function(D){return D!=w},z)}};CKEDITOR.on("instanceDestroyed",function(w){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var z;z=CKEDITOR.dialog._.currentTop;)z.hide();for(var D in s)s[D].remove();s={}}w=w.editor._.storedDialogs;
for(var B in w)w[B].destroy()})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(o,y){function u(E){if(!(!D.skin.dialog._isLoaded||B&&typeof E=="undefined")){if(typeof CKEDITOR.dialog._.dialogDefinitions[o]!="function")CKEDITOR.dialog._.dialogDefinitions[o]="failed";D.openDialog(o,y)}}if(this.mode=="wysiwyg"&&CKEDITOR.env.ie){var w=this.getSelection();w&&w.lock()}w=CKEDITOR.dialog._.dialogDefinitions[o];var z=this.skin.dialog;CKEDITOR.dialog._.currentTop===null&&f(this);if(typeof w==
"function"&&z._isLoaded){w=this._.storedDialogs||(this._.storedDialogs={});w=w[o]||(w[o]=new CKEDITOR.dialog(this,o));y&&y.call(w,w);w.show();return w}else if(w=="failed"){d();throw Error('[CKEDITOR.dialog.openDialog] Dialog "'+o+'" failed when loading definition.');}var D=this;if(typeof w=="string"){var B=1;CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(w),u,null,0,1)}CKEDITOR.skins.load(this,"dialog",u);return null}})})();CKEDITOR.plugins.add("dialog",{requires:["dialogui"]});
CKEDITOR.plugins.add("styles",{requires:["selection"],init:function(a){a.on("contentDom",function(){a.document.setCustomData("cke_includeReadonly",!a.config.disableReadonlyStyling)})}});
CKEDITOR.editor.prototype.attachStyleStateChange=function(a,b){var c=this._.styleStateChangeCallbacks;if(!c){c=this._.styleStateChangeCallbacks=[];this.on("selectionChange",function(e){for(var g=0;g<c.length;g++){var h=c[g],j=h.style.checkActive(e.data.path)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;h.fn.call(this,j)}})}c.push({style:a,fn:b})};CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;
(function(){function a(u){for(var w,z;u=u.getParent();){if(u.getName()=="body")break;if(u.getAttribute("data-nostyle"))w=u;else if(!z){var D=u.getAttribute("contentEditable");if(D=="false")w=u;else if(D=="true")z=1}}return w}function b(u){var w=u.document;if(u.collapsed){w=n(this,w);u.insertNode(w);u.moveToPosition(w,CKEDITOR.POSITION_BEFORE_END)}else{var z=this.element,D=this._.definition,B,E=D.includeReadonly;if(E==undefined)E=w.getCustomData("cke_includeReadonly");var I=CKEDITOR.dtd[z]||(B=true,
CKEDITOR.dtd.span);u.enlarge(CKEDITOR.ENLARGE_ELEMENT,1);u.trim();var L=u.createBookmark(),R=L.startNode,S=L.endNode,N=R,M,O=a(R),T=a(S);if(O)N=O.getNextSourceNode(true);if(T)S=T;if(N.getPosition(S)==CKEDITOR.POSITION_FOLLOWING)N=0;for(;N;){O=false;if(N.equals(S)){N=null;O=true}else{var P=N.type,Q=P==CKEDITOR.NODE_ELEMENT?N.getName():null;T=Q&&N.getAttribute("contentEditable")=="false";var U=Q&&N.getAttribute("data-nostyle"),W=T&&N.getAttribute("formateditable")=="true";if(Q&&N.data("cke-bookmark")){N=
N.getNextSourceNode(true);continue}if(!Q||I[Q]&&!U&&(!T||E)&&(N.getPosition(S)|CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED)==CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED&&(!D.childRule||D.childRule(N))||W)if((W=N.getParent())&&((W.getDtd()||CKEDITOR.dtd.span)[z]||B)&&(!D.parentRule||D.parentRule(W))){if(!M&&(!Q||!CKEDITOR.dtd.$removeEmpty[Q]||(N.getPosition(S)|CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|
CKEDITOR.POSITION_IS_CONTAINED)==CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED)){M=new CKEDITOR.dom.range(w);M.setStartBefore(N)}if(P==CKEDITOR.NODE_TEXT||T||P==CKEDITOR.NODE_ELEMENT&&!N.getChildCount()){P=N;for(var V;(O=!P.getNext(K))&&(V=P.getParent(),I[V.getName()])&&(V.getPosition(R)|CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED)==CKEDITOR.POSITION_FOLLOWING+CKEDITOR.POSITION_IDENTICAL+CKEDITOR.POSITION_IS_CONTAINED&&
(!D.childRule||D.childRule(V));)P=V;M.setEndAfter(P)}}else O=true;else O=true;N=N.getNextSourceNode(U||T)}if(O&&M&&!M.collapsed){M.enlargeFormattables();O=n(this,w);T=O.hasAttributes();U=M.getCommonAncestor();P={styles:{},attrs:{},blockedStyles:{},blockedAttrs:{}};for(var Y,X,Z;O&&U;){if(U.getName()==z){for(Y in D.attributes)if(!(P.blockedAttrs[Y]||!(Z=U.getAttribute(X))))if(O.getAttribute(Y)==Z)P.attrs[Y]=1;else P.blockedAttrs[Y]=1;for(X in D.styles)if(!(P.blockedStyles[X]||!(Z=U.getStyle(X))))if(O.getStyle(X)==
Z)P.styles[X]=1;else P.blockedStyles[X]=1}U=U.getParent()}for(Y in P.attrs)O.removeAttribute(Y);for(X in P.styles)O.removeStyle(X);if(T&&!O.hasAttributes())O=null;if(O){M.extractContents().appendTo(O);p(this,O);M.insertNode(O);O.mergeSiblings();CKEDITOR.env.ie||O.$.normalize()}else{O=new CKEDITOR.dom.element("span");M.extractContents().appendTo(O);M.insertNode(O);p(this,O);O.remove(true)}M=null}}u.moveToBookmark(L);u.shrink(CKEDITOR.SHRINK_TEXT)}}function c(u){u.enlarge(CKEDITOR.ENLARGE_ELEMENT,1);
var w=u.createBookmark(),z=w.startNode;if(u.collapsed){for(var D=new CKEDITOR.dom.elementPath(z.getParent()),B,E=0,I;E<D.elements.length&&(I=D.elements[E]);E++){if(I==D.block||I==D.blockLimit)break;if(this.checkElementRemovable(I)){var L;if(u.collapsed&&(u.checkBoundaryOfElement(I,CKEDITOR.END)||(L=u.checkBoundaryOfElement(I,CKEDITOR.START)))){B=I;B.match=L?"start":"end"}else{I.mergeSiblings();I.getName()==this.element?m(this,I):r(I,v(this)[I.getName()])}}}if(B){I=z;for(E=0;;E++){L=D.elements[E];
if(L.equals(B))break;else if(L.match)continue;else L=L.clone();L.append(I);I=L}I[B.match=="start"?"insertBefore":"insertAfter"](B)}}else{var R=w.endNode,S=this;D=function(){for(var N=new CKEDITOR.dom.elementPath(z.getParent()),M=new CKEDITOR.dom.elementPath(R.getParent()),O=null,T=null,P=0;P<N.elements.length;P++){var Q=N.elements[P];if(Q==N.block||Q==N.blockLimit)break;if(S.checkElementRemovable(Q))O=Q}for(P=0;P<M.elements.length;P++){Q=M.elements[P];if(Q==M.block||Q==M.blockLimit)break;if(S.checkElementRemovable(Q))T=
Q}T&&R.breakParent(T);O&&z.breakParent(O)};D();for(B=z.getNext();!B.equals(R);){E=B.getNextSourceNode();if(B.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(B)){B.getName()==this.element?m(this,B):r(B,v(this)[B.getName()]);if(E.type==CKEDITOR.NODE_ELEMENT&&E.contains(z)){D();E=z.getNext()}}B=E}}u.moveToBookmark(w)}function e(u){(u=u.getCommonAncestor(true,true).getAscendant(this.element,true))&&s(u,this)}function g(u){if(u=u.getCommonAncestor(true,true).getAscendant(this.element,true)){var w=
this._.definition,z=w.attributes;CKEDITOR.style.getStyleText(w);if(z)for(var D in z)u.removeAttribute(D,z[D]);if(w.styles)for(var B in w.styles)w.styles.hasOwnProperty(B)&&u.removeStyle(B)}}function h(u){var w=u.createBookmark(true),z=u.createIterator();z.enforceRealBlocks=true;if(this._.enterMode)z.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var D,B=u.document;D=z.getNextParagraph();){var E=n(this,B,D);f(D,E)}u.moveToBookmark(w)}function j(u){var w=u.createBookmark(1),z=u.createIterator();
z.enforceRealBlocks=true;z.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var D;D=z.getNextParagraph();)if(this.checkElementRemovable(D))if(D.is("pre")){var B=this._.enterMode==CKEDITOR.ENTER_BR?null:u.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div");B&&D.copyAttributes(B);f(D,B)}else m(this,D,1);u.moveToBookmark(w)}function f(u,w){if(u.$.parentNode){var z=!w;if(z){w=u.getDocument().createElement("div");u.copyAttributes(w)}var D=w&&w.is("pre"),B=u.is("pre"),E=!D&&B;if(D&&!B){B=
w;(E=u.getBogus())&&E.remove();E=u.getHtml();E=k(E,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");E=E.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");E=E.replace(/([ \t\n\r]+|&nbsp;)/g," ");E=E.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var I=u.getDocument().createElement("div");I.append(B);B.$.outerHTML="<pre>"+E+"</pre>";B.copyAttributes(I.getFirst());B=I.getFirst().remove()}else B.setHtml(E);w=B}else if(E)w=l(z?[u.getHtml()]:d(u),w);else u.moveChildren(w);w.replace(u);if(D){z=w;var L;if((L=z.getPrevious(o))&&
L.is&&L.is("pre")){D=k(L.getHtml(),/\n$/,"")+"\n\n"+k(z.getHtml(),/^\n/,"");if(CKEDITOR.env.ie)z.$.outerHTML="<pre>"+D+"</pre>";else z.setHtml(D);L.remove()}}else z&&t(w)}}function d(u){u.getName();var w=[];k(u.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(z,D,B){return D+"</pre>"+B+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(z,D){w.push(D)});return w}function k(u,w,z){var D="",B="";u=u.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,
function(E,I,L){I&&(D=I);L&&(B=L);return""});return D+u.replace(w,z)+B}function l(u,w){var z;if(u.length>1)z=new CKEDITOR.dom.documentFragment(w.getDocument());for(var D=0;D<u.length;D++){var B=u[D];B=B.replace(/(\r\n|\r)/g,"\n");B=k(B,/^[ \t]*\n/,"");B=k(B,/\n$/,"");B=k(B,/^[ \t]+|[ \t]+$/g,function(I,L){return I.length==1?"&nbsp;":L?" "+CKEDITOR.tools.repeat("&nbsp;",I.length-1):CKEDITOR.tools.repeat("&nbsp;",I.length-1)+" "});B=B.replace(/\n/g,"<br>");B=B.replace(/[ \t]{2,}/g,function(I){return CKEDITOR.tools.repeat("&nbsp;",
I.length-1)+" "});if(z){var E=w.clone();E.setHtml(B);z.append(E)}else w.setHtml(B)}return z||w}function m(u,w){var z=u._.definition,D=CKEDITOR.tools.extend({},z.attributes,v(u)[w.getName()]);z=z.styles;var B=CKEDITOR.tools.isEmpty(D)&&CKEDITOR.tools.isEmpty(z),E;for(E in D)if(!((E=="class"||u._.definition.fullMatch)&&w.getAttribute(E)!=x(E,D[E]))){B=w.hasAttribute(E);w.removeAttribute(E)}for(var I in z)if(!(u._.definition.fullMatch&&w.getStyle(I)!=x(I,z[I],true))){B=B||!!w.getStyle(I);w.removeStyle(I)}if(B)!CKEDITOR.dtd.$block[w.getName()]||
u._.enterMode==CKEDITOR.ENTER_BR&&!w.hasAttributes()?t(w):w.renameNode(u._.enterMode==CKEDITOR.ENTER_P?"p":"div")}function p(u,w){for(var z=v(u),D=w.getElementsByTag(u.element),B=D.count();--B>=0;)m(u,D.getItem(B));for(var E in z)if(E!=u.element){D=w.getElementsByTag(E);for(B=D.count()-1;B>=0;B--){var I=D.getItem(B);r(I,z[E])}}}function r(u,w){var z=w&&w.attributes;if(z)for(var D=0;D<z.length;D++){var B=z[D][0],E;if(E=u.getAttribute(B)){var I=z[D][1];if(I===null||I.test&&I.test(E)||typeof I=="string"&&
E==I)u.removeAttribute(B)}}t(u)}function t(u){if(!u.hasAttributes())if(CKEDITOR.dtd.$block[u.getName()]){var w=u.getPrevious(o),z=u.getNext(o);if(w&&(w.type==CKEDITOR.NODE_TEXT||!w.isBlockBoundary({br:1})))u.append("br",1);if(z&&(z.type==CKEDITOR.NODE_TEXT||!z.isBlockBoundary({br:1})))u.append("br");u.remove(true)}else{w=u.getFirst();z=u.getLast();u.remove(true);if(w){w.type==CKEDITOR.NODE_ELEMENT&&w.mergeSiblings();z&&!w.equals(z)&&z.type==CKEDITOR.NODE_ELEMENT&&z.mergeSiblings()}}}function n(u,
w,z){var D;D=u.element;if(D=="*")D="span";D=new CKEDITOR.dom.element(D,w);z&&z.copyAttributes(D);D=s(D,u);w.getCustomData("doc_processing_style")&&D.hasAttribute("id")?D.removeAttribute("id"):w.setCustomData("doc_processing_style",1);return D}function s(u,w){var z=w._.definition,D=z.attributes;z=CKEDITOR.style.getStyleText(z);if(D)for(var B in D)u.setAttribute(B,D[B]);z&&u.setAttribute("style",z);return u}function q(u,w){for(var z in u)u[z]=u[z].replace(y,function(D,B){return w[B]})}function v(u){if(u._.overrides)return u._.overrides;
var w=u._.overrides={},z=u._.definition.overrides;if(z){CKEDITOR.tools.isArray(z)||(z=[z]);for(var D=0;D<z.length;D++){var B=z[D],E,I;if(typeof B=="string")E=B.toLowerCase();else{E=B.element?B.element.toLowerCase():u.element;I=B.attributes}B=w[E]||(w[E]={});if(I){B=B.attributes=B.attributes||[];for(var L in I)B.push([L.toLowerCase(),I[L]])}}}return w}function x(u,w,z){var D=new CKEDITOR.dom.element("span");D[z?"setStyle":"setAttribute"](u,w);return D[z?"getStyle":"getAttribute"](u)}function G(u,w){var z;
if(w!==false){z=new CKEDITOR.dom.element("span");z.setAttribute("style",u);z=z.getAttribute("style")||""}else z=u;return z.replace(/\s*([;:])\s*/,"$1").replace(/([^\s;])$/,"$1;").replace(/,\s+/g,",").replace(/\"/g,"").toLowerCase()}function C(u){var w={};u.replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(z,D,B){w[D]=B});return w}function A(u,w){var z=u.getSelection(),D=z.getRanges(CKEDITOR.ONLY_FORMATTABLES),B=w?this.removeFromRange:this.applyToRange,E;u.fire("applyStyle",
{style:this.element,remove:w,selection:z,ranges:D});for(var I=D.createIterator();E=I.getNextRange();)B.call(this,E);u.fire("afterApplyStyle",{style:this.element,remove:w,selection:z,ranges:D});z.selectRanges(D);u.removeCustomData("doc_processing_style")}var F={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1},H={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1},J=/\s*(?:;\s*|$)/,K=CKEDITOR.dom.walker.bookmark(0,1);CKEDITOR.style=function(u,w){if(w){u=
CKEDITOR.tools.clone(u);q(u.attributes,w);q(u.styles,w)}var z=this.element=(u.element||"*").toLowerCase();this.type=z=="#"||F[z]?CKEDITOR.STYLE_BLOCK:H[z]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE;this._={definition:u}};CKEDITOR.style.prototype={apply:function(u){A.call(this,u,false)},remove:function(u){A.call(this,u,true)},applyToRange:function(u){return(this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?b:this.type==CKEDITOR.STYLE_BLOCK?h:this.type==CKEDITOR.STYLE_OBJECT?e:null).call(this,u)},
removeFromRange:function(u){return(this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?j:this.type==CKEDITOR.STYLE_OBJECT?g:null).call(this,u)},applyToObject:function(u){s(u,this)},checkActive:function(u){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(u.block||u.blockLimit,true);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var w=u.elements,z=0,D;z<w.length;z++){D=w[z];if(!(this.type==CKEDITOR.STYLE_INLINE&&(D==u.block||
D==u.blockLimit)))if(!(this.type==CKEDITOR.STYLE_OBJECT&&!(D.getName()in H)))if(this.checkElementRemovable(D,true))return true}}return false},checkApplicable:function(u){switch(this.type){case CKEDITOR.STYLE_OBJECT:return u.lastElement.getAscendant(this.element,true)}return true},checkElementRemovable:function(u,w){if(!u)return false;var z=this._.definition;if(u.getName()==this.element){if(!w&&!u.hasAttributes())return true;var D=z._AC;if(D)z=D;else{D={};var B=0,E=z.attributes;if(E)for(var I in E){B++;
D[I]=E[I]}if(E=CKEDITOR.style.getStyleText(z)){D.style||B++;D.style=E}D._length=B;z=z._AC=D}if(z._length){for(var L in z)if(L!="_length"){B=u.getAttribute(L)||"";if(L=="style")a:{D=z[L];B=G(B,false);typeof D=="string"&&(D=C(D));typeof B=="string"&&(B=C(B));E=void 0;for(E in D)if(!(E in B&&(B[E]==D[E]||D[E]=="inherit"||B[E]=="inherit"))){D=false;break a}D=true}else D=z[L]==B;if(D){if(!w)return true}else if(w)return false}if(w)return true}else return true}if(L=v(this)[u.getName()]){if(!(z=L.attributes))return true;
for(D=0;D<z.length;D++){L=z[D][0];if(L=u.getAttribute(L)){B=z[D][1];if(B===null||typeof B=="string"&&L==B||B.test(L))return true}}}return false},buildPreview:function(){var u=this._.definition,w=[],z=u.element;if(z=="bdo")z="span";w=["<",z];var D=u.attributes;if(D)for(var B in D)w.push(" ",B,'="',D[B],'"');(D=CKEDITOR.style.getStyleText(u))&&w.push(' style="',D,'"');w.push(">",u.name,"</",z,">");return w.join("")}};CKEDITOR.style.getStyleText=function(u){var w=u._ST;if(w)return w;w=u.styles;var z=
u.attributes&&u.attributes.style||"",D="";if(z.length)z=z.replace(J,";");for(var B in w){var E=w[B],I=(B+":"+E).replace(J,";");if(E=="inherit")D+=I;else z+=I}if(z.length)z=G(z);z+=D;return u._ST=z};var o=CKEDITOR.dom.walker.whitespaces(1),y=/#\((.+?)\)/g})();CKEDITOR.styleCommand=function(a){this.style=a};CKEDITOR.styleCommand.prototype.exec=function(a){a.focus();if(a=a.document)if(this.state==CKEDITOR.TRISTATE_OFF)this.style.apply(a);else this.state==CKEDITOR.TRISTATE_ON&&this.style.remove(a);return!!a};
CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(a,b,c){CKEDITOR.stylesSet.addExternal(a,b,"");CKEDITOR.stylesSet.load(a,c)};
CKEDITOR.editor.prototype.getStylesSet=function(a){if(this._.stylesDefinitions)a(this._.stylesDefinitions);else{var b=this,c=b.config.stylesCombo_stylesSet||b.config.stylesSet||"default";if(c instanceof Array){b._.stylesDefinitions=c;a(c)}else{c=c.split(":");var e=c[0],g=CKEDITOR.plugins.registered.styles.path;CKEDITOR.stylesSet.addExternal(e,c[1]?c.slice(1).join(":"):g+"styles/"+e+".js","");CKEDITOR.stylesSet.load(e,function(h){b._.stylesDefinitions=h[e];a(b._.stylesDefinitions)})}}};CKEDITOR.plugins.add("domiterator");
(function(){function a(g){if(!(arguments.length<1)){this.range=g;this.forceBrBreak=0;this.enlargeBr=1;this.enforceRealBlocks=0;this._||(this._={})}}function b(g,h,j){for(g=g.getNextSourceNode(h,null,j);!e(g);)g=g.getNextSourceNode(h,null,j);return g}var c=/^[\r\n\t ]+$/,e=CKEDITOR.dom.walker.bookmark(false,true);a.prototype={getNextParagraph:function(g){var h,j,f,d,k,l;if(!this._.lastNode){j=this.range.clone();j.shrink(CKEDITOR.NODE_ELEMENT,true);d=j.endContainer.hasAscendant("pre",true)||j.startContainer.hasAscendant("pre",
true);j.enlarge(this.forceBrBreak&&!d||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);d=new CKEDITOR.dom.walker(j);var m=CKEDITOR.dom.walker.bookmark(true,true);d.evaluator=m;this._.nextNode=d.next();d=new CKEDITOR.dom.walker(j);d.evaluator=m;d=d.previous();this._.lastNode=d.getNextSourceNode(true);if(this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()){m=new CKEDITOR.dom.range(j.document);
m.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END);if(m.checkEndOfBlock()){m=new CKEDITOR.dom.elementPath(m.endContainer);this._.lastNode=(m.block||m.blockLimit).getNextSourceNode(true)}}if(!this._.lastNode){this._.lastNode=this._.docEndMarker=j.document.createText("");this._.lastNode.insertAfter(d)}j=null}m=this._.nextNode;d=this._.lastNode;for(this._.nextNode=null;m;){var p=0,r=m.hasAscendant("pre"),t=m.type!=CKEDITOR.NODE_ELEMENT,n=0;if(t){if(m.type==CKEDITOR.NODE_TEXT)if(c.test(m.getText()))t=
0}else{var s=m.getName();if(m.isBlockBoundary(this.forceBrBreak&&!r&&{br:1})){if(s=="br")t=1;else if(!j&&!m.getChildCount()&&s!="hr"){h=m;f=m.equals(d);break}if(j){j.setEndAt(m,CKEDITOR.POSITION_BEFORE_START);if(s!="br")this._.nextNode=m}p=1}else{if(m.getFirst()){if(!j){j=new CKEDITOR.dom.range(this.range.document);j.setStartAt(m,CKEDITOR.POSITION_BEFORE_START)}m=m.getFirst();continue}t=1}}if(t&&!j){j=new CKEDITOR.dom.range(this.range.document);j.setStartAt(m,CKEDITOR.POSITION_BEFORE_START)}f=(!p||
t)&&m.equals(d);if(j&&!p)for(;!m.getNext(e)&&!f;){s=m.getParent();if(s.isBlockBoundary(this.forceBrBreak&&!r&&{br:1})){p=1;f||s.equals(d);break}m=s;t=1;f=m.equals(d);n=1}t&&j.setEndAt(m,CKEDITOR.POSITION_AFTER_END);m=b(m,n,d);if((f=!m)||p&&j)break}if(!h){if(!j){this._.docEndMarker&&this._.docEndMarker.remove();return this._.nextNode=null}j.enlargeFormattables();h=new CKEDITOR.dom.elementPath(j.startContainer);m=h.blockLimit;p={div:1,th:1,td:1};h=h.block;if(!h&&!this.enforceRealBlocks&&p[m.getName()]&&
j.checkStartOfBlock()&&j.checkEndOfBlock())h=m;else if(!h||this.enforceRealBlocks&&h.getName()=="li"){h=this.range.document.createElement(g||"p");j.extractContents().appendTo(h);h.trim();j.insertNode(h);k=l=true}else if(h.getName()!="li"){if(!j.checkStartOfBlock()||!j.checkEndOfBlock()){h=h.clone(false);j.extractContents().appendTo(h);h.trim();l=j.splitBlock();k=!l.wasStartOfBlock;l=!l.wasEndOfBlock;j.insertNode(h)}}else if(!f)this._.nextNode=h.equals(d)?null:b(j.getBoundaryNodes().endNode,1,d)}if(k)if((j=
h.getPrevious())&&j.type==CKEDITOR.NODE_ELEMENT)if(j.getName()=="br")j.remove();else j.getLast()&&j.getLast().$.nodeName.toLowerCase()=="br"&&j.getLast().remove();if(l)if((j=h.getLast())&&j.type==CKEDITOR.NODE_ELEMENT&&j.getName()=="br")if(CKEDITOR.env.ie||j.getPrevious(e)||j.getNext(e))j.remove();if(!this._.nextNode)this._.nextNode=f||h.equals(d)?null:b(h,1,d);return h}};CKEDITOR.dom.range.prototype.createIterator=function(){return new a(this)}})();
CKEDITOR.plugins.add("panelbutton",{requires:["button"],beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}});CKEDITOR.UI_PANELBUTTON=4;
(function(){var a=function(b){var c=this._;if(c.state!=CKEDITOR.TRISTATE_DISABLED){this.createPanel(b);c.on?c.panel.hide():c.panel.showBlock(this._.id,this.document.getById(this._.id),4)}};CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(b){var c=b.panel;delete b.panel;this.base(b);this.document=c&&c.parent&&c.parent.getDocument()||CKEDITOR.document;c.block={attributes:c.attributes};this.hasArrow=true;this.click=a;this._={panelDefinition:c}},statics:{handler:{create:function(b){return new CKEDITOR.ui.panelButton(b)}}},
proto:{createPanel:function(b){var c=this._;if(!c.panel){var e=this._.panelDefinition||{},g=this._.panelDefinition.block,h=e.parent||CKEDITOR.document.getBody(),j=this._.panel=new CKEDITOR.ui.floatPanel(b,h,e);e=j.addBlock(c.id,g);var f=this;j.onShow=function(){f.className&&this.element.getFirst().addClass(f.className+"_panel");f.setState(CKEDITOR.TRISTATE_ON);c.on=1;if(f.onOpen)f.onOpen()};j.onHide=function(d){f.className&&this.element.getFirst().removeClass(f.className+"_panel");f.setState(f.modes&&
f.modes[b.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);c.on=0;if(!d&&f.onClose)f.onClose()};j.onEscape=function(){j.hide();f.document.getById(c.id).focus()};if(this.onBlock)this.onBlock(j,e);e.onHide=function(){c.on=0;f.setState(CKEDITOR.TRISTATE_OFF)}}}}})})();CKEDITOR.plugins.add("floatpanel",{requires:["panel"]});
(function(){function a(e,g,h,j,f){f=CKEDITOR.tools.genKey(g.getUniqueId(),h.getUniqueId(),e.skinName,e.lang.dir,e.uiColor||"",j.css||"",f||"");var d=b[f];if(!d){d=b[f]=new CKEDITOR.ui.panel(g,j);d.element=h.append(CKEDITOR.dom.element.createFromHtml(d.renderHtml(e),g));d.element.setStyles({display:"none",position:"absolute"})}return d}var b={},c=false;CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(e,g,h,j){h.forceIFrame=1;var f=g.getDocument();j=a(e,f,g,h,j||0);var d=j.element,k=d.getFirst().getFirst();
this.element=d;this._={panel:j,parentElement:g,definition:h,document:f,iframe:k,children:[],dir:e.lang.dir};e.on("mode",function(){this.hide()},this)},proto:{addBlock:function(e,g){return this._.panel.addBlock(e,g)},addListBlock:function(e,g){return this._.panel.addListBlock(e,g)},getBlock:function(e){return this._.panel.getBlock(e)},showBlock:function(e,g,h,j,f){var d=this._.panel,k=d.showBlock(e);this.allowBlur(false);c=1;var l=this.element,m=this._.iframe;e=g.getDocumentPosition(l.getDocument());
var p=this._.dir=="rtl",r=e.x+(j||0),t=e.y+(f||0);if(p&&(h==1||h==4))r+=g.$.offsetWidth;else if(!p&&(h==2||h==3))r+=g.$.offsetWidth-1;if(h==3||h==4)t+=g.$.offsetHeight-1;this._.panel._.offsetParentId=g.getId();l.setStyles({top:t+"px",left:0,display:""});l.setOpacity(0);l.getFirst().removeStyle("width");if(!this._.blurSet){g=CKEDITOR.env.ie?m:new CKEDITOR.dom.window(m.$.contentWindow);CKEDITOR.event.useCapture=true;g.on("blur",function(n){if(this.allowBlur()){var s;CKEDITOR.env.ie&&!this.allowBlur()||
(s=n.data.getTarget())&&s.getName&&s.getName()!="iframe"||this.visible&&!this._.activeChild&&!c&&this.hide()}},this);g.on("focus",function(){this._.focused=true;this.hideChild();this.allowBlur(true)},this);CKEDITOR.event.useCapture=false;this._.blurSet=1}d.onEscape=CKEDITOR.tools.bind(function(n){if(this.onEscape&&this.onEscape(n)===false)return false},this);CKEDITOR.tools.setTimeout(function(){if(p)r-=l.$.offsetWidth;var n=CKEDITOR.tools.bind(function(){var s=l.getFirst();if(k.autoSize){var q=k.element.$;
if(CKEDITOR.env.gecko||CKEDITOR.env.opera)q=q.parentNode;if(CKEDITOR.env.ie)q=q.document.body;q=q.scrollWidth;if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&q>0)q+=(s.$.offsetWidth||0)-(s.$.clientWidth||0);q+=4;s.setStyle("width",q+"px");k.element.addClass("cke_frameLoaded");q=k.element.$.scrollHeight;if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&q>0)q+=(s.$.offsetHeight||0)-(s.$.clientHeight||0);s.setStyle("height",q+"px");d._.currentBlock.element.setStyle("display","none").removeStyle("display")}else s.removeStyle("height");
q=d.element;var v=q.getWindow();s=v.getScrollPosition();v=v.getViewPaneSize();q={height:q.$.offsetHeight,width:q.$.offsetWidth};if(p?r<0:r+q.width>v.width+s.x)r+=q.width*(p?1:-1);if(t+q.height>v.height+s.y)t-=q.height;if(CKEDITOR.env.ie){q=s=new CKEDITOR.dom.element(l.$.offsetParent);if(q.getName()=="html")q=q.getDocument().getBody();if(q.getComputedStyle("direction")=="rtl")r-=CKEDITOR.env.ie8Compat?l.getDocument().getDocumentElement().$.scrollLeft*2:s.$.scrollWidth-s.$.clientWidth}s=l.getFirst();
if(q=s.getCustomData("activePanel"))q.onHide&&q.onHide.call(this,1);s.setCustomData("activePanel",this);l.setStyles({top:t+"px",left:r+"px"});l.setOpacity(1)},this);d.isLoaded?n():d.onLoad=n;CKEDITOR.tools.setTimeout(function(){m.$.contentWindow.focus();this.allowBlur(true)},0,this)},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this);c=0},hide:function(){if(this.visible&&(!this.onHide||this.onHide.call(this)!==true)){this.hideChild();this.element.setStyle("display","none");
this.visible=0;this.element.getFirst().removeCustomData("activePanel")}},allowBlur:function(e){var g=this._.panel;if(e!=undefined)g.allowBlur=e;return g.allowBlur},showAsChild:function(e,g,h,j,f,d){if(!(this._.activeChild==e&&e._.panel._.offsetParentId==h.getId())){this.hideChild();e.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this);this._.activeChild=e;this._.focused=false;e.showBlock(g,h,j,f,d);if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie8&&
CKEDITOR.env.ie6Compat)setTimeout(function(){e.element.getChild(0).$.style.cssText+=""},100)}},hideChild:function(){var e=this._.activeChild;if(e){delete e.onHide;delete this._.activeChild;e.hide()}}}});CKEDITOR.on("instanceDestroyed",function(){var e=CKEDITOR.tools.isEmpty(CKEDITOR.instances),g;for(g in b){var h=b[g];e?h.destroy():h.element.hide()}e&&(b={})})})();
CKEDITOR.plugins.add("menu",{beforeInit:function(a){for(var b=a.config.menu_groups.split(","),c=a._.menuGroups={},e=a._.menuItems={},g=0;g<b.length;g++)c[b[g]]=g+1;a.addMenuGroup=function(h,j){c[h]=j||100};a.addMenuItem=function(h,j){if(c[j.group])e[h]=new CKEDITOR.menuItem(this,h,j)};a.addMenuItems=function(h){for(var j in h)this.addMenuItem(j,h[j])};a.getMenuItem=function(h){return e[h]}},requires:["floatpanel"]});
(function(){function a(b){b.sort(function(c,e){if(c.group<e.group)return-1;else if(c.group>e.group)return 1;return c.order<e.order?-1:c.order>e.order?1:0})}CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(b,c){c=this._.definition=c||{};this.id=CKEDITOR.tools.getNextId();this.editor=b;this.items=[];this._.listeners=[];this._.level=c.level||1;var e=CKEDITOR.tools.extend({},c.panel,{css:b.skin.editor.css,level:this._.level-1,block:{}}),g=e.block.attributes=e.attributes||{};!g.role&&(g.role="menu");
this._.panelDefinition=e},_:{onShow:function(){var b=this.editor.getSelection();CKEDITOR.env.ie&&b&&b.lock();var c=b&&b.getStartElement(),e=this._.listeners;this.removeAll();for(var g=0;g<e.length;g++){var h=e[g](c,b);if(h)for(var j in h){var f=this.editor.getMenuItem(j);if(f){f.state=h[j];this.add(f)}}}},onClick:function(b){this.hide();if(b.onClick)b.onClick();else b.command&&this.editor.execCommand(b.command)},onEscape:function(b){var c=this.parent;if(c){c._.panel.hideChild();b=c._.panel._.panel._.currentBlock;
b._.markItem(b._.focusIndex)}else if(b==27){this.hide();this.editor.focus()}return false},onHide:function(){if(CKEDITOR.env.ie){var b=this.editor.getSelection();b&&b.unlock()}this.onHide&&this.onHide()},showSubMenu:function(b){var c=this._.subMenu,e=this.items[b];if(e=e.getItems&&e.getItems()){this._.panel.getBlock(this.id)._.focusIndex=b;if(c)c.removeAll();else{c=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},true));c.parent=this;c._.onClick=
CKEDITOR.tools.bind(this._.onClick,this)}for(var g in e){var h=this.editor.getMenuItem(g);if(h){h.state=e[g];c.add(h)}}b=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(b));c.show(b,2)}else this._.panel.hideChild()}},proto:{add:function(b){if(!b.order)b.order=this.items.length;this.items.push(b)},removeAll:function(){this.items=[]},show:function(b,c,e,g){if(!this.parent){this._.onShow();if(!this.items.length)return}c=c||(this.editor.lang.dir=="rtl"?2:1);var h=this.items,
j=this.editor,f=this._.panel,d=this._.element;if(!f){f=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);f.onEscape=CKEDITOR.tools.bind(function(t){if(this._.onEscape(t)===false)return false},this);f.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);d=f.addBlock(this.id,this._.panelDefinition.block);d.autoSize=true;var k=d.keys;k[40]="next";k[9]="next";k[38]="prev";k[CKEDITOR.SHIFT+9]="prev";k[32]="click";
k[j.lang.dir=="rtl"?37:39]="click";d=this._.element=d.element;d.addClass(j.skinClass);k=d.getDocument();k.getBody().setStyle("overflow","hidden");k.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(t){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,j.config.menu_subMenuDelay||400,this,[t])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},
this);this._.itemClickFn=CKEDITOR.tools.addFunction(function(t){var n=this.items[t];if(n.state==CKEDITOR.TRISTATE_DISABLED)this.hide();else if(n.getItems)this._.showSubMenu(t);else this._.onClick(n)},this)}a(h);k=j.container.getChild(1);k=['<div class="cke_menu'+(k&&k.hasClass("cke_mixed_dir_content")?" cke_mixed_dir_content":"")+'" role="presentation">'];for(var l=h.length,m=l&&h[0].group,p=0;p<l;p++){var r=h[p];if(m!=r.group){k.push('<div class="cke_menuseparator" role="separator"></div>');m=r.group}r.render(this,
p,k)}k.push("</div>");d.setHtml(k.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(f,this.id,b,c,e,g):f.showBlock(this.id,b,c,e,g);j.fire("menuShow",[f])},addListener:function(b){this._.listeners.push(b)},hide:function(){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide()}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(b,c,e){CKEDITOR.tools.extend(this,e,{order:0,className:"cke_button_"+c});this.group=b._.menuGroups[this.group];this.editor=
b;this.name=c},proto:{render:function(b,c,e){var g=b.id+String(c),h=typeof this.state=="undefined"?CKEDITOR.TRISTATE_OFF:this.state,j=" cke_"+(h==CKEDITOR.TRISTATE_ON?"on":h==CKEDITOR.TRISTATE_DISABLED?"disabled":"off"),f=this.label;if(this.className)j+=" "+this.className;var d=this.getItems;e.push('<span class="cke_menuitem'+(this.icon&&this.icon.indexOf(".png")==-1?" cke_noalphafix":"")+'"><a id="',g,'" class="',j,'" href="javascript:void(\'',(this.label||"").replace("'",""),'\')" title="',this.label,
'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(d?'aria-haspopup="true"':"")+(h==CKEDITOR.TRISTATE_DISABLED?'aria-disabled="true"':"")+(h==CKEDITOR.TRISTATE_ON?'aria-pressed="true"':""));if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)e.push(' onkeypress="return false;"');CKEDITOR.env.gecko&&e.push(' onblur="this.style.cssText = this.style.cssText;"');g=(this.iconOffset||0)*-16;e.push(' onmouseover="CKEDITOR.tools.callFunction(',b._.itemOverFn,",",c,');" onmouseout="CKEDITOR.tools.callFunction(',
b._.itemOutFn,",",c,');" onclick="CKEDITOR.tools.callFunction(',b._.itemClickFn,",",c,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(this.icon?' style="background-image:url('+CKEDITOR.getUrl(this.icon)+");background-position:0 "+g+'px;"':"")+'></span></span><span class="cke_label">');if(d)e.push('<span class="cke_menuarrow">',"<span>&#",this.editor.lang.dir=="rtl"?"9668":"9658",";</span>","</span>");e.push(f,"</span></a></span>")}}})})();CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div";
(function(){var a=function(c,e){return c._.modes&&c._.modes[e||c.mode]},b;CKEDITOR.plugins.add("editingblock",{init:function(c){if(c.config.editingBlock){c.on("themeSpace",function(e){if(e.data.space=="contents")e.data.html+="<br>"});c.on("themeLoaded",function(){c.fireOnce("editingBlockReady")});c.on("uiReady",function(){c.setMode(c.config.startupMode)});c.on("afterSetData",function(){if(!b){var e=function(){b=true;a(c).loadData(c.getData());b=false};if(c.mode)e();else c.on("mode",function(){e();
c.removeListener("mode",arguments.callee)})}});c.on("beforeGetData",function(){if(!b&&c.mode){b=true;c.setData(a(c).getData(),null,1);b=false}});c.on("getSnapshot",function(e){if(c.mode)e.data=a(c).getSnapshotData()});c.on("loadSnapshot",function(e){c.mode&&a(c).loadSnapshotData(e.data)});c.on("mode",function(e){e.removeListener();CKEDITOR.env.webkit&&c.container.on("focus",function(){c.focus()});if(c.config.startupFocus)CKEDITOR.env.gecko?setTimeout(function(){c.focus()},500):c.focus();setTimeout(function(){c.fireOnce("instanceReady");
CKEDITOR.fire("instanceReady",null,c)},0)});c.on("destroy",function(){this.mode&&this._.modes[this.mode].unload(this.getThemeSpace("contents"))})}}});CKEDITOR.editor.prototype.mode="";CKEDITOR.editor.prototype.addMode=function(c,e){e.name=c;(this._.modes||(this._.modes={}))[c]=e};CKEDITOR.editor.prototype.setMode=function(c){var e,g=this.getThemeSpace("contents"),h=this.checkDirty();if(this.mode){if(c==this.mode)return;this.fire("beforeModeUnload");var j=a(this);e=j.getData();j.unload(g);this.mode=
""}g.setHtml("");j=a(this,c);if(!j)throw'[CKEDITOR.editor.setMode] Unknown mode "'+c+'".';if(!h)this.on("mode",function(){this.resetDirty();this.removeListener("mode",arguments.callee)});j.load(g,typeof e!="string"?this.getData():e)};CKEDITOR.editor.prototype.focus=function(){var c=a(this);c&&c.focus()}})();CKEDITOR.config.startupMode="wysiwyg";CKEDITOR.config.editingBlock=true;
(function(){function a(){try{var f=this.getSelection();if(f&&f.document.getWindow().$){var d=f.getStartElement(),k=new CKEDITOR.dom.elementPath(d);if(!k.compare(this._.selectionPreviousPath)){this._.selectionPreviousPath=k;this.fire("selectionChange",{selection:f,path:k,element:d})}}}catch(l){}}function b(){g=true;if(!e){c.call(this);e=CKEDITOR.tools.setTimeout(c,200,this)}}function c(){e=null;if(g){CKEDITOR.tools.setTimeout(a,0,this);g=false}}var e,g,h={modes:{wysiwyg:1,source:1},exec:function(f){switch(f.mode){case "wysiwyg":f.document.$.execCommand("SelectAll",
false,null);f.forceNextSelectionCheck();f.selectionChange();break;case "source":f=f.textarea.$;if(CKEDITOR.env.ie)f.createTextRange().execCommand("SelectAll");else{f.selectionStart=0;f.selectionEnd=f.value.length}f.focus()}},canUndo:false};CKEDITOR.plugins.add("selection",{init:function(f){f.on("contentDom",function(){var d=f.document,k=d.getBody(),l=d.getDocumentElement();if(CKEDITOR.env.ie){var m,p,r=1;k.on("focusin",function(q){if(q.data.$.srcElement.nodeName=="BODY")if(m){q=d.getCustomData("cke_locked_selection");
if(r&&!q)try{m.select()}catch(v){}m=null}});k.on("focus",function(){p=1;s()});k.on("beforedeactivate",function(q){if(!q.data.$.toElement){p=0;r=1}});if(CKEDITOR.env.ie&&CKEDITOR.env.version<8)f.on("blur",function(){try{f.document&&f.document.$.selection.empty()}catch(q){}});l.on("mousedown",function(){r=0});l.on("mouseup",function(){r=1});if(CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.version<8||CKEDITOR.env.quirks))l.on("click",function(q){q.data.getTarget().getName()=="html"&&f.getSelection().getRanges()[0].select()});
var t;k.on("mousedown",function(q){if(q.data.$.button==2)if(f.document.$.selection.type=="None")t=f.window.getScrollPosition();p=0});k.on("mouseup",function(q){if(q.data.$.button==2&&t){f.document.$.documentElement.scrollLeft=t.x;f.document.$.documentElement.scrollTop=t.y}t=null;p=1;setTimeout(function(){s(true)},0)});k.on("keydown",n);k.on("keyup",function(){p=1;s()});d.on("selectionchange",s);var n=function(){p=0},s=function(q){if(p){var v=f.document,x=f.getSelection(),G=x&&x.getNative();if(q&&
G&&G.type=="None")if(!v.$.queryCommandEnabled("InsertImage")){CKEDITOR.tools.setTimeout(s,50,this,true);return}var C;if(!(G&&G.type&&G.type!="Control"&&(C=G.createRange())&&(C=C.parentElement())&&(C=C.nodeName)&&C.toLowerCase()in{input:1,textarea:1})){m=G&&x.getRanges()[0];b.call(f)}}}}else{d.on("mouseup",b,f);d.on("keyup",b,f)}});f.on("contentDomUnload",f.forceNextSelectionCheck,f);f.addCommand("selectAll",h);f.ui.addButton("SelectAll",{label:f.lang.selectAll,command:"selectAll"});f.selectionChange=
b}});CKEDITOR.editor.prototype.getSelection=function(){return this.document&&this.document.getSelection()};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){var f=new CKEDITOR.dom.selection(this);return!f||f.isInvalid?null:f};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;CKEDITOR.dom.selection=function(f){var d=f.getCustomData("cke_locked_selection");if(d)return d;
this.document=f;this.isLocked=0;this._={cache:{}};if(CKEDITOR.env.ie){f=this.getNative().createRange();if(!f||f.item&&f.item(0).ownerDocument!=this.document.$||f.parentElement&&f.parentElement().ownerDocument!=this.document.$)this.isInvalid=true}return this};var j={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,th:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:CKEDITOR.env.ie?function(){return this._.cache.nativeSel||
(this._.cache.nativeSel=this.document.$.selection)}:function(){return this._.cache.nativeSel||(this._.cache.nativeSel=this.document.getWindow().$.getSelection())},getType:CKEDITOR.env.ie?function(){var f=this._.cache;if(f.type)return f.type;var d=CKEDITOR.SELECTION_NONE;try{var k=this.getNative(),l=k.type;if(l=="Text")d=CKEDITOR.SELECTION_TEXT;if(l=="Control")d=CKEDITOR.SELECTION_ELEMENT;if(k.createRange().parentElement)d=CKEDITOR.SELECTION_TEXT}catch(m){}return f.type=d}:function(){var f=this._.cache;
if(f.type)return f.type;var d=CKEDITOR.SELECTION_TEXT,k=this.getNative();if(k){if(k.rangeCount==1){k=k.getRangeAt(0);var l=k.startContainer;if(l==k.endContainer&&l.nodeType==1&&k.endOffset-k.startOffset==1&&j[l.childNodes[k.startOffset].nodeName.toLowerCase()])d=CKEDITOR.SELECTION_ELEMENT}}else d=CKEDITOR.SELECTION_NONE;return f.type=d},getRanges:function(){var f=CKEDITOR.env.ie?function(){function d(l){return(new CKEDITOR.dom.node(l)).getIndex()}var k=function(l,m){l=l.duplicate();l.collapse(m);
var p=l.parentElement();if(!p.hasChildNodes())return{container:p,offset:0};for(var r=p.children,t,n=l.duplicate(),s=0,q=r.length-1,v=-1,x;s<=q;){v=Math.floor((s+q)/2);t=r[v];n.moveToElementText(t);x=n.compareEndPoints("StartToStart",l);if(x>0)q=v-1;else if(x<0)s=v+1;else return{container:p,offset:d(t)}}if(v==-1||v==r.length-1&&x<0){n.moveToElementText(p);n.setEndPoint("StartToStart",l);n=n.text.replace(/(\r\n|\r)/g,"\n").length;r=p.childNodes;if(!n){t=r[r.length-1];return t.nodeType==CKEDITOR.NODE_ELEMENT?
{container:p,offset:r.length}:{container:t,offset:t.nodeValue.length}}for(p=r.length;n>0;)n-=r[--p].nodeValue.length;return{container:r[p],offset:-n}}else{n.collapse(x>0?true:false);n.setEndPoint(x>0?"StartToStart":"EndToStart",l);n=n.text.replace(/(\r\n|\r)/g,"\n").length;if(!n)return{container:p,offset:d(t)+(x>0?0:1)};for(;n>0;){t=t[x>0?"previousSibling":"nextSibling"];try{n-=t.nodeValue.length}catch(G){return{container:p,offset:d(t)}}}return{container:t,offset:x>0?-n:t.nodeValue.length+n}}};return function(){var l=
this.getNative(),m=l&&l.createRange(),p=this.getType();if(!l)return[];if(p==CKEDITOR.SELECTION_TEXT){l=new CKEDITOR.dom.range(this.document);p=k(m,true);l.setStart(new CKEDITOR.dom.node(p.container),p.offset);p=k(m);l.setEnd(new CKEDITOR.dom.node(p.container),p.offset);l.endContainer.getPosition(l.startContainer)&CKEDITOR.POSITION_PRECEDING&&l.endOffset<=l.startContainer.getIndex()&&l.collapse();return[l]}else if(p==CKEDITOR.SELECTION_ELEMENT){p=[];for(var r=0;r<m.length;r++){var t=m.item(r),n=t.parentNode,
s=0;for(l=new CKEDITOR.dom.range(this.document);s<n.childNodes.length&&n.childNodes[s]!=t;s++);l.setStart(new CKEDITOR.dom.node(n),s);l.setEnd(new CKEDITOR.dom.node(n),s+1);p.push(l)}return p}return[]}}():function(){var d=[],k,l=this.document,m=this.getNative();if(!m)return d;if(!m.rangeCount){k=new CKEDITOR.dom.range(l);k.moveToElementEditStart(l.getBody());d.push(k)}for(var p=0;p<m.rangeCount;p++){var r=m.getRangeAt(p);k=new CKEDITOR.dom.range(l);k.setStart(new CKEDITOR.dom.node(r.startContainer),
r.startOffset);k.setEnd(new CKEDITOR.dom.node(r.endContainer),r.endOffset);d.push(k)}return d};return function(d){var k=d===CKEDITOR.ONLY_FORMATTABLES,l=this._.cache;if(l.ranges&&!d)return l.ranges;else if(!l.ranges)l.ranges=new CKEDITOR.dom.rangeList(f.call(this));if(d)for(var m=l.ranges,p=0;p<m.length;p++){var r=m[p];k&&r.enlargeFormattables();if(r.getCommonAncestor()[k?"isReadOnlyNotFormattable":"isReadOnly"]())m.splice(p,1);if(!r.collapsed){d=r.startContainer;var t=r.endContainer,n=r.startOffset,
s=r.endOffset,q=r.clone(),v;if(v=d.isReadOnly())r.setStartAfter(v);if(d&&d.type==CKEDITOR.NODE_TEXT)n>=d.getLength()?q.setStartAfter(d):q.setStartBefore(d);if(t&&t.type==CKEDITOR.NODE_TEXT)s?q.setEndAfter(t):q.setEndBefore(t);d=new CKEDITOR.dom.walker(q);d.evaluator=function(x){if(x.type==CKEDITOR.NODE_ELEMENT&&x.isReadOnly()&&!(k&&x.getAttribute("formateditable")=="true")){var G=r.clone();r.setEndBefore(x);r.collapsed&&m.splice(p--,1);if(!(x.getPosition(q.endContainer)&CKEDITOR.POSITION_CONTAINS)){G.setStartAfter(x);
G.collapsed||m.splice(p+1,0,G)}return true}return false};d.next()}}return l.ranges}}(),getStartElement:function(){var f=this._.cache;if(f.startElement!==undefined)return f.startElement;var d;this.getNative();switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var k=this.getRanges()[0];if(k){if(k.collapsed){d=k.startContainer;if(d.type!=CKEDITOR.NODE_ELEMENT)d=d.getParent()}else{for(k.optimize();;){d=k.startContainer;if(k.startOffset==
(d.getChildCount?d.getChildCount():d.getLength())&&!d.isBlockBoundary())k.setStartAfter(d);else break}d=k.startContainer;if(d.type!=CKEDITOR.NODE_ELEMENT)return d.getParent();d=d.getChild(k.startOffset);if(!d||d.type!=CKEDITOR.NODE_ELEMENT)d=k.startContainer;else for(k=d.getFirst();k&&k.type==CKEDITOR.NODE_ELEMENT;){d=k;k=k.getFirst()}}d=d.$}}return f.startElement=d?new CKEDITOR.dom.element(d):null},getSelectedElement:function(){var f=this._.cache;if(f.selectedElement!==undefined)return f.selectedElement;
var d=this,k=CKEDITOR.tools.tryThese(function(){return d.getNative().createRange().item(0)},function(){for(var l=d.getRanges()[0],m,p,r=2;r&&!((m=l.getEnclosedNode())&&m.type==CKEDITOR.NODE_ELEMENT&&j[m.getName()]&&(p=m));r--)l.shrink(CKEDITOR.SHRINK_ELEMENT);return p.$});return f.selectedElement=k?new CKEDITOR.dom.element(k):null},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this._.cache.nativeSel={};this.isLocked=1;this.document.setCustomData("cke_locked_selection",
this)},unlock:function(f){var d=this.document,k=d.getCustomData("cke_locked_selection");if(k){d.setCustomData("cke_locked_selection",null);if(f){var l=k.getSelectedElement(),m=!l&&k.getRanges();this.isLocked=0;this.reset();d.getBody().focus();l?this.selectElement(l):this.selectRanges(m)}}if(!k||!f){this.isLocked=0;this.reset()}},reset:function(){this._.cache={}},selectElement:function(f){if(this.isLocked){var d=new CKEDITOR.dom.range(this.document);d.setStartBefore(f);d.setEndAfter(f);this._.cache.selectedElement=
f;this._.cache.startElement=f;this._.cache.ranges=new CKEDITOR.dom.rangeList(d);this._.cache.type=CKEDITOR.SELECTION_ELEMENT}else{if(CKEDITOR.env.ie){this.getNative().empty();try{d=this.document.$.body.createControlRange();d.addElement(f.$);d.select()}catch(k){d=this.document.$.body.createTextRange();d.moveToElementText(f.$);d.select()}finally{this.document.fire("selectionchange")}}else{d=this.document.$.createRange();d.selectNode(f.$);f=this.getNative();f.removeAllRanges();f.addRange(d)}this.reset()}},
selectRanges:function(f){if(this.isLocked){this._.cache.selectedElement=null;this._.cache.startElement=f[0]&&f[0].getTouchedStartNode();this._.cache.ranges=new CKEDITOR.dom.rangeList(f);this._.cache.type=CKEDITOR.SELECTION_TEXT}else{if(CKEDITOR.env.ie){if(f.length>1){var d=f[f.length-1];f[0].setEnd(d.endContainer,d.endOffset);f.length=1}f[0]&&f[0].select()}else{d=this.getNative();f.length&&d.removeAllRanges();for(var k=0;k<f.length;k++){if(k<f.length-1){var l=f[k],m=f[k+1],p=l.clone();p.setStart(l.endContainer,
l.endOffset);p.setEnd(m.startContainer,m.startOffset);if(!p.collapsed){p.shrink(CKEDITOR.NODE_ELEMENT,true);var r=p.getCommonAncestor();p=p.getEnclosedNode();if(r.isReadOnly()||p&&p.isReadOnly()){m.setStart(l.startContainer,l.startOffset);f.splice(k--,1);continue}}}l=f[k];m=this.document.$.createRange();r=l.startContainer;if(l.collapsed&&(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.version<10900)&&r.type==CKEDITOR.NODE_ELEMENT&&!r.getChildCount())r.appendText("");m.setStart(r.$,l.startOffset);
try{m.setEnd(l.endContainer.$,l.endOffset)}catch(t){m.setEnd(r.$,l.startOffset)}d.addRange(m)}}this.reset()}},createBookmarks:function(f){return this.getRanges().createBookmarks(f)},createBookmarks2:function(f){return this.getRanges().createBookmarks2(f)},selectBookmarks:function(f){for(var d=[],k=0;k<f.length;k++){var l=new CKEDITOR.dom.range(this.document);l.moveToBookmark(f[k]);d.push(l)}this.selectRanges(d);return this},getCommonAncestor:function(){var f=this.getRanges();return f[0].startContainer.getCommonAncestor(f[f.length-
1].endContainer)},scrollIntoView:function(){this.getStartElement().scrollIntoView()}}})();
(function(){var a=CKEDITOR.dom.walker.whitespaces(true),b=/\ufeff|\u00a0/,c={table:1,tbody:1,tr:1};CKEDITOR.dom.range.prototype.select=CKEDITOR.env.ie?function(e){var g=this.collapsed,h,j;if(this.startContainer.type==CKEDITOR.NODE_ELEMENT&&this.startContainer.getName()in c||this.endContainer.type==CKEDITOR.NODE_ELEMENT&&this.endContainer.getName()in c)this.shrink(CKEDITOR.NODE_ELEMENT,true);var f=this.createBookmark(),d=f.startNode,k;if(!g)k=f.endNode;f=this.document.$.body.createTextRange();f.moveToElementText(d.$);
f.moveStart("character",1);if(k){e=this.document.$.body.createTextRange();e.moveToElementText(k.$);f.setEndPoint("EndToEnd",e);f.moveEnd("character",-1)}else{h=d.getNext(a);h=!(h&&h.getText&&h.getText().match(b))&&(e||!d.hasPrevious()||d.getPrevious().is&&d.getPrevious().is("br"));j=this.document.createElement("span");j.setHtml("&#65279;");j.insertBefore(d);h&&this.document.createText("﻿").insertBefore(d)}this.setStartBefore(d);d.remove();if(g){if(h){f.moveStart("character",-1);f.select();this.document.$.selection.clear()}else f.select();
this.moveToPosition(j,CKEDITOR.POSITION_BEFORE_START);j.remove()}else{this.setEndBefore(k);k.remove();f.select()}this.document.fire("selectionchange")}:function(){var e=this.startContainer;this.collapsed&&e.type==CKEDITOR.NODE_ELEMENT&&!e.getChildCount()&&e.append(new CKEDITOR.dom.text(""));var g=this.document.$.createRange();g.setStart(e.$,this.startOffset);try{g.setEnd(this.endContainer.$,this.endOffset)}catch(h){if(h.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0){this.collapse(true);g.setEnd(this.endContainer.$,
this.endOffset)}else throw h;}if(e=this.document.getSelection().getNative()){e.removeAllRanges();e.addRange(g)}}})();
(function(){var a={elements:{$:function(b){var c=b.attributes;if((c=(c=(c=c&&c["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(c)))&&c.children[0])&&b.attributes["data-cke-resizable"]){var e=b.attributes.style;if(e){var g=/(?:^|\s)width\s*:\s*(\d+)/i.exec(e);b=g&&g[1];e=(g=/(?:^|\s)height\s*:\s*(\d+)/i.exec(e))&&g[1];if(b)c.attributes.width=b;if(e)c.attributes.height=e}}return c}}};CKEDITOR.plugins.add("fakeobjects",{requires:["htmlwriter"],afterInit:function(b){(b=
(b=b.dataProcessor)&&b.htmlFilter)&&b.addRules(a)}})})();CKEDITOR.editor.prototype.createFakeElement=function(a,b,c,e){var g=this.lang.fakeobjects;g=g[c]||g.unknown;a={"class":b,src:CKEDITOR.getUrl("images/spacer.gif"),"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,alt:g,title:g,align:a.getAttribute("align")||""};if(c)a["data-cke-real-element-type"]=c;if(e)a["data-cke-resizable"]=e;return this.document.createElement("img",{attributes:a})};
CKEDITOR.editor.prototype.createFakeParserElement=function(a,b,c,e){var g=this.lang.fakeobjects;g=g[c]||g.unknown;var h;h=new CKEDITOR.htmlParser.basicWriter;a.writeHtml(h);h=h.getHtml();a={"class":b,src:CKEDITOR.getUrl("images/spacer.gif"),"data-cke-realelement":encodeURIComponent(h),"data-cke-real-node-type":a.type,alt:g,title:g,align:a.attributes.align||""};if(c)a["data-cke-real-element-type"]=c;if(e)a["data-cke-resizable"]=e;return new CKEDITOR.htmlParser.element("img",a)};
CKEDITOR.editor.prototype.restoreRealElement=function(a){if(a.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;return CKEDITOR.dom.element.createFromHtml(decodeURIComponent(a.data("cke-realelement")),this.document)};CKEDITOR.plugins.add("richcombo",{requires:["floatpanel","listblock","button"],beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}});CKEDITOR.UI_RICHCOMBO=3;
CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(a){CKEDITOR.tools.extend(this,a,{title:a.label,modes:{wysiwyg:1}});a=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=a&&a.parent&&a.parent.getDocument()||CKEDITOR.document;a.className=(a.className||"")+" cke_rcombopanel";a.block={multiSelect:a.multiSelect,attributes:a.attributes};a.css=[$.getSassCommonURL("extensions/wikia/RTE/css/richcombo.scss")];this._={panelDefinition:a,items:{},state:CKEDITOR.TRISTATE_OFF}},
statics:{handler:{create:function(a){return new CKEDITOR.ui.richCombo(a)}}},proto:{renderHtml:function(a){var b=[];this.render(a,b);return b.join("")},render:function(a,b){var c=CKEDITOR.env,e="cke_"+this.id,g=CKEDITOR.tools.addFunction(function(f){var d=this._;if(d.state!=CKEDITOR.TRISTATE_DISABLED)if(d.justHidden!=true){this.createPanel(a);if(d.on)d.panel.hide();else{this.commit();var k=this.getValue();k?d.list.mark(k):d.list.unmarkAll();d.panel.showBlock(this.id,new CKEDITOR.dom.element(f),4)}}},
this),h={id:e,combo:this,focus:function(){CKEDITOR.document.getById(e).getChild(1).focus()},clickFn:g};a.on("mode",function(){this.setState(this.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);this.setValue("")},this);var j=CKEDITOR.tools.addFunction(function(f,d){f=new CKEDITOR.dom.event(f);var k=f.getKeystroke();switch(k){case 13:case 32:case 40:CKEDITOR.tools.callFunction(g,d);break;default:h.onkey(h,k)}f.preventDefault()});h.keyDownFn=j;b.push('<span class="cke_rcombo">',"<span id=",
e);this.className&&b.push(' class="',this.className,' cke_off"');b.push(">",'<span id="'+e+'_label" class=cke_label>',this.label,"</span>",'<a hidefocus=true title="',this.title,'" tabindex="-1"',c.gecko&&c.version>=10900&&!c.hc?"":" href=\"javascript:void('"+this.label+"')\"",' role="button" aria-labelledby="',e,'_label" aria-describedby="',e,'_text" aria-haspopup="true"');if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)b.push(' onkeypress="return false;"');CKEDITOR.env.gecko&&b.push(' onblur="this.style.cssText = this.style.cssText;"');
b.push(' onkeydown="CKEDITOR.tools.callFunction( ',j,', event, this );" onclick="CKEDITOR.tools.callFunction(',g,', this); return false;"><span><span id="'+e+'_text" class="cke_text cke_inline_label">'+this.label+"</span></span><span class=cke_openbutton>"+(CKEDITOR.env.hc?"<span>&#9660;</span>":CKEDITOR.env.air?"&nbsp;":"")+"</span></a></span></span>");if(this.onRender)this.onRender();return h},createPanel:function(a){if(!this._.panel){var b=this._.panelDefinition,c=this._.panelDefinition.block,
e=b.parent||CKEDITOR.document.getBody(),g=new CKEDITOR.ui.floatPanel(a,e,b),h=g.addListBlock(this.id,c),j=this;g.onShow=function(){a.fire("panelShow",{panel:this,me:j});j.document.getById("cke_"+j.id).getParent().addClass("cke_opened");j.className&&this.element.getFirst().addClass(j.className+"_panel");j.setState(CKEDITOR.TRISTATE_ON);h.focus(!j.multiSelect&&j.getValue());j._.on=1;if(j.onOpen)j.onOpen()};g.onHide=function(f){j.document.getById("cke_"+j.id).getParent().removeClass("cke_opened");j.className&&
this.element.getFirst().removeClass(j.className+"_panel");j.setState(j.modes&&j.modes[a.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);j._.on=0;if(!f&&j.onClose)j.onClose();j._.justHidden=true;setTimeout(function(){j._.justHidden=false},400)};g.onEscape=function(){g.hide();j.document.getById("cke_"+j.id).getFirst().getNext().focus()};h.onClick=function(f,d){a.fire("panelClick",{panel:this,me:j,value:f});j.document.getWindow().focus();j.onClick&&j.onClick.call(j,f,d);d?j.setValue(f,j._.items[f]):
j.setValue("");g.hide()};this._.panel=g;this._.list=h;g.getBlock(this.id).onHide=function(){j._.on=0;j.setState(CKEDITOR.TRISTATE_OFF)};a.on("toolbartabswitch",function(){j._.on&&g.hide()});this.init&&this.init()}},setValue:function(a,b){this._.value=a;var c=this.document.getById("cke_"+this.id+"_text");if(c){if(a||b)c.removeClass("cke_inline_label");else{b=this.label;c.addClass("cke_inline_label")}c.setHtml(typeof b!="undefined"?b:a)}},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},
mark:function(a){this._.list.mark(a)},hideItem:function(a){this._.list.hideItem(a)},hideGroup:function(a){this._.list.hideGroup(a)},showAll:function(){this._.list.showAll()},add:function(a,b,c){this._.items[a]=c||a;this._.list.add(a,b,c)},startGroup:function(a){this._.list.startGroup(a)},commit:function(){if(!this._.committed){this._.list.commit();this._.committed=1;CKEDITOR.ui.fire("ready",this)}this._.committed=1},setState:function(a){if(this._.state!=a){this.document.getById("cke_"+this.id).setState(a);
this._.state=a}}}});CKEDITOR.ui.prototype.addRichCombo=function(a,b){this.add(a,CKEDITOR.UI_RICHCOMBO,b)};CKEDITOR.plugins.add("htmlwriter");
CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();this.indentationChars="\t";this.selfClosingEnd=" />";this.lineBreakChars="\n";this.forceSimpleAmpersand=0;this.sortAttributes=1;this._.indent=0;this._.indentation="";this._.inPre=0;this._.rules={};var a=CKEDITOR.dtd,b;for(b in CKEDITOR.tools.extend({},a.$nonBodyContent,a.$block,a.$listItem,a.$tableContent))this.setRules(b,{indent:1,breakBeforeOpen:1,breakAfterOpen:1,breakBeforeClose:!a[b]["#"],
breakAfterClose:1});this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{indent:0})},proto:{openTag:function(a){var b=this._.rules[a];if(this._.indent)this.indentation();else if(b&&b.breakBeforeOpen){this.lineBreak();this.indentation()}this._.output.push("<",a)},openTagClose:function(a,b){var c=this._.rules[a];if(b)this._.output.push(this.selfClosingEnd);else{this._.output.push(">");if(c&&
c.indent)this._.indentation+=this.indentationChars}c&&c.breakAfterOpen&&this.lineBreak();a=="pre"&&(this._.inPre=1)},attribute:function(a,b){if(typeof b=="string"){this.forceSimpleAmpersand&&(b=b.replace(/&amp;/g,"&"));b=CKEDITOR.tools.htmlEncodeAttr(b)}this._.output.push(" ",a,'="',b,'"')},closeTag:function(a){var b=this._.rules[a];if(b&&b.indent)this._.indentation=this._.indentation.substr(this.indentationChars.length);if(this._.indent)this.indentation();else if(b&&b.breakBeforeClose){this.lineBreak();
this.indentation()}this._.output.push("</",a,">");a=="pre"&&(this._.inPre=0);b&&b.breakAfterClose&&this.lineBreak()},text:function(a){if(this._.indent){this.indentation();!this._.inPre&&(a=CKEDITOR.tools.ltrim(a))}this._.output.push(a)},comment:function(a){this._.indent&&this.indentation();this._.output.push("<\!--",a,"--\>")},lineBreak:function(){!this._.inPre&&this._.output.length>0&&this._.output.push(this.lineBreakChars);this._.indent=1},indentation:function(){this._.inPre||this._.output.push(this._.indentation);
this._.indent=0},setRules:function(a,b){var c=this._.rules[a];if(c)CKEDITOR.tools.extend(c,b,true);else this._.rules[a]=b}}});CKEDITOR.plugins.add("menubutton",{requires:["button","menu"],beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}});CKEDITOR.UI_MENUBUTTON=5;
(function(){var a=function(b){var c=this._;if(c.state!==CKEDITOR.TRISTATE_DISABLED){c.previousState=c.state;var e=c.menu;if(!e){e=c.menu=new CKEDITOR.menu(b,{panel:{className:b.skinClass+" cke_contextmenu",attributes:{"aria-label":b.lang.common.options}}});e.onHide=CKEDITOR.tools.bind(function(){this.setState(this.modes&&this.modes[b.mode]?c.previousState:CKEDITOR.TRISTATE_DISABLED)},this);this.onMenu&&e.addListener(this.onMenu)}if(c.on)e.hide();else{this.setState(CKEDITOR.TRISTATE_ON);e.show(CKEDITOR.document.getById(this._.id),
4)}}};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(b){delete b.panel;this.base(b);this.hasArrow=true;this.click=a},statics:{handler:{create:function(b){return new CKEDITOR.ui.menuButton(b)}}}})})();CKEDITOR.plugins.add("dialogui");
(function(){var a=function(f){this._||(this._={});this._["default"]=this._.initValue=f["default"]||"";this._.required=f.required||false;for(var d=[this._],k=1;k<arguments.length;k++)d.push(arguments[k]);d.push(true);CKEDITOR.tools.extend.apply(CKEDITOR.tools,d);return this._},b={build:function(f,d,k){return new CKEDITOR.ui.dialog.textInput(f,d,k)}},c={build:function(f,d,k){return new CKEDITOR.ui.dialog[d.type](f,d,k)}},e={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(f){this.setValue(this.getInitValue(),
f)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},g=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(f,d){if(!this._.domOnChangeRegistered){f.on("load",function(){this.getInputElement().on("change",function(){f.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this);this._.domOnChangeRegistered=true}this.on("change",
d)}},true),h=/^on([A-Z]\w+)/,j=function(f){for(var d in f)if(h.test(d)||d=="title"||d=="type")delete f[d];return f};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(f,d,k,l){if(!(arguments.length<4)){var m=a.call(this,d);m.labelId=CKEDITOR.tools.getNextId()+"_label";this._.children=[];CKEDITOR.ui.dialog.uiElement.call(this,f,d,k,"div",null,{role:"presentation"},function(){var p=[],r=d.required?" cke_required":"";if(d.labelLayout!="horizontal")p.push('<label class="cke_dialog_ui_labeled_label'+
r+'" ',' id="'+m.labelId+'"',' for="'+m.inputId+'"',' style="'+d.labelStyle+'">',d.label,"</label>",'<div class="cke_dialog_ui_labeled_content" role="presentation">',l.call(this,f,d),"</div>");else{r={type:"hbox",widths:d.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+r+'" id="'+m.labelId+'" for="'+m.inputId+'" style="'+d.labelStyle+'">'+CKEDITOR.tools.htmlEncode(d.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content">'+l.call(this,
f,d)+"</span>"}]};CKEDITOR.dialog._.uiElementBuilders.hbox.build(f,r,p)}return p.join("")})}},textInput:function(f,d,k){if(!(arguments.length<3)){a.call(this,d);var l=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",m={"class":"cke_dialog_ui_input_"+d.type,id:l,type:"text"};if(d.validate)this.validate=d.validate;if(d.maxLength)m.maxlength=d.maxLength;if(d.size)m.size=d.size;if(d.controlStyle)m.style=d.controlStyle;var p=this,r=false;f.on("load",function(){p.getInputElement().on("keydown",function(t){if(t.data.getKeystroke()==
13)r=true});p.getInputElement().on("keyup",function(t){if(t.data.getKeystroke()==13&&r){f.getButton("ok")&&setTimeout(function(){f.getButton("ok").click()},0);r=false}},null,null,1E3)});CKEDITOR.ui.dialog.labeledElement.call(this,f,d,k,function(){var t=['<div class="cke_dialog_ui_input_',d.type,'" role="presentation"'];d.width&&t.push('style="width:'+d.width+'" ');t.push("><input ");m["aria-labelledby"]=this._.labelId;this._.required&&(m["aria-required"]=this._.required);for(var n in m)t.push(n+'="'+
m[n]+'" ');t.push(" /></div>");return t.join("")})}},textarea:function(f,d,k){if(!(arguments.length<3)){a.call(this,d);var l=this,m=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",p={};if(d.validate)this.validate=d.validate;p.rows=d.rows||5;p.cols=d.cols||20;CKEDITOR.ui.dialog.labeledElement.call(this,f,d,k,function(){p["aria-labelledby"]=this._.labelId;this._.required&&(p["aria-required"]=this._.required);var r=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea class="cke_dialog_ui_input_textarea" id="',
m,'" '],t;for(t in p)r.push(t+'="'+CKEDITOR.tools.htmlEncode(p[t])+'" ');r.push(">",CKEDITOR.tools.htmlEncode(l._["default"]),"</textarea></div>");return r.join("")})}},checkbox:function(f,d,k){if(!(arguments.length<3)){var l=a.call(this,d,{"default":!!d["default"]});if(d.validate)this.validate=d.validate;CKEDITOR.ui.dialog.uiElement.call(this,f,d,k,"span",null,null,function(){var m=CKEDITOR.tools.extend({},d,{id:d.id?d.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},true),p=[],r=CKEDITOR.tools.getNextId()+
"_label",t={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":r};j(m);if(d["default"])t.checked="checked";if(typeof m.controlStyle!="undefined")m.style=m.controlStyle;l.checkbox=new CKEDITOR.ui.dialog.uiElement(f,m,p,"input",null,t);p.push(' <label id="',r,'" for="',t.id,'">',CKEDITOR.tools.htmlEncode(d.label),"</label>");return p.join("")})}},radio:function(f,d,k){if(!(arguments.length<3)){a.call(this,d);if(!this._["default"])this._["default"]=this._.initValue=d.items[0][1];
if(d.validate)this.validate=d.valdiate;var l=[],m=this;CKEDITOR.ui.dialog.labeledElement.call(this,f,d,k,function(){for(var p=[],r=[],t=d.id?d.id+"_radio":CKEDITOR.tools.getNextId()+"_radio",n=0;n<d.items.length;n++){var s=d.items[n],q=s[2]!==undefined?s[2]:s[0],v=s[1]!==undefined?s[1]:s[0],x=CKEDITOR.tools.getNextId()+"_radio_input",G=x+"_label";x=CKEDITOR.tools.extend({},d,{id:x,title:null,type:null},true);q=CKEDITOR.tools.extend({},x,{title:q},true);var C={type:"radio","class":"cke_dialog_ui_radio_input",
name:t,value:v,"aria-labelledby":G},A=[];if(m._["default"]==v)C.checked="checked";j(x);j(q);if(typeof x.controlStyle!="undefined")x.style=x.controlStyle;l.push(new CKEDITOR.ui.dialog.uiElement(f,x,A,"input",null,C));A.push(" ");new CKEDITOR.ui.dialog.uiElement(f,q,A,"label",null,{id:G,"for":C.id},s[0]);p.push(A.join(""))}new CKEDITOR.ui.dialog.hbox(f,[],p,r);return r.join("")});this._.children=l}},button:function(f,d,k){if(arguments.length){if(typeof d=="function")d=d(f.getParentEditor());a.call(this,
d,{disabled:d.disabled||false});CKEDITOR.event.implementOn(this);var l=this;f.on("load",function(){var r=this.getElement();(function(){r.on("click",function(t){l.fire("click",{dialog:l.getDialog()});t.data.preventDefault()});r.on("keydown",function(t){if(t.data.getKeystroke()in{32:1}){l.click();t.data.preventDefault()}})})();r.unselectable()},this);if(typeof d["class"]!="undefined")d["class"]=d["class"].replace(/cke_dialog_ui_button_cancel/,"secondary").replace(/cke_dialog_ui_button_(\w+)/,"")+" wikia-button";
if(typeof d.className!="undefined"){d.className+=" wikia-button";if(typeof d.buttonType!="undefined")d.className+=" "+d.buttonType}else d.className="wikia-button";var m=CKEDITOR.tools.extend({},d);delete m.style;var p=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,f,m,k,"a",null,{style:d.style,href:"javascript:void(0)",title:d.label,hidefocus:"true","class":d["class"],role:"button","aria-labelledby":p},'<span id="'+p+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(d.label)+
"</span>")}},select:function(f,d,k){if(!(arguments.length<3)){var l=a.call(this,d);if(d.validate)this.validate=d.validate;l.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,f,d,k,function(){var m=CKEDITOR.tools.extend({},d,{id:d.id?d.id+"_select":CKEDITOR.tools.getNextId()+"_select"},true),p=[],r=[],t={id:l.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};if(d.size!=undefined)t.size=d.size;if(d.multiple!=undefined)t.multiple=d.multiple;
j(m);for(var n=0,s;n<d.items.length&&(s=d.items[n]);n++)r.push('<option value="',CKEDITOR.tools.htmlEncode(s[1]!==undefined?s[1]:s[0]),'" /> ',CKEDITOR.tools.htmlEncode(s[0]));if(typeof m.controlStyle!="undefined")m.style=m.controlStyle;l.select=new CKEDITOR.ui.dialog.uiElement(f,m,p,"select",null,t,r.join(""));return p.join("")})}},file:function(f,d,k){if(!(arguments.length<3)){if(d["default"]===undefined)d["default"]="";var l=CKEDITOR.tools.extend(a.call(this,d),{definition:d,buttons:[]});if(d.validate)this.validate=
d.validate;f.on("load",function(){CKEDITOR.document.getById(l.frameId).getParent().addClass("cke_dialog_ui_input_file")});CKEDITOR.ui.dialog.labeledElement.call(this,f,d,k,function(){l.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var m=CKEDITOR.env.isCustomDomain(),p=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',l.frameId,'" title="',d.label,'" src="javascript:void('];p.push(m?"(function(){document.open();document.domain='"+document.domain+"';document.close();})()":
"0");p.push(')"></iframe>');return p.join("")})}},fileButton:function(f,d,k){if(!(arguments.length<3)){a.call(this,d);var l=this;if(d.validate)this.validate=d.validate;var m=CKEDITOR.tools.extend({},d),p=m.onClick;m.className=(m.className?m.className+" ":"")+"cke_dialog_ui_button";m.onClick=function(r){var t=d["for"];if(!p||p.call(this,r)!==false){f.getContentElement(t[0],t[1]).submit();this.disable()}};f.on("load",function(){f.getContentElement(d["for"][0],d["for"][1])._.buttons.push(l)});CKEDITOR.ui.dialog.button.call(this,
f,m,k)}},html:function(){var f=/^\s*<[\w:]+\s+([^>]*)?>/,d=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,k=/\/$/;return function(l,m,p){if(!(arguments.length<3)){var r=[],t=m.html;if(t.charAt(0)!="<")t="<span>"+t+"</span>";var n=m.focus;if(n){var s=this.focus;this.focus=function(){s.call(this);typeof n=="function"&&n.call(this);this.fire("focus")};if(m.isFocusable)this.isFocusable=this.isFocusable;this.keyboardFocusable=true}CKEDITOR.ui.dialog.uiElement.call(this,l,m,r,"span",null,null,"");r=r.join("").match(f);
t=t.match(d)||["","",""];if(k.test(t[1])){t[1]=t[1].slice(0,-1);t[2]="/"+t[2]}p.push([t[1]," ",r[1]||"",t[2]].join(""))}}}(),fieldset:function(f,d,k,l,m){var p=m.label;this._={children:d};CKEDITOR.ui.dialog.uiElement.call(this,f,m,l,"fieldset",null,null,function(){var r=[];p&&r.push("<legend>"+p+"</legend>");for(var t=0;t<k.length;t++)r.push(k[t]);return r.join("")})}},true);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,
{setLabel:function(f){var d=CKEDITOR.document.getById(this._.labelId);if(d.getChildCount()<1)(new CKEDITOR.dom.text(f,CKEDITOR.document)).appendTo(d);else d.getChild(0).$.nodeValue=f;return this},getLabel:function(){var f=CKEDITOR.document.getById(this._.labelId);return!f||f.getChildCount()<1?"":f.getChild(0).getText()},eventProcessors:g},true);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){if(!this._.disabled)return this.fire("click",
{dialog:this._.dialog});this.getElement().$.blur();return false},enable:function(){this._.disabled=false;var f=this.getElement();f&&f.removeClass("cke_disabled")},disable:function(){this._.disabled=true;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(f,d){this.on("click",d)}},
true),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:true},true);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var f=this.selectParentTab();setTimeout(function(){var d=f.getInputElement();d&&d.$.focus()},0)},select:function(){var f=this.selectParentTab();setTimeout(function(){var d=f.getInputElement();if(d){d.$.focus();
d.$.select()}},0)},accessKeyUp:function(){this.select()},setValue:function(f){!f&&(f="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:true},e,true);CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(f,d,k){var l=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),
m=this.getInputElement().$;l.$.text=f;l.$.value=d===undefined||d===null?f:d;if(k===undefined||k===null)CKEDITOR.env.ie?m.add(l.$):m.add(l.$,null);else m.add(l.$,k);return this},remove:function(f){this.getInputElement().$.remove(f);return this},clear:function(){for(var f=this.getInputElement().$;f.length>0;)f.remove(0);return this},keyboardFocusable:true},e,true);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},
setValue:function(f,d){this.getInputElement().$.checked=f;!d&&this.fire("change",{value:f})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(f,d){if(CKEDITOR.env.ie){f.on("load",function(){var k=this._.checkbox.getElement();k.on("propertychange",function(l){l=l.data.$;l.propertyName=="checked"&&this.fire("change",{value:k.$.checked})},this)},this);this.on("change",d)}else return g.onChange.apply(this,
arguments);return null}},keyboardFocusable:true},e,true);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(f,d){for(var k=this._.children,l,m=0;m<k.length&&(l=k[m]);m++)l.getElement().$.checked=l.getValue()==f;!d&&this.fire("change",{value:f})},getValue:function(){for(var f=this._.children,d=0;d<f.length;d++)if(f[d].getElement().$.checked)return f[d].getValue();return null},accessKeyUp:function(){var f=this._.children,d;for(d=0;d<f.length;d++)if(f[d].getElement().$.checked){f[d].getElement().focus();
return}f[0].getElement().focus()},eventProcessors:{onChange:function(f,d){if(CKEDITOR.env.ie){f.on("load",function(){for(var k=this._.children,l=this,m=0;m<k.length;m++)k[m].getElement().on("propertychange",function(p){p=p.data.$;p.propertyName=="checked"&&this.$.checked&&l.fire("change",{value:this.getAttribute("value")})})},this);this.on("change",d)}else return g.onChange.apply(this,arguments);return null}},keyboardFocusable:true},e,true);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,
e,{getInputElement:function(){var f=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return f.$.forms.length>0?new CKEDITOR.dom.element(f.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(f){var d=/^on([A-Z]\w+)/,k,l=function(p,r,t,n){p.on("formLoaded",function(){p.getInputElement().on(t,n,p)})},m;for(m in f)if(k=m.match(d))this.eventProcessors[m]?
this.eventProcessors[m].call(this,this._.dialog,f[m]):l(this,this._.dialog,k[1].toLowerCase(),f[m]);return this},reset:function(){function f(){k.$.open();if(CKEDITOR.env.isCustomDomain())k.$.domain=document.domain;var s="";if(l.size)s=l.size-(CKEDITOR.env.ie?7:0);k.$.write(['<html dir="'+t+'" lang="'+n+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+t+'" lang="'+n+'" action="',CKEDITOR.tools.htmlEncode(l.action),
'"><input type="file" name="',CKEDITOR.tools.htmlEncode(l.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(s>0?s:""),'" /></form></body></html>',"<script>window.parent.CKEDITOR.tools.callFunction("+p+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+r+")}<\/script>"].join(""));k.$.close();for(s=0;s<m.length;s++)m[s].enable()}var d=this._,k=CKEDITOR.document.getById(d.frameId).getFrameDocument(),l=d.definition,m=d.buttons,p=this.formLoadedNumber,r=this.formUnloadNumber,
t=d.dialog._.editor.lang.dir,n=d.dialog._.editor.langCode;if(!p){p=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this);r=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this);this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(p);CKEDITOR.tools.removeFunction(r)})}CKEDITOR.env.gecko?setTimeout(f,500):f()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=
""},eventProcessors:{onChange:function(f,d){if(!this._.domOnChangeRegistered){this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this);this._.domOnChangeRegistered=true}this.on("change",d)}},keyboardFocusable:true},true);CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",b);
CKEDITOR.dialog.addUIElement("password",b);CKEDITOR.dialog.addUIElement("textarea",c);CKEDITOR.dialog.addUIElement("checkbox",c);CKEDITOR.dialog.addUIElement("radio",c);CKEDITOR.dialog.addUIElement("button",c);CKEDITOR.dialog.addUIElement("select",c);CKEDITOR.dialog.addUIElement("file",c);CKEDITOR.dialog.addUIElement("fileButton",c);CKEDITOR.dialog.addUIElement("html",c);CKEDITOR.dialog.addUIElement("fieldset",{build:function(f,d,k){for(var l=d.children,m,p=[],r=[],t=0;t<l.length&&(m=l[t]);t++){var n=
[];p.push(n);r.push(CKEDITOR.dialog._.uiElementBuilders[m.type].build(f,m,n))}return new CKEDITOR.ui.dialog[d.type](f,r,p,k,d)}})})();CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL=2;CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b);CKEDITOR.tools.extend(this,{className:"",css:[]});this.id=CKEDITOR.tools.getNextId();this.document=a;this._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};
CKEDITOR.ui.panel.prototype={renderHtml:function(a){var b=[];this.render(a,b);return b.join("")},render:function(a,b){var c=this.id;b.push('<div class="',a.skinClass,'" lang="',a.langCode,'" role="presentation" style="display:none;z-index:'+(a.config.baseFloatZIndex+1)+'"><div id=',c," dir=",a.lang.dir,' role="presentation" class="cke_panel cke_',a.lang.dir);this.className&&b.push(" ",this.className);b.push('">');if(this.forceIFrame||this.css.length){b.push('<iframe id="',c,'_frame" frameborder="0" role="application" src="javascript:void(');
b.push(CKEDITOR.env.isCustomDomain()?"(function(){document.open();document.domain='"+document.domain+"';document.close();})()":"0");b.push(')"></iframe>')}b.push("</div></div>");return c},getHolderElement:function(){var a=this._.holder;if(!a){if(this.forceIFrame||this.css.length){var b=this.document.getById(this.id+"_frame"),c=b.getParent();a=c.getAttribute("dir");var e=c.getParent().getAttribute("class");c=c.getParent().getAttribute("lang");var g=b.getFrameDocument();b=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=
true;if(this.onLoad)this.onLoad()},this));a='<!DOCTYPE html><html dir="'+a+'" class="'+e+'_container" lang="'+c+'"><head><style>.'+e+'_container{visibility:hidden}</style></head><body class="cke_'+a+" cke_panel_frame "+CKEDITOR.env.cssClass+'" style="margin:0;padding:0" onload="( window.CKEDITOR || window.parent.CKEDITOR ).tools.callFunction('+b+');"></body>'+CKEDITOR.tools.buildStyleHtml(this.css)+"</html>";g.write(a);g.getWindow().$.CKEDITOR=CKEDITOR;g.on("key"+(CKEDITOR.env.opera?"press":"down"),
function(h){var j=h.data.getKeystroke(),f=this.document.getById(this.id).getAttribute("dir");if(this._.onKeyDown&&this._.onKeyDown(j)===false)h.data.preventDefault();else if(j==27||j==(f=="rtl"?39:37))this.onEscape&&this.onEscape(j)===false&&h.data.preventDefault()},this);a=g.getBody();a.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(b)}else a=this.document.getById(this.id);this._.holder=a}return a},addBlock:function(a,b){b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),
b);this._.currentBlock||this.showBlock(a);return b},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){a=this._.blocks[a];var b=this._.currentBlock,c=this.forceIFrame?this.document.getById(this.id+"_frame"):this._.holder;c.getParent().getParent().disableContextMenu();if(b){c.removeAttributes(b.attributes);b.hide()}this._.currentBlock=a;c.setAttributes(a.attributes);CKEDITOR.fire("ariaWidget",c);a._.focusIndex=-1;this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a);a.onMark=
function(e){c.setAttribute("aria-activedescendant",e.getId()+"_option")};a.onUnmark=function(){c.removeAttribute("aria-activedescendant")};a.show();return a},destroy:function(){this.element&&this.element.remove()}};
CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabIndex:-1,"class":"cke_panel_block",role:"presentation"},styles:{display:"none"}}));b&&CKEDITOR.tools.extend(this,b);if(!this.attributes.title)this.attributes.title=this.attributes["aria-label"];this.keys={};this._.focusIndex=-1;this.element.disableContextMenu()},_:{markItem:function(a){if(a!=-1){a=this.element.getElementsByTag("a").getItem(this._.focusIndex=
a);if(CKEDITOR.env.webkit||CKEDITOR.env.opera)a.getDocument().getWindow().focus();a.focus();this.onMark&&this.onMark(a)}}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){if(!this.onHide||this.onHide.call(this)!==true)this.element.setStyle("display","none")},onKeyDown:function(a){switch(this.keys[a]){case "next":a=this._.focusIndex;for(var b=this.element.getElementsByTag("a"),c;c=b.getItem(++a);)if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=a;c.focus();
break}return false;case "prev":a=this._.focusIndex;for(b=this.element.getElementsByTag("a");a>0&&(c=b.getItem(--a));)if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.focusIndex=a;c.focus();break}return false;case "click":a=this._.focusIndex;if(c=a>=0&&this.element.getElementsByTag("a").getItem(a))c.$.click?c.$.click():c.$.onclick();return false}return true}}});
CKEDITOR.plugins.add("listblock",{requires:["panel"],onLoad:function(){CKEDITOR.ui.panel.prototype.addListBlock=function(a,b){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),b))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,b){b=b||{};var c=b.attributes||(b.attributes={});(this.multiSelect=!!b.multiSelect)&&(c["aria-multiselectable"]=true);!c.role&&(c.role="listbox");this.base.apply(this,arguments);c=this.keys;c[40]="next";c[9]=
"next";c[38]="prev";c[CKEDITOR.SHIFT+9]="prev";c[32]="click";this._.pendingHtml=[];this._.items={};this._.groups={}},_:{close:function(){if(this._.started){this._.pendingHtml.push("</ul>");delete this._.started}},getClick:function(){if(!this._.click)this._.click=CKEDITOR.tools.addFunction(function(a){var b=true;if(this.multiSelect)b=this.toggle(a);else this.mark(a);if(this.onClick)this.onClick(a,b)},this);return this._.click}},proto:{add:function(a,b,c){var e=this._.pendingHtml,g=CKEDITOR.tools.getNextId();
if(!this._.started){e.push('<ul role="presentation" class=cke_panel_list>');this._.started=1;this._.size=this._.size||0}this._.items[a]=g;e.push("<li id=",g,' class=cke_panel_listItem role=presentation><a id="',g,'_option" _cke_focus=1 hidefocus=true title="',c||a,'" href="javascript:void(\'',a,'\')" onclick="CKEDITOR.tools.callFunction(',this._.getClick(),",'",a,"'); return false;\"",' role="option" aria-posinset="'+ ++this._.size+'">',b||a,"</a></li>")},startGroup:function(a){this._.close();var b=
CKEDITOR.tools.getNextId();this._.groups[a]=b;this._.pendingHtml.push('<h1 role="presentation" id=',b," class=cke_panel_grouptitle>",a,"</h1>")},commit:function(){this._.close();this.element.appendHtml(this._.pendingHtml.join(""));var a=this._.items,b=this.element.getDocument(),c;for(c in a)b.getById(a[c]+"_option").setAttribute("aria-setsize",this._.size);delete this._.size;this._.pendingHtml=[]},toggle:function(a){var b=this.isMarked(a);b?this.unmark(a):this.mark(a);return!b},hideGroup:function(a){var b=
(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();if(a){a.setStyle("display","none");b&&b.getName()=="ul"&&b.setStyle("display","none")}},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var a=this._.items,b=this._.groups,c=this.element.getDocument(),e;for(e in a)c.getById(a[e]).setStyle("display","");for(var g in b){a=c.getById(b[g]);e=a.getNext();a.setStyle("display","");e&&e.getName()=="ul"&&e.setStyle("display",
"")}},mark:function(a){this.multiSelect||this.unmarkAll();a=this._.items[a];var b=this.element.getDocument().getById(a);b.addClass("cke_selected");this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",true);this.element.setAttribute("aria-activedescendant",a+"_option");this.onMark&&this.onMark(b)},unmark:function(a){this.element.getDocument().getById(this._.items[a]).removeClass("cke_selected");this.onUnmark&&this.onUnmark(this._.items[a])},unmarkAll:function(){var a=this._.items,
b=this.element.getDocument(),c;for(c in a)b.getById(a[c]).removeClass("cke_selected");this.onUnmark&&this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;if(a){var b=this.element.getDocument().getById(this._.items[a]).getFirst();a=this.element.getElementsByTag("a");for(var c,e=-1;c=a.getItem(++e);)if(c.equals(b)){this._.focusIndex=e;break}setTimeout(function(){b.focus()},0)}}}})}});
CKEDITOR.themes.add("default",function(){function a(b,c){var e,g;if(g=(g=(g=b.config.sharedSpaces)&&g[c])&&CKEDITOR.document.getById(g)){var h=g.append(CKEDITOR.dom.element.createFromHtml('<span class="cke_shared " dir="'+b.lang.dir+'"><span class="'+b.skinClass+" "+b.id+" cke_editor_"+b.name+'"><span class="'+CKEDITOR.env.cssClass+'"><span class="cke_wrapper cke_'+b.lang.dir+'"><span class="cke_editor"><div class="cke_'+c+'"></div></span></span></span></span></span>',g.getDocument()));g.getCustomData("cke_hasshared")?
h.hide():g.setCustomData("cke_hasshared",1);e=h.getChild([0,0,0,0]);!b.sharedSpaces&&(b.sharedSpaces={});b.sharedSpaces[c]=e;b.on("focus",function(){for(var j=0,f,d=g.getChildren();f=d.getItem(j);j++)f.type==CKEDITOR.NODE_ELEMENT&&!f.equals(h)&&f.hasClass("cke_shared")&&f.hide();h.show()});b.on("destroy",function(){h.remove()})}return e}return{build:function(b){var c=b.name,e=b.element,g=b.elementMode;if(!(!e||g==CKEDITOR.ELEMENT_MODE_NONE)){g==CKEDITOR.ELEMENT_MODE_REPLACE&&e.hide();var h=b.fire("themeSpace",
{space:"top",html:""}).html,j=b.fire("themeSpace",{space:"contents",html:""}).html,f=b.fireOnce("themeSpace",{space:"bottom",html:""}).html,d=j&&b.config.height,k=b.config.tabIndex||b.element.getAttribute("tabindex")||0;if(j)isNaN(d)||(d+="px");else d="auto";var l="",m=b.config.width;if(m){isNaN(m)||(m+="px");l+="width: "+m+";"}m=h&&a(b,"top");var p=a(b,"bottom");m&&(m.setHtml(h),h="");p&&(p.setHtml(f),f="");var r=CKEDITOR.dom.element.createFromHtml(['<span id="cke_',c,'" class="',b.skinClass," ",
b.id," cke_editor_",c,'" dir="',b.lang.dir,'" title="',CKEDITOR.env.gecko?" ":"",'" lang="',b.langCode,'"'+(CKEDITOR.env.webkit?' tabindex="'+k+'"':"")+' role="application" aria-labelledby="cke_',c,'_arialbl"'+(l?' style="'+l+'"':"")+'><span id="cke_',c,'_arialbl" class="cke_voice_label">'+b.lang.editor+'</span><span class="',CKEDITOR.env.cssClass,'" role="presentation"><span class="cke_wrapper cke_',b.lang.dir,'" role="presentation"><table class="cke_editor" border="0" cellspacing="0" cellpadding="0" role="presentation"><tbody><tr',
h?"":' style="display:none"',' role="presentation"><td id="cke_top_',c,'" class="cke_top" role="presentation">',h,"</td></tr><tr",j?"":' style="display:none"',' role="presentation"><td id="cke_contents_',c,'" class="cke_contents" style="height:',d,'" role="presentation">',j,"</td></tr><tr",f?"":' style="display:none"',' role="presentation"><td id="cke_bottom_',c,'" class="cke_bottom" role="presentation">',f,"</td></tr></tbody></table><style>.",b.skinClass,"{visibility:hidden;}</style></span></span></span>"].join(""));
r.getChild([1,0,0,0,0]).unselectable();r.getChild([1,0,0,0,2]).unselectable();g==CKEDITOR.ELEMENT_MODE_REPLACE?r.insertAfter(e):e.append(r);b.container=r;r.disableContextMenu();b.on("contentDirChanged",function(t){t=(b.lang.dir!=t.data?"add":"remove")+"Class";r.getChild(1)[t]("cke_mixed_dir_content");var n=this.sharedSpaces&&this.sharedSpaces[this.config.toolbarLocation];n&&n.getParent().getParent()[t]("cke_mixed_dir_content")});b.fireOnce("themeLoaded");b.fireOnce("uiReady")}},buildDialog:function(b){var c=
CKEDITOR.tools.getNextNumber();b=CKEDITOR.dom.element.createFromHtml(['<div class="',b.id,"_dialog cke_editor_",b.name.replace(".","\\."),"_dialog cke_skin_",b.skinName,'" dir="',b.lang.dir,'" lang="',b.langCode,'" role="dialog" aria-labelledby="%title#"><table class="cke_dialog'," "+CKEDITOR.env.cssClass," cke_",b.lang.dir,'" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="%body" role="presentation"><div id="%title#" class="%title" role="presentation"></div><a id="%close_button#" class="%close_button" href="javascript:void(0)" title="'+
b.lang.common.close+'" role="button"><span class="cke_label">X</span></a><div id="%tabs#" class="%tabs" role="tablist"></div><table class="%contents" role="presentation"><tr><td id="%contents#" class="%contents" role="presentation"></td></tr><tr><td id="%footer#" class="%footer" role="presentation"></td></tr></table></div><div id="%tl#" class="%tl"></div><div id="%tc#" class="%tc"></div><div id="%tr#" class="%tr"></div><div id="%ml#" class="%ml"></div><div id="%mr#" class="%mr"></div><div id="%bl#" class="%bl"></div><div id="%bc#" class="%bc"></div><div id="%br#" class="%br"></div></td></tr></table>',
CKEDITOR.env.ie?"":"<style>.cke_dialog{visibility:hidden;}</style>","</div>"].join("").replace(/#/g,"_"+c).replace(/%/g,"cke_dialog_"));c=b.getChild([0,0,0,0,0]);var e=c.getChild(0),g=c.getChild(1);e.unselectable();g.unselectable();return{element:b,parts:{dialog:b.getChild(0),title:e,close:g,tabs:c.getChild(2),contents:c.getChild([3,0,0,0]),footer:c.getChild([3,0,1,0])}}},destroy:function(b){var c=b.container,e=b.element;if(c){c.clearCustomData();c.remove()}if(e){e.clearCustomData();b.elementMode==
CKEDITOR.ELEMENT_MODE_REPLACE&&e.show();delete b.element}}}}());CKEDITOR.editor.prototype.getThemeSpace=function(a){a="cke_"+a;return this._[a]||(this._[a]=CKEDITOR.document.getById(a+"_"+this.name))};
CKEDITOR.editor.prototype.resize=function(a,b,c,e){var g=this.container,h=CKEDITOR.document.getById("cke_contents_"+this.name);e=e?g.getChild(1):g;CKEDITOR.env.webkit&&e.setStyle("display","none");e.setSize("width",a,true);CKEDITOR.env.webkit&&e.setStyle("display","");h.setStyle("height",Math.max(b-(c?0:(e.$.offsetHeight||0)-(h.$.clientHeight||0)),0)+"px");this.fire("resize")};CKEDITOR.editor.prototype.getResizable=function(){return this.container};
window.RTE={config:{alignableElements:["p","div","td","th"],baseFloatZIndex:1E3,bodyClass:"WikiaArticle",bodyId:"bodyContent",contentsCss:$.getSassCommonURL("/extensions/wikia/RTE/css/content.scss"),coreStyles_bold:{element:"b",overrides:"strong"},coreStyles_italic:{element:"i",overrides:"em"},customConfig:"",dialog_backgroundCoverColor:"#000",dialog_backgroundCoverOpacity:window.skin=="oasis"?0.8:0.5,disableDragDrop:false,disableObjectResizing:true,entities:false,format_tags:"p;h2;h3;h4;h5;pre",
height:400,language:window.wgUserLanguage,removePlugins:"about,elementspath,filebrowser,flash,forms,horizontalrule,image,justify,link,liststyle,maximize,newpage,pagebreak,toolbar,save,scayt,smiley,wsc",resize_enabled:false,skin:"wikia",startupFocus:true,theme:"wikia",toolbar:"Wikia",toolbarCanCollapse:false},instance:false,instanceId:window.RTEInstanceId,loaded:false,loadTime:false,stuffNode:false,plugins:["comment","dialog","dragdrop","edit-buttons","entities","gallery","justify","link","linksuggest",
"media","modeswitch","overlay","paste","placeholder","plbelement","poll","signature","spellchecker","template","temporary-save","toolbar","tools","track","widescreen"],log:function(a){$().log(a,"RTE")},ajax:function(a,b,c){if(typeof b!="object")b={};b.method=a;jQuery.post(window.wgScript+"?action=ajax&rs=RTEAjax",b,function(e){typeof c=="function"&&c(e)},"json")},track:function(){var a=["ckeditor"];for(i=0;i<arguments.length;i++)a.push(arguments[i]);typeof jQuery.tracker!="undefined"&&jQuery.tracker.byStr(a.join("/"))},
init:function(a){GlobalTriggers.fire("rtebeforeinit",RTE,CKEDITOR);CKEDITOR.timestamp=window.wgStyleVersion;CKEDITOR.dtd.pre.img=1;CKEDITOR.dtd.p.center=1;CKEDITOR.dtd.table.img=1;CKEDITOR.dtd.dt.ul=1;CKEDITOR.dtd.dt.ol=1;RTE.config.startupMode=a;RTE.config.disableDragDrop=CKEDITOR.env.gecko&&(CKEDITOR.env.geckoRelease=="1.9.2.9"||CKEDITOR.env.geckoRelease=="1.9.2.10");RTE.config.disableDragDrop&&RTE.log("media drag&drop disabled");RTE.loadPlugins();RTE.stuffNode=$("<div>",{id:"RTEStuff"}).appendTo("body");
RTE.instance=CKEDITOR.replace("wpTextbox1",RTE.config);RTE.loadCss();CKEDITOR.on("instanceReady",RTE.onEditorReady);RTE.instance.on("modeSwitch",function(){RTE.modeSwitch(RTE.instance.mode)});RTE.instance.on("mode",function(){RTE.loading(false);RTE.log('mode "'+this.mode+'" is loaded')});RTE.instance.on("dataReady",function(){this.mode=="wysiwyg"&&this.fire("wysiwygModeReady")});RTE.instance.on("wysiwygModeReady",RTE.onWysiwygModeReady);RTE.instance.on("widescreen",RTE.onWidescreen);RTE.instance.on("getData",
RTE.filterHtml);RTE.loading(true);GlobalTriggers.fire("rteinit",RTE.instance)},loadCss:function(){var a=[];a.push(window.RTESiteCss);typeof WikiaEnableAutoPageCreate!="undefined"&&a.push(wgExtensionsPath+"/wikia/AutoPageCreate/AutoPageCreate.css");GlobalTriggers.fire("rterequestcss",a);for(var b=0;b<a.length;b++){var c=a[b].indexOf("?")>-1||a[b].indexOf("__am")>-1?"":"?"+CKEDITOR.timestamp;RTE.instance.addCss("@import url("+a[b]+c+");")}CKEDITOR.env.ie&&RTE.config.disableObjectResizing&&RTE.instance.addCss("img {behavior:url("+
RTE.constants.localPath+"/css/behaviors/disablehandles.htc)}")},loadPlugins:function(){for(var a=[],b=0;b<RTE.plugins.length;b++){var c=RTE.plugins[b];a.push("rte-"+c);CKEDITOR.plugins.addExternal("rte-"+c,CKEDITOR.basePath+"../js/plugins/"+c+"/")}RTE.config.extraPlugins=a.join(",")},onEditorReady:function(){RTE.tools.getThemeColors();RTE.instance.dataProcessor.writer.indentationChars="";RTE.instance.dataProcessor.writer.lineBreakChars="";CKEDITOR.plugins.sourcearea.commands.source.exec=function(a){a.mode==
"wysiwyg"&&a.fire("saveSnapshot");a.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);a.fire("modeSwitch")};RTE.loaded=true;RTE.loading(false);RTE.loadTime=((new Date).getTime()-window.wgRTEStart.getTime())/1E3;RTE.log("CKEditor v"+CKEDITOR.version+" ("+(window.RTEDevMode?"in development mode":CKEDITOR.revision)+') is ready in "'+RTE.instance.mode+'" mode (loaded in '+RTE.loadTime+" s)");RTE.instance.fire("RTEready");$(document.body).add(window).trigger("rteready");GlobalTriggers.fire("rteready",
RTE.instance);RTE.repositionRTEStuff();$(window).add("#EditPage").bind("resize",RTE.repositionRTEStuff)},onWysiwygModeReady:function(){RTE.log("onWysiwygModeReady");RTE.getEditor().attr("id",RTE.instance.config.bodyId).addClass("lang-"+window.wgContentLanguage);setTimeout(function(){if(CKEDITOR.env.opera){var a=RTE.getEditor().children().eq(0);a.is("br")&&a.remove()}},750)},onWidescreen:function(){RTE.repositionRTEStuff()},repositionRTEStuff:function(){RTE.stuffNode.css({left:0,top:0});var a=RTE.stuffNode.offset(),
b=$("#cke_contents_wpTextbox1").offset();RTE.stuffNode.css({left:parseInt(b.left-a.left)+"px",top:parseInt(b.top-a.top)+"px"})},getEditor:function(){return jQuery(RTE.instance.document.$.body)},loading:function(){},modeSwitch:function(a){RTE.log('switching from "'+a+'" mode');var b=RTE.instance,c=b.getData(),e=function(){RTE.log("error occured during mode switch");RTE.loading(false);RTE.instance.fire("modeSwitchCancelled");b.getCommand("source").setState(a=="wysiwyg"?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_ON);
RTE.track("switchMode","error");$.showModal(b.lang.errorPopupTitle,b.lang.modeSwitch.error,{width:400})};RTE.loading(true);switch(a){case "wysiwyg":RTE.ajax("html2wiki",{html:c,title:window.wgPageName},function(g){if(g){b.setMode("source");b.setData(g.wikitext);RTE.track("switchMode","wysiwyg2source")}else e()});break;case "source":RTE.ajax("wiki2html",{wikitext:c,title:window.wgPageName},function(g){if(g){if(typeof window.RTEEdgeCase!="undefined"&&window.RTEEdgeCase=="nowysiwyg"){RTE.log("article contains __NOWYSIWYG__ magic word");
g.edgecase={type:window.RTEEdgeCase,info:{title:window.RTEMessages.edgecase.title,content:window.RTEMessages.edgecase.content}}}if(g.edgecase){RTE.log("edgecase found!");RTE.tools.alert(g.edgecase.info.title,g.edgecase.info.content);b.getCommand("source").setState(CKEDITOR.TRISTATE_ON);RTE.loading(false);RTE.instance.fire("modeSwitchCancelled");RTE.track("switchMode","edgecase",g.edgecase.type)}else{b.setMode("wysiwyg");b.setData(g.html);RTE.instanceId=g.instanceId;RTE.track("switchMode","source2wysiwyg")}}else e()})}},
filterHtml:function(a){if(a.editor.mode=="wysiwyg")a.data.dataValue=a.data.dataValue.replace(' data-rte-instance="'+RTE.instanceId+'"',"").replace(/<div firebug[^>]+>[^<]+<\/div>/g,"")},constants:{localPath:window.RTELocalPath,urlProtocols:window.RTEUrlProtocols,validTitleChars:window.RTEValidTitleChars},messages:window.RTEMessages};CKEDITOR.config.bodyId="";CKEDITOR.config.baseBackgroundColor="#ddd";CKEDITOR.config.baseColor="#000";CKEDITOR.config.baseColor="#000";
CKEDITOR.config.toolbar_Wikia=[{name:"",data:[{msg:"textAppearance",groups:[["Format"],["Bold","Italic","Underline","Strike"],["BulletedList","NumberedList"],["Link","Unlink"],["Outdent","Indent"],["JustifyLeft","JustifyCenter","JustifyRight"]]},{msg:"insert",groups:[["Image","Gallery","Poll","Video"],["Table"],["Template"],["Signature"]]},{msg:"controls",groups:[["Undo","Redo"],window.skin=="oasis"?false:["Widescreen"],["Source"]]}]}];CKEDITOR.dom.element.prototype.hasAttributesOriginal=CKEDITOR.dom.element.prototype.hasAttributes;
CKEDITOR.dom.element.prototype.hasAttributes=function(){var a=this.hasAttributesOriginal();if(a==true){var b=["data-rte-washtml","data-rte-line-start","data-rte-empty-lines-before"];for(i=0;i<b.length;i++)if(this.hasAttribute(b[i]))a=false}return a};CKEDITOR.langRegExp=/lang\/([\w\-]+).js/;
CKEDITOR.getUrl=function(a){if(CKEDITOR.langRegExp.test(a)){a=a.match(CKEDITOR.langRegExp)[1];RTE.log('language "'+a+'" requested');return window.wgServer+wgScript+"?action=ajax&rs=RTEAjax&method=i18n&uselang="+a+"&cb="+window.wgMWrevId+"-"+window.wgStyleVersion}if(a.indexOf("://")==-1&&a.indexOf("/")!==0){if(a.indexOf("_source")==-1)a="_source/"+a;a=this.basePath+a}if(this.timestamp&&a.charAt(a.length-1)!="/")a+=(a.indexOf("?")>=0?"&":"?")+this.timestamp;return a};
CKEDITOR.editor.prototype.switchMode=function(a){if(this.mode!=a){RTE.log('switchMode("'+a+'")');CKEDITOR.plugins.sourcearea.commands.source.exec(this)}};
CKEDITOR.dom.element.prototype.setState=function(a){var b=this.getParent();switch(a){case CKEDITOR.TRISTATE_ON:b.addClass("cke_on");b.removeClass("cke_off");b.removeClass("cke_disabled");break;case CKEDITOR.TRISTATE_DISABLED:b.addClass("cke_disabled");b.removeClass("cke_off");b.removeClass("cke_on");break;default:b.addClass("cke_off");b.removeClass("cke_on");b.removeClass("cke_disabled")}};CKEDITOR.ONLY_FORMATTABLES=2;
jQuery.fn.getData=function(){var a=this.attr("data-rte-meta");if(!a)return{};a=decodeURIComponent(a);return $.secureEvalJSON(a)||{}};jQuery.fn.setData=function(a,b){var c={};if(typeof a=="object")c=a;else if(typeof a=="string")c[a]=b;c=jQuery().extend(true,this.getData(),c);var e=$.toJSON(c);this.attr("data-rte-meta",encodeURIComponent(e));return c};jQuery.fn.setPlaceholderType=function(a){$(this).attr("class","placeholder placeholder-"+a).setData("type",a)};
CKEDITOR.plugins.add("rte-comment",{init:function(){CKEDITOR.dialog.add("rte-comment",this.path+"dialogs/comment.js")}});RTE.commentEditor={placeholder:{},dialog:{},showCommentEditor:function(a){RTE.log("calling comment editor...");RTE.commentEditor.placeholder=a;RTE.instance.openDialog("rte-comment")}};
CKEDITOR.dialog.add("rte-comment",function(a){return{title:a.lang.commentEditor.title,resizable:CKEDITOR.DIALOG_RESIZE_NONE,minWidth:400,minHeight:150,contents:[{id:"comment",label:"Comment",elements:[{type:"textarea",id:"content"}]}],onOk:function(){var b=this.getValueOf("comment","content"),c=RTE.commentEditor.placeholder;if(b==""){RTE.log("removing comment");RTE.track("comment","dialog","delete");c.remove()}else{RTE.log("storing modified comment data: "+b);RTE.track("comment","dialog","save");
c.setData({wikitext:"<\!-- "+b+" --\>"});c.removeData("preview")}},onShow:function(){this._.element.addClass("wikiaEditorDialog");this._.element.addClass("commentEditorDialog");wikitext=RTE.commentEditor.placeholder.getData().wikitext.replace(/^<\!--\s+/,"").replace(/\s+--\>$/,"");this.setValueOf("comment","content",wikitext);this.setupTracking("comment",{ok:false})}}});
CKEDITOR.plugins.add("rte-dialog",{init:function(){CKEDITOR.dialog.prototype.getActiveTab=function(){return this._.currentTabId};CKEDITOR.dialog.prototype.enableSuggesionsOn=function(a,b){if(typeof window.os_enableSuggestionsOn=="function"){var c=a._.inputId;document.getElementById("RTEFakeForm").submit=function(){};b=typeof b!="undefined"&&b.length?b:[];window.wgSearchNamespaces=b;if(typeof window.os_map[c]=="undefined"){RTE.log('enabling MW suggest on "'+c+'"...');window.os_enableSuggestionsOn(c,
"RTEFakeForm");var e=$(window.os_createContainer(os_map[c]));c=$("#"+c);c.parent().css("position","relative").append(e);e.css("visibility","hidden");this._.suggestContainer=e;e=new CKEDITOR.dom.element(c[0]);var g=this,h;for(h in{keyup:1,keydown:1,keypress:1})e.on(h,function(j){if(j.data.getKeystroke()in{27:1,13:1}){var f=g._.suggestContainer;if(f.css("visibility")!="hidden"){g._.dontHide=true;j.data.stopPropagation();f.css("visibility","hidden")}}});h=function(j){if(this._.dontHide){RTE.log("dialog hide prevented");
j.data.hide=false;this._.dontHide=false}};this.on("ok",h);this.on("cancel",h)}else this._.suggestContainer=$("#"+os_map[c].container)}};CKEDITOR.dialog.prototype.setLoading=function(a){var b=this.getElement();b.removeClass("wikiaEditorLoading");a&&b.addClass("wikiaEditorLoading")};CKEDITOR.dialog.prototype.setupTracking=function(a,b){b=$().extend({cancel:1,close:1,ok:1,error:1},b);this._.wikiaTrack={sendEvent:b,sendEvents:true,name:a};var c=this;this.on("cancelClicked",function(g){c.fireTrackingEvent("cancel",
g)});this.on("close",function(g){c.fireTrackingEvent("close",g)});this.on("notvalid",function(g){c.fireTrackingEvent("error",g)});var e=this.getButton("ok");if(e)e.on("click",function(g){c.fireTrackingEvent("ok",g)})};CKEDITOR.dialog.prototype.fireTrackingEvent=function(a){var b=this._.wikiaTrack;if(b.sendEvents)if(b.sendEvent[a]){RTE.track(b.name,"dialog",a);if(a=="cancel"||a=="close")b.sendEvents=false}}}});
CKEDITOR.plugins.add("rte-dragdrop",{timeout:250,onDrop:function(a){RTE.log("drag&drop finished");setTimeout(function(){RTE.instance.fire("wysiwygModeReady");var b=RTE.getEditor().find("[data-rte-dragged]").removeAttr("data-rte-dragged");RTE.log("dropped element:");RTE.log(b);RTE.instance.fire("droppedElements",b);RTE.instance.fire("droppedElements",b);RTE.instance.fire("saveSnapshot");if(RTE.instance.getData()==""){RTE.log("undoing drag&drop");RTE.instance.execCommand("undo")}var c={pageX:a.pageX?
a.pageX:a.clientX,pageY:a.pageY?a.pageY:a.clientY};CKEDITOR.env.ie||b.trigger("dropped",[c])},this.timeout)},onDrag:function(a){if(typeof a.target.tagName=="undefined")return true;RTE.instance.fire("saveSnapshot");RTE.log("drag&drop: undo point");a=$(a.target);a.attr("data-rte-dragged",true);a.trigger("dragged");CKEDITOR.env.webkit&&RTE.instance.fire("wysiwygModeReady")},onDuringDragDrop:function(a){var b=parseInt($("#cke_contents_wpTextbox1").height()),c=RTE.instance.window.$;a=(a.pageY?a.pageY:
a.clientY)-(CKEDITOR.env.ie?c.document.body.parentNode.scrollTop:c.scrollY);if(a<50)c.scrollBy(0,-15);else a>=b-50&&c.scrollBy(0,15)},init:function(a){var b=this;a.on("wysiwygModeReady",function(){$(a.document.$).unbind(".dnd").bind("dragstart.dnd",b.onDrag).bind("drop.dnd",b.onDrop).bind("dragdrop.dnd",b.onDrop).bind("mousedown.dnd",b.onDrag).bind("mouseup.dnd",function(c){$(c.target).removeAttr("data-rte-dragged");c.preventDefault()}).bind("dblclick.dnd",function(c){CKEDITOR.env.gecko&&$(c.target).filter("img").attr("type")&&
RTE.tools.removeResizeBox()}).bind("dragover.dnd",b.onDuringDragDrop);CKEDITOR.env.ie&&RTE.getEditor().unbind(".dnd").bind("drop.dnd",b.onDrop).bind("dragover.dnd",b.onDuringDragDrop)})}});CKEDITOR.plugins.add("rte-edit-buttons",{init:function(a){a.on("instanceReady",function(){var b=$("#wpSave,#wpPreview,#wpDiff");b.attr("disabled",false);b.bind("click",function(){var c=$(this).attr("id");c=c.substring(2).toLowerCase();RTE.track(c,a.mode+"Mode")})})}});
CKEDITOR.plugins.add("rte-entities",{insideEntitySpan:false,init:function(a){var b=this;a.on("selectionChange",function(c){c=c.data.selection.getStartElement();if(c.hasAttribute("data-rte-entity")){c=c.getAttribute("data-rte-entity");RTE.log("entity span: &"+c+";");b.insideEntitySpan=true}else{b.insideEntitySpan&&RTE.log("entity span: leaving...");b.insideEntitySpan=false}})}});
CKEDITOR.plugins.add("rte-gallery",{init:function(a){var b=this;a.on("wysiwygModeReady",function(){var c=RTE.getEditor().find(".image-gallery");b.setupGallery(c)});if(typeof window.WikiaPhotoGallery!="undefined"){b.addButton(a,{type:WikiaPhotoGallery.TYPE_GALLERY,commandName:"addgallery",buttonName:"Gallery",buttonLabel:a.lang.photoGallery.gallery,buttonTooltip:a.lang.photoGallery.addGallery,buttonClass:"RTEGalleryButton"});b.addButton(a,{type:WikiaPhotoGallery.TYPE_SLIDESHOW,commandName:"addslideshow",
buttonName:"Slideshow",buttonLabel:a.lang.photoGallery.slideshow,buttonTooltip:a.lang.photoGallery.addSlideshow,buttonClass:"RTESlideshowButton"});b.addButton(a,{type:WikiaPhotoGallery.TYPE_SLIDER,commandName:"addslider",buttonName:"Slider",buttonLabel:a.lang.photoGallery.slider,buttonTooltip:a.lang.photoGallery.addSlider,buttonClass:"RTESliderButton"})}else RTE.log('WikiaPhotoGallery is not enabled here - disabling "Gallery" button')},addButton:function(a,b){a.addCommand(b.commandName,{exec:function(){WikiaPhotoGallery.showEditor({from:"wysiwyg",
type:b.type})}});a.ui.addButton(b.buttonName,{label:b.buttonLabel,title:b.buttonTooltip,className:b.buttonClass,command:b.commandName})},setupGallery:function(a){a.unbind(".gallery").bind("click.gallery edit.gallery",function(){var b=$(this);WikiaPhotoGallery.showEditor({from:"wysiwyg",gallery:b})}).attr("title",function(){var b=$(this).getData().type==1?"tooltip":"tooltipSlideshow";return RTE.instance.lang.photoGallery[b]})}});
(function(){function a(e){var g=e.editor.getCommand(this.name),h;h=e.editor;e=e.data.path;e=e.block||e.blockLimit;h=typeof h.config.alignableElements=="object"?h.config.alignableElements:[];if(!e||h.length>1&&h.indexOf(e.getName())==-1)h=CKEDITOR.TRISTATE_DISABLED;else{h=e.getComputedStyle("text-align").replace(c,"");h=!h&&this.isDefaultAlign||h==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF}g.state=h;g.fire("state")}function b(e,g,h){this.name=g;this.value=h;e=e.config.contentsLangDirection;
this.isDefaultAlign=h=="left"&&e=="ltr"||h=="right"&&e=="rtl"}var c=/(-moz-|-webkit-|start|auto)/i;b.prototype={exec:function(e){var g=e.getSelection();if(g){for(var h=g.createBookmarks(),j=g.getRanges(),f,d,k=j.length-1;k>=0;k--)for(f=j[k].createIterator();d=f.getNextParagraph();){d.removeAttribute("align");d.removeAttribute("data-rte-style");d.removeAttribute("data-rte-attribs");d.getName()=="p"&&d.removeAttribute("data-rte-washtml");if(d.getName()=="th")this.isDefaultAlign=this.value=="center";
this.state==CKEDITOR.TRISTATE_OFF&&!this.isDefaultAlign?d.setStyle("text-align",this.value):d.removeStyle("text-align")}e.focus();e.forceNextSelectionCheck();g.selectBookmarks(h)}}};CKEDITOR.plugins.add("rte-justify",{init:function(e){var g=new b(e,"justifyleft","left"),h=new b(e,"justifycenter","center"),j=new b(e,"justifyright","right"),f=new b(e,"justifyblock","justify");e.addCommand("justifyleft",g);e.addCommand("justifycenter",h);e.addCommand("justifyright",j);e.addCommand("justifyblock",f);
e.ui.addButton("JustifyLeft",{label:e.lang.justify.left,command:"justifyleft"});e.ui.addButton("JustifyCenter",{label:e.lang.justify.center,command:"justifycenter"});e.ui.addButton("JustifyRight",{label:e.lang.justify.right,command:"justifyright"});e.ui.addButton("JustifyBlock",{label:e.lang.justify.block,command:"justifyblock"});e.on("selectionChange",CKEDITOR.tools.bind(a,g));e.on("selectionChange",CKEDITOR.tools.bind(a,j));e.on("selectionChange",CKEDITOR.tools.bind(a,h));e.on("selectionChange",
CKEDITOR.tools.bind(a,f))},requires:["domiterator"]})})();CKEDITOR.tools.extend(CKEDITOR.config,{alignableElements:null});
CKEDITOR.plugins.add("rte-link",{init:function(a){a.addCommand("link",new CKEDITOR.dialogCommand("link"));a.addCommand("unlink",new CKEDITOR.unlinkCommand);a.ui.addButton("Link",{label:a.lang.link.add,command:"link"});a.ui.addButton("Unlink",{label:a.lang.unlink,command:"unlink"});CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");a.addMenuItems&&a.addMenuItems({link:{label:a.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:a.lang.unlink,command:"unlink",group:"link",order:5}});
a.on("selectionChange",function(b){b=b.data.path.elements;for(var c=b.length,e=false,g=0;g<c;g++)if(b[g].is("a")){e=true;break}a.getCommand("link").setState(e?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});a.contextMenu&&a.contextMenu.addListener(function(b){if(!b)return null;b=b.is("img")&&b.getAttribute("_cke_real_element_type")=="anchor";if(!b){if(!(b=CKEDITOR.plugins.link.getSelectedLink(a)))return null;b=b.getAttribute("name")&&!b.getAttribute("href")}return b?{anchor:CKEDITOR.TRISTATE_OFF}:{link:CKEDITOR.TRISTATE_OFF,
unlink:CKEDITOR.TRISTATE_OFF}});a.on("afterPaste",function(){var b=RTE.getEditor().find("a").not("a[data-rte-meta]");if(b.exists()){RTE.log("pasted links");RTE.log(b);b.each(function(){var c=$(this),e=c.attr("href");if(!RTE.tools.isExternalLink(e)){var g="";if(e.indexOf("&action=edit")==-1)g=c.attr("title");else if(e=e.match("title=(.*)&action=edit")){g=e[1];g=decodeURIComponent(g);g=g.replace(/_/g," ")}if(g!=""){RTE.log('local link pointing to "'+g+'" found');g={type:"internal",link:g,text:c.text(),
noforce:true,wasblank:false};c.setData(g)}}})}})}});CKEDITOR.plugins.link={getSelectedLink:function(a){var b;try{b=a.getSelection().getRanges()[0]}catch(c){return null}b.shrink(CKEDITOR.SHRINK_TEXT);return b.getCommonAncestor().getAscendant("a",true)}};CKEDITOR.unlinkCommand=function(){};
CKEDITOR.unlinkCommand.prototype={exec:function(a){for(var b=a.getSelection(),c=b.createBookmarks(),e=b.getRanges(),g,h=0;h<e.length;h++){g=e[h].getCommonAncestor(true);(g=g.getAscendant("a",true))&&this.removeLink(a,g,e[h])}b.selectBookmarks(c)},removeLink:function(a,b){b.remove(true)}};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:true,linkShowTargetTab:true});
CKEDITOR.dialog.add("link",function(a){var b=CKEDITOR.plugins.link,c=false,e,g=function(k){var l=CKEDITOR.dialog.getCurrent();if(k=="external"){k=l.getContentElement("internal","linktype");k.getValue()!="ext"&&k.setValue("ext");$(".link-type-note span").html(a.lang.link.status.external);$(".link-type-note img")[0].className="sprite external"}else if(k=="internal"){k=l.getContentElement("internal","linktype");k.getValue()!="wiki"&&k.setValue("wiki");h();l.enableSuggesionsOn(l.getContentElement("internal",
"name"))}},h=function(){var k=CKEDITOR.dialog.getCurrent().getContentElement("internal","name").getValue();if(k){$(".link-type-note span").html(a.lang.link.status.checking);$(".link-type-note img")[0].className="sprite progress";RTE.ajax("checkInternalLink",{title:k},function(l){if(l.exists){$(".link-type-note span").html(a.lang.link.status.exists);$(".link-type-note img")[0].className="link-icon link-yes"}else{$(".link-type-note span").html(a.lang.link.status.notexists);$(".link-type-note img")[0].className=
"link-icon link-no"}})}e=null},j=function(k,l){function m(t,n,s){t=CKEDITOR.dialog.getCurrent();t.setValueOf("internal","name",n);t.setValueOf("internal","label",s||"")}RTE.log("opening link dialog");c=false;var p=l?$(l.$).getData():null;if(p){if(typeof p.type=="undefined"){RTE.log("pasted link detected");var r=l.getAttribute("href");if(RTE.tools.isExternalLink(r)){p={type:"external",link:r,text:l.getText()};g("external")}}else switch(p.type){case "internal":g("internal");setTimeout(h,200);break;
case "external":case "external-raw":g("external")}RTE.log(p);this.getContentElement("internal","label");switch(p.type){case "external":m("internal",p.link);if(p.linktype!="autonumber"){this.setValueOf("internal","label",p.text);c=true}break;case "external-raw":m("external",p.link);break;case "internal":m("internal",p.link,p.text);c=true}}else{this.getContentElement("internal","label");p=RTE.tools.getSelectionContent();g("internal");r="internal";if(p){if(RTE.tools.isExternalLink(p)){g("external");
r="external"}c=true;m(r,p,p);setTimeout(h,200);RTE.log('link: using selected text "'+p+'" for new '+r+" link")}else RTE.log("link: fresh link")}this._.selectedElement=l},f=function(k){var l=k.getSelection(),m=l.getRanges();if(m.length==1&&m[0].collapsed){var p=new CKEDITOR.dom.text("",k.document);m[0].insertNode(p);m[0].selectNodeContents(p);l.selectRanges(m)}m=new CKEDITOR.style({element:"a",attributes:{"data-rte-new-link-temporary":true}});m.type=CKEDITOR.STYLE_INLINE;m.apply(k.document);m=RTE.getEditor().find("a[data-rte-new-link-temporary]");
m.removeAttr("data-rte-new-link-temporary");m=new CKEDITOR.dom.element(m[0]);if(CKEDITOR.env.gecko||CKEDITOR.env.webkit){k=new CKEDITOR.dom.text(" ",k.document);k.insertAfter(m);l.selectElement(k);CKEDITOR.env.gecko&&k.remove()}return m},d=a.lang.link;return{title:a.lang.link.title,minWidth:500,minHeight:185,contents:[{id:"internal",label:d.internal.tab,title:d.internal.tab,elements:[{type:"html",html:'<p class="link-type-note"><span>...</span><img alt="Link Status" class="" src="http://images1.wikia.nocookie.net/__cb21710/common/skins/common/blank.gif" /></p>',
id:"linkdisplay"},{type:"text",label:a.lang.link.label.target,id:"name",onKeyUp:function(){var k=this.getDialog().getContentElement("internal","label");RTE.tools.isExternalLink(this.getValue())&&g("external");if(this.getDialog().getContentElement("internal","linktype").getValue()=="wiki"){e&&clearTimeout(e);$(".link-type-note span").html(a.lang.link.status.checking);$(".link-type-note img")[0].className="sprite progress";e=setTimeout(h,1E3)}if(k.getValue()=="")c=false;!c&&k.isEnabled()&&k.setValue(this.getValue())},
validate:function(){if(this.getDialog().getContentElement("internal","linktype").getValue()=="wiki"){var k=RegExp("^(#(.+))|["+RTE.constants.validTitleChars+"]+$");return CKEDITOR.dialog.validate.regex(k,a.lang.link.error.badPageTitle).apply(this)}else{k=RegExp("^("+RTE.constants.urlProtocols+")");return CKEDITOR.dialog.validate.regex(k,a.lang.link.error.badUrl).apply(this)}}},{type:"text",label:a.lang.link.label.display,id:"label",onFocus:function(){c=true}},{type:"radio",items:[[a.lang.link.label.internal,
"wiki"],[a.lang.link.label.external,"ext"]],"default":"wiki",id:"linktype",onChange:function(k){if(CKEDITOR.dialog.getCurrent()){RTE.log("mode changed to "+k.data.value);k.data&&k.data.value=="ext"?g("external"):g("internal")}}}]}],onShow:function(){this._.element.addClass("wikiaEditorDialog");this._.element.addClass("linkEditorDialog");this.fakeObj=false;var k=this.getParentEditor(),l=k.getSelection();l.getRanges();var m=null;if((m=b.getSelectedLink(k))&&m.getAttribute("href"))l.selectElement(m);
else m=null;$(".link-type-note span").html("...");$(".link-type-note img")[0].className="sprite";j.apply(this,[k,m]);this.setupTracking("link")},onOk:function(){if(!this._.dontHide){var k="",l=this.getContentElement("internal","linktype").getValue();if(this._.selectedElement)m=this._.selectedElement;else{RTE.log("creating new link...");var m=f.apply(this,[a])}if(m){m.removeClass("external");m.removeClass("autonumber");var p={};if(l=="wiki"){var r=this.getValueOf("internal","name");if(r.indexOf(window.wgServer)==
0){var t=RegExp(window.wgArticlePath.replace(/\$1/,"(.*)"));if(t=r.match(t)){t=t[1];t=decodeURIComponent(t);t=t.replace(/_/g," ");this.setValueOf("internal","name",t);this.setValueOf("internal","label",this.getValueOf("external","label"));RTE.log("internal full URL detected: "+r+" > "+t)}}}switch(l){case "ext":p={type:"external",link:this.getValueOf("internal","name"),text:this.getValueOf("internal","label"),wikitext:null};k="externalNamed";if(p.text==""){p.linktype="autonumber";p.text="[1]";m.addClass("autonumber");
k="externalNumbered"}m.setAttribute("href",p.link);m.setText(p.text!=""?p.text:p.link);m.addClass("external");m.removeClass("new");break;case "wiki":p={type:"internal",link:this.getValueOf("internal","name"),text:this.getValueOf("internal","label"),noforce:true,wikitext:null};if(m.getText()==m.getHtml())m.setText(p.text!=""?p.text:p.link);k=p.text==""?"internalSimple":"internalNamed";RTE.tools.checkInternalLink(m,p.link)}$(m.$).setData(p);RTE.log("updating link data");RTE.log([m,$(m.$).getData()]);
RTE.tools.renumberExternalLinks();typeof this._.suggestContainer!="undefined"&&this._.suggestContainer.css("visibility","hidden");RTE.track("link","dialog","type",k)}}}}});
CKEDITOR.plugins.add("rte-linksuggest",{dataSource:false,init:function(a){if(typeof window.LS_PrepareTextarea=="function")if(CKEDITOR.env.ie||CKEDITOR.env.gecko){this.dataSource=new window.YAHOO.widget.DS_XHR(window.wgServer+window.wgScriptPath,["\n"]);this.dataSource.responseType=window.YAHOO.widget.DS_XHR.TYPE_FLAT;this.dataSource.scriptQueryAppend="action=ajax&rs=getLinkSuggest";var b=this;a.on("instanceReady",function(){b.setupLinkSuggest()});a.on("mode",function(){b.setupLinkSuggest()})}},setupLinkSuggest:function(){if(RTE.instance.mode==
"source"){$(RTE.instance.textarea.$).attr("id","RTEtextarea");window.LS_PrepareTextarea("RTEtextarea",this.dataSource)}}});
CKEDITOR.plugins.add("rte-media",{init:function(a){var b=this;a.on("wysiwygModeReady",function(){var c=RTE.tools.getMedia();b.setupMedia(c);c=RTE.getEditor().find(".media-placeholder");b.setupPlaceholder(c)});a.on("toolbarReady",function(){$("#mw-toolbar").children("#mw-editbutton-wmu").click(function(c){window.WMU_show(c)});$("#mw-toolbar").children("#mw-editbutton-vet").click(function(c){window.VET_show(c)})});a.addCommand("addimage",{exec:function(){RTE.tools.callFunction(window.WMU_show)}});a.ui.addButton("Image",
{label:a.lang.image.photo,title:a.lang.image.add,className:"RTEImageButton",command:"addimage"});if(typeof window.VET_show=="function"){a.addCommand("addvideo",{exec:function(){RTE.tools.callFunction(window.VET_show)}});a.ui.addButton("Video",{label:a.lang.video.video,title:a.lang.video.add,className:"RTEVideoButton",command:"addvideo"});RTE.mediaEditor.plugin=b}else RTE.log('VET is not enabled here - disabling "Video" button')},setupMedia:function(a){var b=this;if(a.exists()){a.attr("data-rte-instance",
RTE.instanceId);var c=RTE.instance.lang.media;RTE.overlay.add(a,[{label:c.edit,"class":"RTEMediaOverlayEdit",callback:function(e){var g=b.getTrackingType(e);e.trigger("edit");RTE.track(g,"menu","edit")}},{label:c["delete"],"class":"RTEMediaOverlayDelete",callback:function(e){var g=b.getTrackingType(e);RTE.tools.confirm(RTE.instance.lang[g].confirmDeleteTitle,RTE.instance.lang[g].confirmDelete,function(){RTE.tools.removeElement(e)});RTE.track(g,"menu","delete")}}]);a.unbind(".media");a.bind("dragged.media",
function(){RTE.track(b.getTrackingType($(this)),"event","move")});RTE.tools.unselectable(a);RTE.getEditor().unbind("dropped.media").bind("dropped.media",function(e,g){var h=$(e.target);if(!(!h.hasClass("image")&&!h.hasClass("video")&&!h.hasClass("media-placeholder"))){var j=h.parent();if(/h\d/i.test(j.attr("nodeName"))){j.after(h);RTE.log("image moved outside the header")}var f=parseInt(g.pageX-$("#editform").offset().left),d=parseInt($("#editform").width()),k=h.getData();j=false;var l=k.params.align;
if(!l){l=h.hasClass("thumb")||h.hasClass("frame")?"right":"left";if(h.hasClass("alignNone"))l="left"}switch(l){case "left":if(f>parseInt(d*0.66))j="right";break;case "right":if(f<parseInt(d*0.33))j="left"}if(j){RTE.log("media alignment: "+l+" -> "+j);f=k.wikitext;l=RegExp("\\|"+l+"(\\||])");f=l.test(f)?f.replace(l,"|"+j+"$1"):f.replace(/(\||\])/,"|"+j+"$1");RTE.log("new wikitext: "+f);k.params.align=j;k.wikitext=f;h.setData(k);h.removeClass("alignNone alignLeft alignRight").addClass(j=="left"?"alignLeft":
"alignRight");h=h.attr("type");if(h=="image-placeholder")h="imagePlaceholder";if(h=="video-placeholder")h="videoPlaceholder";RTE.track(h,"event","switchSide",j=="right"?"l2r":"r2l")}else RTE.log("media alignment detected: "+l+" (no change)")}});a.filter(".withCaption").each(function(){$(this).css("backgroundPosition","5px "+parseInt($(this).attr("height")+10)+"px")});c=a.filter("img.image");b.setupImage(c);c=a.filter("img.video");b.setupVideo(c);c=a.filter("img.placeholder-poll");b.setupPoll(c);RTE.config.disableDragDrop&&
RTE.tools.disableDragDrop(a)}},setupImage:function(a){a.bind("edit.media",function(){RTE.log("image clicked");RTE.tools.callFunction(window.WMU_show,$(this))})},setupVideo:function(a){a.bind("edit.media",function(){RTE.log("video clicked");RTE.tools.callFunction(window.VET_show,$(this))})},setupPoll:function(a){a.bind("edit.media",function(b){RTE.log("poll clicked");CreateWikiaPoll.showEditor(b)})},setupPlaceholder:function(a){var b=this;if(a.exists()){this.setupMedia(a);a.unbind(".placeholder");
a.bind("contextmenu.placeholder",function(e){e.stopPropagation()});RTE.getEditor().unbind("dropped.placeholder").bind("dropped.placeholder",function(e){e=$(e.target);e=e.filter(".media-placeholder");b.setupPlaceholder(e)});var c=a.filter(".image-placeholder");c.attr("title",RTE.instance.lang.imagePlaceholder.tooltip);c.bind("click.placeholder edit.placeholder",function(){RTE.tools.callFunction(window.WMU_show,$(this),{isPlaceholder:true})});c=a.filter(".video-placeholder");c.attr("title",RTE.instance.lang.videoPlaceholder.tooltip);
c.bind("edit.placeholder",function(){RTE.tools.callFunction(window.VET_show,$(this),{isPlaceholder:true})});RTE.config.disableDragDrop&&RTE.tools.disableDragDrop(a)}},getTrackingType:function(a){var b;switch($(a).attr("type")){case "image":b="image";break;case "video":b="video";break;case "image-placeholder":b="imagePlaceholder";break;case "video-placeholder":b="videoPlaceholder";break;case "image-gallery":b="photoGallery";break;case "poll":b="poll"}return b}});
RTE.mediaEditor={plugin:false,addImage:function(a,b){RTE.log("adding an image");var c={type:"image",title:a.substring(2,a.length-2).split("|").shift().replace(/^[^:]+:/,""),params:b,wikitext:a};this._add(a,c)},addVideo:function(a,b){RTE.log("adding a video");this._add(a,{type:"video",params:b,wikitext:a})},_add:function(a,b){var c=this;RTE.tools.parseRTE(a,function(e){var g=$(e,RTE.instance.document.$).children("img");g.exists()||(g=$(e,RTE.instance.document.$));g.setData(b);RTE.tools.insertElement(g,
true);c.plugin.setupMedia(g);RTE.track(c.plugin.getTrackingType(g),"event","add")})},update:function(a,b){var c=this;RTE.tools.parseRTE(b,function(e){e=$(e).children("img");e.insertAfter(a);e.setData("wikitext",b);a.remove();c.plugin.setupMedia(e);RTE.track(c.plugin.getTrackingType(e),"event","modified")})}};
CKEDITOR.plugins.add("rte-modeswitch",{sourceButton:false,init:function(a){var b=this;this.addCommands(a);a.on("instanceReady",function(){b.updateSourceButtonTooltip(a);b.updateModeInfo(a)});a.on("mode",function(){b.updateSourceButtonTooltip(a);b.updateModeInfo(a)})},getSourceButton:function(a){if(this.sourceButton==false)if(a=a.getCommand("source").uiItems[0])this.sourceButton=$("#"+a._.id);return this.sourceButton},updateSourceButtonTooltip:function(a){var b=this.getSourceButton(a);msg=a.lang.modeSwitch[a.mode==
"wysiwyg"?"toSource":"toWysiwyg"];if(b){b.attr("title",msg);b.find(".cke_label").text(msg)}},updateModeInfo:function(a){$("body").removeClass("rte_wysiwyg").removeClass("rte_source").addClass("rte_"+a.mode);$("#RTEMode").attr("value",a.mode)},addCommands:function(a){var b=this;this.sourceCommand=a.addCommand("ModeSource",{modes:{wysiwyg:1},editorFocus:false,canUndo:false,exec:function(){a.mode!="source"&&a.execCommand("source")}});this.wysiwygCommand=a.addCommand("ModeWysiwyg",{modes:{source:1},exec:function(){a.mode==
"source"&&a.execCommand("source")}});a.on("modeSwitch",function(){b.sourceCommand.disable();b.wysiwygCommand.disable()});a.on("modeSwitchCancelled",function(){a.mode=="source"?b.wysiwygCommand.enable():b.sourceCommand.enable()});a.ui.addButton("ModeSource",{label:a.lang.modeSwitch.toSource,hasIcon:false,command:"ModeSource"});a.ui.addButton("ModeWysiwyg",{label:a.lang.modeSwitch.toWysiwyg,hasIcon:false,command:"ModeWysiwyg"})}});
CKEDITOR.plugins.add("rte-overlay",{overlays:false,currentOverlay:false,init:function(a){var b=this;RTE.overlay.plugin=this;a.on("instanceReady",function(){b.overlays=$("<div>",{id:"RTEMediaOverlays"}).appendTo(RTE.stuffNode)});a.on("wysiwygModeReady",function(){typeof b.overlays=="object"&&b.overlays.html("")});setInterval(function(){b.checkCurrentOverlay()},1E3)},checkCurrentOverlay:function(){if(this.currentOverlay){var a=this.currentOverlay.data("node");if(a&&!a.hasParent("body")){this.currentOverlay.remove();
this.currentOverlay=false}}},showOverlay:function(a){var b=this.getOverlay(a),c=this.getOverlayPositon(a),e=Math.max(c.left+b.width()-RTE.getEditor().width(),0);b.children("div").css("right",e+"px");c.top=Math.max(c.top,0);b.css({left:c.left+"px",top:parseInt(c.top+2)+"px"});b.children().eq(0).show();e=b.children().eq(1);parseInt(c.top)+parseInt(e.css("top"))+16<RTE.tools.getEditorHeight()&&e.show();this.overlays.children().hide();this.currentOverlay=b.show();(a=a.data("hideTimeout"))&&clearTimeout(a)},
hideOverlay:function(a){var b=this.getOverlay(a);a.data("hideTimeout",setTimeout(function(){b.children().hide();b.hide();this.currentOverlay=false;a.removeData("hideTimeout")},100))},getOverlay:function(a,b){var c=this;if(!this.overlays)return false;var e=a.data("overlay");if(e)return e;e=$("<div>",{"class":"RTEMediaOverlay",type:a.attr("type"),width:this.getImageWidth(a)});var g=$("<div>").addClass("RTEMediaMenu color1").appendTo(e);b=a.data("items");$(b).each(function(){var j=this;$("<span>").addClass(j["class"]).html(j.label).bind("click",
function(){c.hideOverlay(a);j.callback(a)}).appendTo(g)});var h=this.getCaption(a);h&&h.appendTo(e);e.bind({mouseover:function(){c.showOverlay(a)},mouseout:function(){c.hideOverlay(a)}});e.data("node",a);this.overlays.append(e);a.data("overlay",e);return e},getCaption:function(a){var b=a.getData(),c=a.hasClass("thumb")||a.hasClass("frame");if((b=typeof b.params!="undefined"&&(b.params.captionParsed||b.params.caption))&&c){c=parseInt(a.attr("height")+7);a=a.attr("width");if(CKEDITOR.env.ie&&CKEDITOR.env.version<=
7){c-=25;a-=6}return $("<div>").addClass("RTEMediaCaption").css("top",c+"px").width(a).html(b).click(function(e){e.preventDefault()})}else return false},getOverlayPositon:function(a){var b=RTE.tools.getPlaceholderPosition(a);if(a.hasClass("media-placeholder")){b.top+=2;b.left+=2}else if(a.hasClass("thumb")||a.hasClass("frame")){b.top+=6;a.hasClass("alignLeft")||(b.left+=18)}return b},getImageWidth:function(a){var b=a.hasClass("thumb")||a.hasClass("frame");a=a.is("img")?parseInt(a.attr("width")):a.innerWidth();
if(b)a+=CKEDITOR.env.ie&&CKEDITOR.env.version<=7?2:8;return a+"px"}});RTE.overlay={plugin:false,add:function(a,b){var c=this.plugin;a.data("items",b);a.each(function(){var e=$(this).removeData("overlay").unbind(".overlay").bind({"mouseover.overlay":function(){c.showOverlay(e)},"mouseout.overlay":function(){c.hideOverlay(e)},"contextmenu.overlay":function(g){g.preventDefault();g.stopPropagation()}})})}};
CKEDITOR.plugins.add("rte-paste",{htmlBeforePaste:"",getHtml:function(){return RTE.instance.document.getBody().getHtml()},track:function(a){RTE.track("paste",a)},init:function(a){var b=this;a.on("dataReady",function(){});a.on("beforepaste",function(){b.htmlBeforePaste=b.getHtml();setTimeout(function(){b.handlePaste(a)},250)})},handlePaste:function(a){RTE.log("paste detected");var b=false,c=this.getHtml();a.fire("wysiwygModeReady");c=this.diff(this.htmlBeforePaste,c);if(!(typeof c!="object"||typeof c.pasted!=
"string")){var e=c.pasted.match(/data-rte-instance="([a-z0-9-]+)"/);if(e){e=e[1];if(e==RTE.instanceId)this.track("inside");else parseInt(e.split("-").shift())!=parseInt(wgCityId)?this.track("anotherWiki"):this.track("outside")}else this.track("plainText");if(typeof c.pasted=="string")if(/<br>/.test(c.pasted)){RTE.log("paste: detected line breaks in pasted content");b=c["new"].replace(/([^>])<br>([^<])/g,'$1<br data-rte-washtml="1" />$2');a.setData(b,function(){a.fire("afterPaste")});b=true}b||setTimeout(function(){a.fire("afterPaste")},
250)}},diff:function(a,b){if(a==b)return false;for(var c=a.length-b.length,e={start:0,end:b.length-1};a.charAt(e.start)==b.charAt(e.start);){if(e.start>=a.length)return false;e.start++}for(;a.charAt(e.end+c)==b.charAt(e.end);){if(e.end<=e.start)return false;e.end--}c=b.substring(0,e.start+1);var g=b.substring(e.end,b.length);if(/<[^>]*$/.test(c))e.start=c.lastIndexOf("<");if(/^[^<]*>/.test(g))e.end+=g.indexOf(">")+1;var h=b.substring(e.start,e.end+1);c=b.substring(0,e.start);g=b.substring(e.end+1,
b.length);return{pasted:h,prefix:c,suffix:g,"new":b,old:a,start:e.start,end:e.end}}});
CKEDITOR.plugins.add("rte-placeholder",{previews:false,init:function(a){var b=this;a.on("instanceReady",function(){b.previews=$("<div>",{id:"RTEPlaceholderPreviews"}).appendTo(RTE.stuffNode)});a.on("wysiwygModeReady",function(){typeof b.previews=="object"&&b.previews.html("");var c=RTE.tools.getPlaceholders();c.removeData("preview").removeData("info");b.setupPlaceholder(c)})},getPreview:function(a){var b=this;if(this.previews){var c=a.data("preview");if(typeof c=="undefined"){c=$("<div>").addClass("RTEPlaceholderPreview RTEPlaceholderPreviewLoading");
c.html('<div class="RTEPlaceholderPreviewInner">&nbsp;</div>');c.bind("mouseover",function(){b.showPreview(a)});c.bind("mouseout",function(){b.hidePreview(a)});this.previews.append(c);a.data("preview",c);var e=a.getData(),g=function(h){var j,f,d="RTEPlaceholderPreviewOther",k=true,l=false,m=e.wikitext.replace(/</g,"&lt;").replace(/>/g,"&gt;"),p=RTE.instance.lang.hoverPreview;switch(h.type){case "tpl":d="RTEPlaceholderPreviewTemplate";j=h.title.replace(/_/g," ").replace(/^Template:/,window.RTEMessages.template+
":");f=h.exists?p.template.intro:p.template.notExisting;m=h.exists?h.html:e.wikitext;k=!h.exists;l=typeof h.availableParams!="undefined"&&h.availableParams.length;break;case "comment":j=p.comment.title;f=p.comment.intro;m=e.wikitext.replace(/^<\!--\s+/,"").replace(/\s+--\>$/,"");l=true;break;case "broken-image":d="RTEPlaceholderPreviewBrokenImage";j=e.wikitext.replace(/^\[\[/,"").replace(/]]$/,"").split("|").shift();f=p.media.notExisting;break;default:j=p.codedElement.title;f=p.codedElement.intro}if(j.length>
40)j=j.substr(0,40)+RTEMessages.ellipsis;if(k&&CKEDITOR.env.ie)m=m.replace(/\n/g,"<br />");var r="";if(l)r+='<img class="sprite edit" src="'+wgBlankImgUrl+'" /><a class="RTEPlaceholderPreviewToolsEdit">'+p.edit+"</a>";r+='<img class="sprite remove" src="'+wgBlankImgUrl+'" /><a class="RTEPlaceholderPreviewToolsDelete">'+p["delete"]+"</a>";var t="";t+='<div class="RTEPlaceholderPreviewInner '+d+'">';t+='<div class="RTEPlaceholderPreviewTitleBar color1"><span />'+j+"</div>";t+='<div class="RTEPlaceholderPreviewIntro">'+
f+"</div>";t+='<div class="RTEPlaceholderPreviewCode '+(k?"RTEPlaceholderPreviewPreformatted ":"")+'reset">'+m+"</div>";t+='<div class="RTEPlaceholderPreviewTools neutral">'+r+"</div>";t+="</div>";c.removeClass("RTEPlaceholderPreviewLoading").html(t).attr("type",h.type);c.find(".RTEPlaceholderPreviewToolsDelete").bind("click",function(){RTE.track(b.getTrackingType($(a)),"hover","delete");RTE.tools.confirm(j,p.confirmDelete,function(){RTE.tools.removeElement(a);c.remove()})});l&&c.find(".RTEPlaceholderPreviewToolsEdit").bind("click",
function(){c.hide();RTE.track(b.getTrackingType($(a)),"hover","edit");$(a).trigger("edit")});c.find(".RTEPlaceholderPreviewCode").bind("click",function(n){n.preventDefault()});c.find(".RTEPlaceholderPreviewTitleBar").children("span").bind("click",function(){RTE.track(b.getTrackingType($(a)),"hover","close");b.hidePreview(a,true)});e.type=="double-brackets"&&a.data("info",h);b.expandPlaceholder(a)};switch(e.type){case "double-brackets":RTE.tools.resolveDoubleBrackets(e.wikitext,g);break;default:g({type:e.type})}}return c}},
showPreview:function(a){var b=this.getPreview(a),c=RTE.tools.getPlaceholderPosition(a);b.css({left:c.left+"px",top:parseInt(c.top+a.height()+6)+"px"});this.previews.children().not(b).each(function(){$(this).hide()});var e=this;a.data("showTimeout",setTimeout(function(){b.css("display")=="block"||a.trigger("hover");b.fadeIn();e.expandPlaceholder(a)},150));if(timeoutId=a.data("hideTimeout"))clearTimeout(timeoutId)},hidePreview:function(a,b){var c=this.getPreview(a);if(showTimeout=a.data("showTimeout"))clearTimeout(showTimeout);
b?c.hide():a.data("hideTimeout",setTimeout(function(){c.fadeOut();a.removeData("hideTimeout")},1E3))},setupPlaceholder:function(a){var b=this;a=a.not(".placeholder-image-placeholder").not(".placeholder-video-placeholder");if(a.exists()){a.unbind(".placeholder");a.bind("mouseover.placeholder",function(){b.showPreview($(this))});a.bind("mouseout.placeholder",function(){b.hidePreview($(this))});a.bind("contextmenu.placeholder",function(c){c.stopPropagation()});RTE.tools.unselectable(a);a.bind("edit.placeholder",
function(){switch($(this).getData().type){case "double-brackets":RTE.templateEditor.showTemplateEditor($(this));break;case "comment":RTE.commentEditor.showCommentEditor($(this))}});a.bind("hover.placeholder",function(){RTE.track(b.getTrackingType($(this)),"hover","init")});RTE.getEditor().unbind("dropped.placeholder").bind("dropped.placeholder",function(c){c=$(c.target);c=c.filter("img.placeholder");b.setupPlaceholder(c)});RTE.config.disableDragDrop&&RTE.tools.disableDragDrop(a)}},getTrackingType:function(a){switch($(a).getData().type){case "double-brackets":a=
"template";break;case "comment":a="comment";break;default:a="advancedCode"}return a},expandPlaceholder:function(a){a=this.getPreview(a);var b=a.find(".RTEPlaceholderPreviewCode");if(b.exists()){var c=b[0];if(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth){var e=c.scrollHeight;c=c.scrollWidth;var g=parseInt(a.offset().left)+c+16,h=parseInt(a.offset().top)+e+100,j=$("#cke_contents_wpTextbox1"),f=parseInt(j.offset().left)+j.width();j=parseInt(j.offset().top)+j.height();if(f<g)c-=g-f;if(j<
h)e-=h-j;c=Math.max(c,350);e=Math.max(e,60);a.children(".RTEPlaceholderPreviewInner").width(c);b.height(e);b.addClass("RTEPlaceholderPreviewExpanded")}else b.removeClass("RTEPlaceholderPreviewExpanded")}}});
CKEDITOR.plugins.add("rte-signature",{init:function(a){a.addCommand("addsignature",{exec:function(b){b=RTE.instance.document.createText(b.config.signature_markup);RTE.tools.insertElement($(b.$))}});a.ui.addButton("Signature",{title:a.lang.signature.add,label:a.lang.signature.label,className:"cke_label_button cke_button_signature",command:"addsignature"})}});CKEDITOR.config.signature_markup="~~~~";
CKEDITOR.plugins.add("rte-spellchecker",{beforeInit:function(a){a.config.menu_groups="spellchecker,spellcheckermore,"+a.config.menu_groups},init:function(a){var b=false,c=window.wgContentLanguage;if(typeof window.wgSpellCheckerLangIsSupported!="undefined")if(window.wgSpellCheckerLangIsSupported){RTE.log('spell checking enabled for "'+c+'"');b=true}else RTE.log('spell checking is not supported for "'+c+'"');else RTE.log("spell checking disabled");if(b)a.spellchecker=new CKEDITOR.spellchecker(a,c)}});
CKEDITOR.spellchecker=function(a,b){var c=this;this.editor=a;this.langCode=b;this.parser=new CKEDITOR.htmlParser;a.on("wysiwygModeReady",function(){c.checkEditbox()});a.on("instanceReady",function(){var h=a.contextMenu;h.addListener(function(j){if(CKEDITOR.env.webkit)j=h.originalEvent.getTarget();return c.showSuggestions(j)})});this.setupScayt();var e=a.dataProcessor;e=e&&e.htmlFilter;var g=/^spellchecker/;e&&e.addRules({elements:{span:function(h){if(g.test(h.attributes["class"])){delete h.name;return h}}}});
this.nodeRunner=new CKEDITOR.nodeRunner;this.nodeRunner.isSkipped=this.isIgnoredNode};
CKEDITOR.spellchecker.prototype={wordsCache:{},CORRECT:1,MISSPELLED:0,SUGGESTIONS_LIMIT:6,SCAYT_DELAY_TIME:1E3,SCAYT_DELAY_CHARS:20,recentText:"",nodeRunner:false,ajax:function(a,b,c){b=b||{};b.method=a;jQuery.post(window.wgSpellCheckerUrl,b,function(e){typeof c=="function"&&c(e)},"json")},isMarkedNode:function(a){return a.hasClass("spellchecker-misspell")},isIgnoredNode:function(a){if(a.is("a")){if(a.hasClass("extiw"))return true;if(a.getAttribute("rel")=="nofollow"&&a.getAttribute("href")==a.getText())return true}return false},
getTextFromEditor:function(){var a=this.getSeparators(),b="";this.nodeRunner.walkTextNodes(this.editor.document.getBody(),function(c){b+=c.getText()+" "});b=b.replace(/&[^;]+;/g," ").replace(RegExp("([0-9]|["+a+"])","g")," ").replace(/\s+/g," ");return b=$.trim(b)},getWords:function(a){var b=[],c=[];a=a.split(" ");$.each(a,function(e,g){if(!c[g]){c[g]=1;b.push(g)}});return b},getSeparators:function(){var a,b="";for(a=0;a<48;a++)b+="\\"+'\\s!"#$%&()*+,-./:;<=>?@[]^_{|}§©«®±¶·¸»¼½¾¿×÷¤”“'.charAt(a);
return b},getSuggestions:function(a){if((a=this.wordsCache[a])&&a.length)return a},checkWords:function(a,b){var c=this,e,g=[];RTE.log("found "+a.length+" unique word(s)");for(e=0;e<a.length;e++)typeof this.wordsCache[a[e]]=="undefined"&&g.push(a[e]);if(g.length==0){RTE.log("spell checking data already in cache");b.call()}else{RTE.log("checking "+g.length+" unique word(s)");this.ajax("checkWords",{lang:this.langCode,words:g.join(",")},function(h){if(h.info){RTE.log(h.correct+" word(s) spelled correctly ("+
h.info.provider+")");c.updateWordsCache(g,h.suggestions);typeof b=="function"&&b.call()}else RTE.log("spell checking request has failed!")})}},updateWordsCache:function(a,b){var c=this.wordsCache,e=this.CORRECT;$.each(a,function(g,h){c[h]=b[h]?b[h]:e})},getMisspelledWords:function(){var a=this.CORRECT,b=[];$.each(this.wordsCache,function(c,e){e!=a&&b.push(c)});return b},highlightWords:function(){this.removeHighlight();var a=this.getMisspelledWords().join("|"),b=[],c=this;if(a!=""){this.nodeRunner.walkTextNodes(this.editor.document.getBody(),
function(h){c.isMarkedNode(h.getParent())||b.push(h)});var e=this.getSeparators(),g=RegExp("(^|["+e+"])("+a+")($|["+e+"])","g");$.each(b,function(h,j){var f=j.getText(),d=false;if(g.test(f)){f=f.replace(g,'$1<span class="spellchecker-misspell">$2</span>$3');d=j.getParent();if(d.hasClass("spellchecker-wrapper")&&d.getChildCount()==1)d.setHtml(f);else{d=new CKEDITOR.dom.element("span");d.setHtml(f);d.addClass("spellchecker-wrapper");d.replace(j)}}})}},removeHighlight:function(a){var b=this;a||(a=this.editor.document.getBody());
this.nodeRunner.walk(a,function(c){c.type==CKEDITOR.NODE_ELEMENT&&b.isMarkedNode(c)&&(new CKEDITOR.dom.text(c.getText())).replace(c)})},checkEditbox:function(){if(this.editor.mode=="wysiwyg"){var a=this.getTextFromEditor();if(a!="")if(a==this.recentText)RTE.log("text already checked");else{this.recentText=a;var b=this;this.checkWords(this.getWords(a),function(){b.highlightWords()})}}},showSuggestions:function(a){if(this.isMarkedNode(a)){var b={},c={},e;e=a.getText();var g=this;if(suggestions=this.getSuggestions(e)){RTE.log("showing "+
suggestions.length+' suggestion(s) for "'+e+'"');for(e=0;e<suggestions.length;e++){var h=this.addSuggestItem(e+1,suggestions[e],function(j){g.applySuggestion(a,j)});if(e<this.SUGGESTIONS_LIMIT)b[h]=CKEDITOR.TRISTATE_OFF;else c[h]=CKEDITOR.TRISTATE_OFF}if(suggestions.length>this.SUGGESTIONS_LIMIT){this.editor.addMenuItem("spellcheckerMore",{label:this.editor.lang.spellchecker.moreSuggestions,group:"spellcheckermore",getItems:function(){return c}});b.spellcheckerMore=CKEDITOR.TRISTATE_OFF}return b}else RTE.log('no suggestions for "'+
e+'"')}},addSuggestItem:function(a,b,c){var e="spellcheckerSuggest"+b.replace(/[^\w]/g,"_");this.editor.addCommand(e,{exec:function(){c(b)}});this.editor.addMenuItem(e,{command:e,group:"spellchecker",label:b,order:a});return e},applySuggestion:function(a,b){this.editor.fire("saveSnapshot");(new CKEDITOR.dom.text(b)).replace(a);this.editor.fire("saveSnapshot");RTE.track("spellchecker","applySuggestion")},scaytCharacters:0,scaytTimeout:false,setupScayt:function(){var a=this;this.editor.on("key",function(){if(a.scaytTimeout){clearTimeout(a.scaytTimeout);
a.scaytTimeout=false}a.scaytTimeout=setTimeout(function(){a.performScayt()},a.SCAYT_DELAY_TIME);a.scaytCharacters++;a.scaytCharacters>a.SCAYT_DELAY_CHARS&&a.performScayt()})},performScayt:function(){clearTimeout(this.scaytTimeout);this.scaytTimeout=false;this.scaytCharacters=0;this.checkEditbox()}};
CKEDITOR.plugins.add("rte-template",{init:function(a){CKEDITOR.dialog.add("rte-template",this.path+"dialogs/template.js");a.ui.addRichCombo("Template",{label:a.lang.templateDropDown.label,title:a.lang.templateDropDown.title,className:"cke_template",multiSelect:false,panel:{css:[CKEDITOR.getUrl(a.skinPath+"editor.css")].concat(a.config.contentsCss)},init:function(){this.startGroup(a.lang.templateDropDown.title);for(var b=window.RTETemplatesDropdown,c=0;c<b.length;c++){var e=b[c].replace(/_/g," ");
this.add(b[c],window.RTEMessages.template+":"+e,e)}this.add("--other--","<strong>"+a.lang.templateDropDown.chooseAnotherTpl+"</strong>",a.lang.templateDropDown.chooseAnotherTpl);this.add("--list--","<strong>"+a.lang.templateDropDown.showUsedList+"</strong>",a.lang.templateDropDown.showUsedList);this.add("--make-layout--","<strong>"+a.lang.templateDropDown.makeLayout+"</strong>",a.lang.templateDropDown.makeLayout)},onClick:function(b){RTE.log('template dropdown: "'+b+'"');switch(b){case "--other--":RTE.templateEditor.createTemplateEditor(false);
break;case "--list--":RTE.templateHelpers.showUsedList(a);break;case "--make-layout--":RTE.templateHelpers.makeLayout(a);break;default:RTE.track("template","dialog","search","dropdown",b);RTE.templateEditor.createTemplateEditor(b)}var c=this;setTimeout(function(){c.setValue(false)},50)}});a.addCommand("InsertTemplate",{exec:function(b,c){c&&c.templateName&&RTE.templateEditor.createTemplateEditor(c.templateName)}})}});
RTE.templateHelpers={showUsedList:function(a){a=a||RTE.instance;var b=$("#editform > .templatesUsed");if(b.exists()){var c=$("<div>");c.html(b.html());c.children().not("ul").remove();c.find("a").attr("target","_blank");$.showModal(a.lang.templateEditor.usedTemplates.title,c.html(),{width:400})}},makeLayout:function(){typeof window.PLBMakeLayoutUrl!="undefined"&&$("#editform").attr("action",window.PLBMakeLayoutUrl).submit()}};
RTE.templateEditor={placeholder:false,data:{},dialog:{},doPreview:function(a){RTE.log("generating preview...");$("#templatePreview").html("").addClass("loading");var b={};$("#templateParameters").find("textarea").each(function(){var e=$(this).attr("rel"),g=$(this).attr("value");b[e]=g});var c=this.data.wikitext=this.generateWikitext(this.data.title,b);RTE.tools.parse(c,function(e){$("#templatePreview").html(e).removeClass("loading");$("#templatePreview").bind("click",function(g){g.preventDefault()});
typeof a=="function"&&a()})},generateWikitext:function(a,b){var c,e=this.placeholder?this.placeholder.getData():false,g=e.wikitext.replace(/\[\[([^|\]]+)\|([^\]]+)\]\]/g,"[[$1$2]]").substring(2,e.wikitext.length-2).split("|"),h=[g.shift()],j=0,f=false;if(g.length==0){h=[a+"\n"];f=true}$.each(g,function(d,k){var l=k.match(/([^=]+)( *\= *)(.*)(\n?)/);if(l){var m=$.trim(l[1]),p=l[2],r=l[3],t=l[4];if(t!="")f=true;if(typeof b[m]!="undefined"){h.push(l[1]+p+b[m]+t);delete b[m]}}else{l=k.match(/(.*)(\n?)/);
m=++j;r=l[1];t=l[2];if(t!="")f=true;if(typeof b[m]!="undefined")h.push(b[m]+t);else $.trim(r)?h.push(r+t):h.push("");delete b[m]}});$.each(b,function(d,k){if(typeof k!="undefined")if(parseInt(d)&&parseInt(d)==d){h.push(k!=""?k:"");if(g.length==0)h[0]=$.trim(h[0])}else if(k!="")h.push(d+" = "+k+(f?"\n":""))});c="{{";c+=h.join("|").replace("","|").replace(/[\n|]+$/g,"").replace(/\n+$/g,"");c+="}}";$().log(e.wikitext,"RTE: old wikitext");$().log(c,"RTE: new wikitext");return c},selectStep:function(a){RTE.log("showing step #"+
a);RTE.log(this.placeholder);var b=this.dialog;b.selectPage("step"+a);var c=this.placeholder.data("info"),e=this.placeholder.getData();$(".templateEditorDialog").find(".cke_dialog_footer").hide();switch(a){case 1:var g=function(){var j="";$(window.RTEHotTemplates).each(function(f,d){j+='<li><a rel="'+d+'">'+d.replace(/_/g," ")+"</a></li>"});$("#templateEditorHotTemplates").html(j);j="";$(window.RTEMagicWords.magicWords).each(function(f,d){j+='<li><a rel="'+d+'">'+d.toUpperCase()+"</a></li>"});$("#templateEditorMagicWords").html(j);
$("#templateEditorHotTemplates").find("a").click(function(){var f=$(this).attr("rel");RTE.templateEditor.selectTemplate(b,f)});$("#templateEditorMagicWords").find("a").click(function(){var f=$(this).attr("rel");RTE.log("adding magic word: "+f);var d={};if(RTEMagicWords.doubleUnderscores.indexOf(f)>-1){d.type="double-underscore";d.wikitext="__"+f.toUpperCase()+"__"}else{d.type="double-brackets";d.title=f.toUpperCase();d.wikitext="{{"+f.toUpperCase()+"}}"}RTE.log(d);f=RTE.templateEditor.placeholder;
f.setPlaceholderType(d.type);f.setData(d);RTE.templateEditor.usePlaceholder(f);b.hide();RTE.templateEditor.commitChanges()});b.enableSuggesionsOn(b.getContentElement("step1","templateSearchQuery"),[10])};if(typeof window.RTEHotTemplates=="undefined"){b.setLoading(true);RTE.ajax("getHotTemplates",{},function(j){b.setLoading(false);window.RTEHotTemplates=j;g()})}else g();break;case 2:$(".templateEditorDialog").find(".cke_dialog_footer").show();a=c.title.replace(/_/g," ");a=a.replace(/^Template:/,window.RTEMessages.template+
":");$("#templateEditorTemplateName").html(a);a=window.wgServer+window.wgArticlePath.replace(/\$1/,encodeURI(c.title.replace(/ /g,"_")));$("#templateEditorViewLink").attr("href",a);var h="";$.each(c.availableParams,function(j,f){var d=c.passedParams&&typeof c.passedParams[f]!="undefined"?c.passedParams[f]:"";d=d.replace(/&/g,"&amp;");var k=parseInt(f)?"#"+parseInt(j+1):f;h+='<dt><label for="templateEditorParameter'+j+'">'+k+"</label></dt>";h+='<dd><textarea rel="'+f+'" id="templateEditorParameter'+
j+'">'+d+"</textarea></dd>"});$("#templateParameters").html(h);this.doPreview();break;case 3:$("#templateAdvEditorSource").attr("value",e.wikitext);RTE.tools.parse(e.wikitext,function(j){$("#templateAdvPreview").html(j)})}},selectTemplate:function(a,b){RTE.log("selecting template: "+b);var c={title:b,wikitext:"{{"+b+"}}"};this.placeholder.setPlaceholderType("double-brackets");this.placeholder.setData(c);RTE.templateEditor.usePlaceholder(this.placeholder);a.setLoading(true);var e=this;RTE.tools.resolveDoubleBrackets(c.wikitext,
function(g){a.setLoading(false);e.placeholder.data("info",g);if(typeof g.availableParams!="undefined"&&g.availableParams.length>0)RTE.templateEditor.selectStep(2);else{RTE.log("given template contains no params - inserting / updating...");RTE.templateEditor.commitChanges();a.hide()}})},usePlaceholder:function(a){this.placeholder=a;this.data=a.getData()},commitChanges:function(){RTE.log("storing modified template data");RTE.log(this.data);this.placeholder.setData(RTE.templateEditor.data);this.placeholder.removeData("preview");
this.placeholder.removeData("info");this.placeholder.parent().exists()||RTE.tools.insertElement(this.placeholder);this.placeholder=false;this.data={}},showTemplateEditor:function(a){RTE.log("calling template editor...");RTE.templateEditor.usePlaceholder(a);RTE.instance.openDialog("rte-template")},createTemplateEditor:function(a){if(RTE.instance.mode=="source")a&&insertTags("{{"+a,"}}","");else{var b=RTE.tools.createPlaceholder("double-brackets");if(a==false){RTE.log("calling template editor to choose a template...");
this.showTemplateEditor(b)}else{RTE.log('calling template editor for new template "'+a+'"');var c="{{"+a+"}}";b.setData({title:a,wikitext:c});var e=this;RTE.tools.resolveDoubleBrackets(c,function(g){b.data("info",g);if(typeof g.availableParams!="undefined"&&g.availableParams.length>0)e.showTemplateEditor(b);else{RTE.log("given template contains no params - inserting...");RTE.tools.insertElement(b)}})}}}};
CKEDITOR.dialog.add("rte-template",function(a){a=a.lang.templateEditor;var b=window.wgArticlePath.replace(/\$1/,a.dialog.magicWordsLink.replace(/ /g,"_"));return{title:a.title,minWidth:760,minHeight:365,buttons:[{id:"chooseAnotherTpl",type:"button",label:a.editor.chooseAnotherTpl,className:"cke_dialog_choose_another_tpl",buttonType:"secondary",onClick:function(){RTE.templateEditor.selectStep(1)}},CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton],contents:[{id:"step1",label:"Step 1",elements:[{type:"hbox",
widths:["300px","300px","30px"],children:[{type:"html",className:"templateEditorHeader dark_text_2",html:a.dialog.search},{id:"templateSearchQuery",style:"margin-top: 7px",type:"text"},{id:"templateDoSearch",type:"button",label:a.dialog.insert,style:"position: relative; top: 6px",onClick:function(){var c=this.getDialog(),e=c.getValueOf("step1","templateSearchQuery");if(e!=""){RTE.templateEditor.selectTemplate(c,e);RTE.track("template","dialog","search","suggest",e)}}}]},{type:"html",html:"<hr />"},
{type:"html",className:"templateEditorHeader",html:a.dialog.browse},{type:"hbox",widths:["510px","250px"],children:[{type:"html",html:"<h2>"+a.dialog.mostFrequentlyUsed+'</h2><ul id="templateEditorHotTemplates"></ul>'},{type:"html",html:'<h2><a id="templateLinkToHelp" target="_blank" href="'+b+'">'+a.dialog.magicWords+'</a></h2><ul id="templateEditorMagicWords"></ul>'}]}]},{id:"step2",label:"Step 2",elements:[{type:"html",html:'<div id="templateEditorIntro"><h1 id="templateEditorTemplateName" class="dark_text_2"></h1><a id="templateEditorViewLink" href="#" target="_blank">'+
a.editor.viewTemplate+"</a><p>"+a.editor.intro+"</p></div>"},{type:"hbox",widths:["330px","100px","330px"],children:[{type:"html",html:"<h2>"+a.editor.parameters+'</h2><dl id="templateParameters"></dl>'},{type:"button",label:a.editor.previewButton,onClick:function(){var c=this;this.disable();RTE.templateEditor.doPreview.apply(RTE.templateEditor,[function(){c.enable()}]);RTE.track("template","dialog","editor","preview")}},{type:"html",html:"<h2>"+a.editor.previewTitle+'</h2><div id="templatePreview" class="reset"></div>'}]}]}],
onOk:function(){switch(parseInt(this.getActiveTab().charAt(4))){case 1:this.getContentElement("step1","templateDoSearch").fire("click");return false;case 2:RTE.templateEditor.doPreview(function(){RTE.templateEditor.commitChanges()});break;case 3:RTE.templateEditor.data.wikitext=$("#templateAdvEditorSource").attr("value");RTE.templateEditor.commitChanges()}},onShow:function(){this._.element.addClass("wikiaEditorDialog");this._.element.addClass("templateEditorDialog");RTE.templateEditor.dialog=this;
RTE.templateEditor.data=RTE.templateEditor.placeholder.getData();var c=RTE.templateEditor.placeholder.data("info"),e=1;if(c){RTE.log(c);e=2}this.getButton("ok").on("click",function(){RTE.track("template","dialog","editor","ok")});this.getButton("chooseAnotherTpl").on("click",function(){RTE.track("template","dialog","editor","chooseAnother")});RTE.templateEditor.selectStep(e)},onHide:function(){var c=this.getActiveTab()=="step1"?"search":"editor";RTE.track("template","dialog",c,"close")},onFocus:function(){}}});
CKEDITOR.plugins.add("rte-temporary-save",{init:function(a){a.on("instanceReady",function(){var b=$("#RTETemporarySaveType").attr("value");if(b){RTE.log('restoring temporary save (using "'+b+'" mode)');var c=$("#RTETemporarySaveContent").attr("value");a.setMode(b);a.setData(c);RTE.track("temporarySave","restore")}});$(window).bind("beforeunload",function(){RTE.log("onbeforeunload: performing temporary save");$("#RTETemporarySaveType").attr("value",RTE.instance.mode);$("#RTETemporarySaveContent").attr("value",
RTE.instance.getData());RTE.track("temporarySave","store")})}});CKEDITOR.plugins.add("rte-toolbar",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_SEPARATOR,CKEDITOR.ui.separator.handler);a.ui.add("|",CKEDITOR.UI_SEPARATOR,{})}});CKEDITOR.UI_SEPARATOR=10;CKEDITOR.ui.separator=function(){};CKEDITOR.ui.separator.handler={create:function(){return new CKEDITOR.ui.separator}};CKEDITOR.ui.separator.prototype={render:function(a,b){b.push('<span class="cke_separator">&nbsp;</span>')}};
CKEDITOR.plugins.add("rte-tools",{});
window.RTE.tools={alert:function(a,b){window.$.showModal(a,"<p>"+b+"</p>",{className:"RTEModal",width:500})},callFunction:function(a,b,c){if(typeof a=="function"){var e=jQuery.Event("rte");e.data=typeof c=="object"?c:{};e.data.element=b||false;e.target=window.document.createElement("div");a.call(window,e)}},checkInternalLink:function(a,b){var c="";if(/^#(.+)/.test(b)){c=b;b=window.wgPageName}RTE.ajax("checkInternalLink",{title:b},function(e){e.exists?a.removeClass("new"):a.addClass("new");a.setAttribute("href",
e.href+c);a.setAttribute("title",e.title)})},confirm:function(a,b,c){$.showModal(a,"<p>"+b+'</p><div class="RTEConfirmButtons neutral"><a id="RTEConfirmCancel" class="wikia-button secondary"><span>'+RTE.instance.lang.common.cancel+'</span></a><a id="RTEConfirmOk" class="wikia-button"><span>'+RTE.instance.lang.common.ok+"</span></a></div>",{id:"RTEConfirm",className:"RTEModal",width:500,callbackBefore:function(){$("#RTEConfirmOk").click(function(){$("#RTEConfirm").closeModal();typeof c=="function"&&
c()});$("#RTEConfirmCancel").click(function(){$("#RTEConfirm").closeModal()})}})},createPlaceholder:function(a,b){var c=$("<img />",RTE.instance.document.$);c.addClass("placeholder placeholder-"+a);c.attr("src",wgBlankImgUrl).attr("type",a).attr("data-rte-instance",RTE.instanceId);b=b&&typeof b=="object"?b:{};b.type=a;b.placeholder=true;c.setData(b);RTE.log('creating new placeholder for "'+a+'"');RTE.log(c);return c},disableDragDrop:function(a){a.bind("mousedown",function(b){b.preventDefault()})},
getEditorHeight:function(){return $("#cke_contents_wpTextbox1").height()},getEditorScrollOffsets:function(){var a,b;if(CKEDITOR.env.webkit){a=RTE.instance.document.$.body.scrollLeft;b=RTE.instance.document.$.body.scrollTop}else{a=RTE.instance.document.$.documentElement.scrollLeft;b=RTE.instance.document.$.documentElement.scrollTop}return{left:a,top:b}},getThemeColors:function(){var a=$("#RTEColorPicker");a.exists()||(a=$('<div id="RTEColorPicker">').addClass("color1").appendTo(RTE.stuffNode).hide());
RTE.config.baseBackgroundColor=a.css("backgroundColor");RTE.config.baseColor=a.css("color")},getImages:function(){return RTE.getEditor().find("img.image")},getMedia:function(){return RTE.getEditor().find("img.image,img.video")},getPlaceholderPosition:function(a){a=a.position();var b=this.getEditorScrollOffsets();return{left:parseInt(a.left-10-b.left),top:parseInt(a.top-b.top)}},getPlaceholders:function(a){return RTE.getEditor().find(a?"img[type="+a+"]":"img.placeholder")},getSelectionContent:function(){return CKEDITOR.env.ie?
RTE.instance.document.$.selection.createRange().text:RTE.instance.window.$.getSelection().toString()},getVideos:function(){return RTE.getEditor().find("img.video")},insertElement:function(a,b){var c=new CKEDITOR.dom.element($(a).get(0));RTE.instance.insertElement(c);b||RTE.instance.fire("wysiwygModeReady")},isExternalLink:function(a){return this.isExternalLinkRegExp.test(a)},isExternalLinkRegExp:RegExp("^"+window.RTEUrlProtocols),parseCache:{},parse:function(a,b){var c=RTE.tools.parseCache;if(typeof c[a]!=
"undefined"){RTE.log("RTE.tools.parse() - cache hit");typeof b=="function"&&b(c[a])}else RTE.ajax("parse",{wikitext:a,title:window.wgPageName},function(e){c[a]=e.html;typeof b=="function"&&b(e.html)})},parseRTE:function(a,b){RTE.ajax("rteparse",{wikitext:a,title:window.wgPageName},function(c){typeof b=="function"&&b(c.html)})},renumberExternalLinks:function(){RTE.getEditor().find("a.autonumber").each(function(a){$(this).text("["+(a+1)+"]")})},removeElement:function(a){RTE.instance.fire("saveSnapshot");
$(a).remove();RTE.instance.fire("saveSnapshot")},removeResizeBox:function(){setTimeout(function(){if(CKEDITOR.env.gecko){var a=RTE.instance.document.$;a.designMode="off";a.designMode="on"}},50)},resolveDoubleBracketsCache:{},resolveDoubleBrackets:function(a,b){var c=RTE.tools.resolveDoubleBracketsCache;if(typeof c[a]!="undefined"){RTE.log("RTE.tools.resolveDoubleBrackets() - cache hit");typeof b=="function"&&b(c[a])}else RTE.ajax("resolveDoubleBrackets",{wikitext:a,title:window.wgPageName},function(e){c[a]=
e;typeof b=="function"&&b(e)})},unselectable:function(){}};CKEDITOR.nodeRunner=function(){};CKEDITOR.nodeRunner.prototype={walk:function(a,b){if(!(a.type!=CKEDITOR.NODE_ELEMENT||a.isReadOnly()||this.isSkipped(a))){var c,e=a.getChildren(),g;for(g=0;g<e.count();g++){c=e.getItem(g);b.call(b,c);this.walk(c,b)}}},walkTextNodes:function(a,b){this.walk(a,function(c){c.type==CKEDITOR.NODE_TEXT&&b(c)})},isSkipped:function(){return false}};
CKEDITOR.plugins.add("rte-track",{init:function(a){var b=this;a.on("wysiwygModeReady",function(){a.document.removeListener(b.trackApplyStyle);a.document.on("applyStyle",b.trackApplyStyle)});a.on("contextMenuOnOpen",b.trackContextMenuOpen);a.on("contextMenuOnClick",b.trackContextMenuItem);a.on("listCreated",b.trackListCreated);a.on("RTEready",function(){b.trackLoadTime(a)});a.on("RTEready",function(){b.trackBrowser("init")});$("#wpSave").click(function(){b.trackBrowser("save")});a.on("buttonClick",
function(c){RTE.track("toolbar",c.data.button.command)});a.on("panelShow",function(c){c=c.data.me;c=c.trackingName||c.className.split("_").pop();RTE.track("toolbar",c+"Menu","open")});a.on("panelClick",function(c){var e=c.data.me;c=c.data.value;var g=e.trackingName||e.className.split("_").pop();if(g=="template")if(c=="--other--")c="other";else{e=e._.items;var h=0;for(tpl in e){h++;if(tpl==c){c=h;break}}}RTE.track("toolbar",g+"Menu",c)});a.on("instanceReady",function(){$("#mw-toolbar").bind("click",
function(c){c=$(c.target).filter("img");if(c.exists()){c=c.attr("id").split("-").pop();RTE.track("source",c)}})})},trackApplyStyle:function(a){var b=a.data.style;a=a.data.remove;b&&!a&&RTE.track("toolbar","format",b)},trackContextMenuOpen:function(){RTE.track("contextMenu","open")},trackContextMenuItem:function(a){a=a.data.item.command;var b,c=["cell","row","column"];for(b=0;b<c.length;b++){var e=c[b];if(a.indexOf(e)==0){RTE.track("contextMenu","action",e,a);return}}RTE.track("contextMenu","action",
a)},trackListCreated:function(a){a=a.data.listNode.getName()=="ul"?"unorderedList":"orderedList";RTE.track("format",a)},trackLoadTime:function(a){var b=parseInt(RTE.loadTime*10)*100;switch(a.mode){case "source":RTE.track("init","sourceMode",b);window.RTEEdgeCase&&RTE.track("init","edgecase",window.RTEEdgeCase);break;case "wysiwyg":RTE.track("init","wysiwygMode",b)}},trackBrowser:function(a){var b=CKEDITOR.env,c=b.ie?"ie":b.gecko?"gecko":b.opera?"opera":b.air?"air":b.webkit?"webkit":"unknown";b=c==
"gecko"?parseInt(b.version/1E4)+"."+parseInt(b.version/100%100)+"."+b.version%100:b.version;RTE.track("browser",a,c,b)}});CKEDITOR.plugins.add("rte-widescreen",{init:function(a){var b=window.ToggleWideScreen,c=$("body").hasClass("editingWide")?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;a.addCommand("widescreen",{exec:function(e){b.call();this.toggleState();e.fire("widescreen")},state:c});a.ui.addButton("Widescreen",{title:a.lang.widescreen.toggle,className:"RTEWidescreenButton",command:"widescreen"})}});
CKEDITOR.themes.add("wikia",function(){return{build:function(a){var b=a.name,c=a.element,e=a.elementMode;if(!(!c||e==CKEDITOR.ELEMENT_MODE_NONE)){e==CKEDITOR.ELEMENT_MODE_REPLACE&&c.hide();var g=a.fire("themeSpace",{space:"contents",html:"",elements:[]}).html,h=g&&a.config.height,j=a.config.tabIndex||a.element.getAttribute("tabindex")||0;if(g)isNaN(h)||(h+="px");else h="auto";var f="",d=a.config.width;if(d){isNaN(d)||(d+="px");f+="width: "+d+";"}b=CKEDITOR.dom.element.createFromHtml(['<div id="cke_',
b,'" class="',a.skinClass,'" dir="',a.lang.dir,'" title="',CKEDITOR.env.gecko?" ":"",'" lang="',a.langCode,'" tabindex="'+j+'"'+(f?' style="'+f+'"':"")+'><div class="',CKEDITOR.env.cssClass,'"><div class="cke_wrapper cke_',a.lang.dir,'"><div id="cke_contents_',b,'" class="cke_contents" style="height:',h,'">',g,"</div><style>.",a.skinClass,"{visibility:hidden;}</style></div></div></div>"].join(""));e==CKEDITOR.ELEMENT_MODE_REPLACE?b.insertAfter(c):c.append(b);a.container=b;b.disableContextMenu();a.fireOnce("themeLoaded");
a.fireOnce("uiReady");RTE.log("theme is ready")}},buildDialog:function(a){var b=CKEDITOR.tools.getNextNumber();a=CKEDITOR.dom.element.createFromHtml(['<div id="cke_'+a.name.replace(".","\\.")+'_dialog" class="cke_skin_',a.skinName,'" dir="',a.lang.dir,'" lang="',a.langCode,'"><div class="cke_dialog modalWrapper'," "+CKEDITOR.env.cssClass," cke_",a.lang.dir,'" style="position:absolute"><div class="%body"><div id="%title#" class="%title"></div><div id="%close_button#" class="%close_button"><img src="'+
window.stylepath+'/common/blank.gif" class="sprite close" /></div><div id="%tabs#" class="%tabs accent tabs"></div><div id="%contents#" class="%contents"></div><div id="%footer#" class="%footer"></div></div><div id="%tl#" class="%tl"></div><div id="%tc#" class="%tc"></div><div id="%tr#" class="%tr"></div><div id="%ml#" class="%ml"></div><div id="%mr#" class="%mr"></div><div id="%bl#" class="%bl"></div><div id="%bc#" class="%bc"></div><div id="%br#" class="%br"></div></div>',CKEDITOR.env.ie?"":"<style>.cke_dialog{visibility:hidden;}</style>",
"</div>"].join("").replace(/#/g,"_"+b).replace(/%/g,"cke_dialog_"));b=a.getChild([0,0]);b.getChild(0).unselectable();b.getChild(1).unselectable();b.getChild(0).setStyles({backgroundColor:RTE.config.baseBackgroundColor,color:RTE.config.baseColor});return{element:a,parts:{dialog:a.getChild(0),title:b.getChild(0),close:b.getChild(1),tabs:b.getChild(2),contents:b.getChild(3),footer:b.getChild(4)}}},destroy:function(a){var b=a.container,c=a.panels;if(CKEDITOR.env.ie){b.setStyle("display","none");var e=
document.body.createTextRange();e.moveToElementText(b.$);try{e.select()}catch(g){}}b&&b.remove();for(b=0;c&&b<c.length;b++)c[b].remove();if(a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE){a.element.show();delete a.element}}}}());
CKEDITOR.editor.prototype.getThemeSpace=function(a){var b="cke_"+a;return this._[b]||(this._[b]=CKEDITOR.document.getById(function(c,e){switch(e){case "tabs":return"EditPageTabs";case "toolbar":return"EditPageToolbar";case "contents":return b+"_"+c;case "rail":return"EditPageRail"}}(this.name,a)))};
CKEDITOR.editor.prototype.resize=function(a,b,c,e){if(/^\d+$/.test(a))a+="px";var g=CKEDITOR.document.getById("cke_contents_"+this.name);e=e?g.getAscendant("table").getParent():g.getAscendant("table").getParent().getParent().getParent();CKEDITOR.env.webkit&&e.setStyle("display","none");e.setStyle("width",a);CKEDITOR.env.webkit&&e.setStyle("display","");g.setStyle("height",Math.max(b-(c?0:(e.$.offsetHeight||0)-(g.$.clientHeight||0)),0)+"px");this.fire("resize")};
CKEDITOR.editor.prototype.getResizable=function(){return this.container.getChild([0,0])};
CKEDITOR.skins.add("wikia",function(){var a=[];CKEDITOR.env.ie&&CKEDITOR.env.version<7&&a.push("icons.png","images/sprites_ie6.png","images/dialog_sides.gif");return{preload:a,editor:{css:[window.RTEDevMode?"editor.css":"editor.min.css"]},dialog:{css:["dialog.css"]},templates:{css:["templates.css"]},margins:[0,0,0,0],init:function(b){function c(d){d=d.getHead().append("style");d.setAttribute("id","cke_ui_color");d.setAttribute("type","text/css");return d}function e(d,k,l){for(var m,p,r,t=0;t<d.length;t++)if(CKEDITOR.env.webkit){for(p=
0;p<d[t].$.sheet.rules.length;p++)d[t].$.sheet.removeRule(p);for(p=0;p<k.length;p++){r=k[p][1];for(m=0;m<l.length;m++)r=r.replace(l[m][0],l[m][1]);d[t].$.sheet.addRule(k[p][0],r)}}else{r=k;for(m=0;m<l.length;m++)r=r.replace(l[m][0],l[m][1]);if(CKEDITOR.env.ie)d[t].$.styleSheet.cssText=r;else d[t].setHtml(r)}}if(b.config.width&&!isNaN(b.config.width))b.config.width-=12;var g=[],h="/* UI Color Support */.cke_skin_wikia .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_wikia .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_wikia .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_wikia .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_wikia .cke_menuitem a:hover .cke_label,.cke_skin_wikia .cke_menuitem a:focus .cke_label,.cke_skin_wikia .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_wikia .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_wikia .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_wikia .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_wikia .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_wikia .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_wikia .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_wikia .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_wikia .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_wikia .cke_menuitem a:hover,.cke_skin_wikia .cke_menuitem a:focus,.cke_skin_wikia .cke_menuitem a:active{\tbackground-color: $color !important;}";
if(CKEDITOR.env.webkit){h=h.split("}").slice(0,-1);for(var j=0;j<h.length;j++)h[j]=h[j].split("{")}var f=/\$color/g;CKEDITOR.tools.extend(b,{uiColor:null,getUiColor:function(){return this.uiColor},setUiColor:function(d){var k,l=c(CKEDITOR.document),m="#cke_"+b.name.replace(".","\\.");m=[m+" .cke_wrapper",m+"_dialog .cke_dialog_contents",m+"_dialog a.cke_dialog_tab",m+"_dialog .cke_dialog_footer"].join(",");k=CKEDITOR.env.webkit?[[m,"background-color: $color !important;"]]:m+"{background-color: $color !important;}";
return(this.setUiColor=function(p){var r=[[f,p]];b.uiColor=p;e([l],k,r);e(g,h,r)})(d)}});b.on("menuShow",function(d){d=d.data[0].element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!d.getById("cke_ui_color")){d=c(d);g.push(d);var k=b.getUiColor();k&&e([d],h,[[f,k]])}});b.config.uiColor&&b.setUiColor(b.config.uiColor)}}}());
if(CKEDITOR.dialog)CKEDITOR.dialog.on("resize",function(a){a=a.data;var b=a.width,c=a.height,e=a.dialog.parts.contents;if(a.skin=="wikia"){e.setStyles(CKEDITOR.env.ie||CKEDITOR.env.gecko&&CKEDITOR.env.version<10900?{width:b+"px",height:c+"px"}:{"min-width":b+"px","min-height":c+"px"});CKEDITOR.env.ie&&setTimeout(function(){var g=e.getParent(),h=g.getParent(),j=h.getChild(2);j.setStyle("width",g.$.offsetWidth+"px");j=h.getChild(7);j.setStyle("width",g.$.offsetWidth-28+"px");j=h.getChild(4);j.setStyle("height",
g.$.offsetHeight-31-14+"px");j=h.getChild(5);j.setStyle("height",g.$.offsetHeight-31-14+"px")},100)}});